var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,n,r){if(e){const a=o(e,t,n,r);return e[0](a)}}function o(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function u(e,t,n,r){if(e[2]&&r){const a=e[2](r(n));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],n=Math.max(t.dirty.length,a.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|a[r];return e}return t.dirty|a}return t.dirty}function i(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function m(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function g(e){return document.createTextNode(e)}function h(){return g(" ")}function $(){return g("")}function _(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?void 0:+e}function b(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){(null!=t||e.value)&&(e.value=t)}function C(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function z(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function k(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function j(e,t,n){e.classList[n?"add":"remove"](t)}let q;function P(e){q=e}function S(){if(!q)throw new Error("Function called outside component initialization");return q}function N(){const e=S();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const a=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,a)})}}}function E(e,t){S().$$.context.set(e,t)}function A(e){return S().$$.context.get(e)}function F(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const O=[],L=[],M=[],I=[],T=Promise.resolve();let J=!1;function R(e){M.push(e)}function B(e){I.push(e)}let U=!1;const D=new Set;function H(){if(!U){U=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];P(t),Q(t.$$)}for(O.length=0;L.length;)L.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];D.has(t)||(D.add(t),t())}M.length=0}while(O.length);for(;I.length;)I.pop()();J=!1,U=!1,D.clear()}}function Q(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(R)}}const Z=new Set;let G;function X(){G={r:0,c:[],p:G}}function W(){G.r||r(G.c),G=G.p}function V(e,t){e&&e.i&&(Z.delete(e),e.i(t))}function Y(e,t,n,r){if(e&&e.o){if(Z.has(e))return;Z.add(e),G.c.push(()=>{Z.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function K(e,t){Y(e,1,1,()=>{t.delete(e.key)})}function ee(e,t,n,r,a,s,l,o,u,i,c,p){let d=e.length,f=s.length,m=d;const g={};for(;m--;)g[e[m].key]=m;const h=[],$=new Map,_=new Map;for(m=f;m--;){const e=p(a,s,m),o=n(e);let u=l.get(o);u?r&&u.p(e,t):(u=i(o,e),u.c()),$.set(o,h[m]=u),o in g&&_.set(o,Math.abs(m-g[o]))}const v=new Set,x=new Set;function y(e){V(e,1),e.m(o,c,l.has(e.key)),l.set(e.key,e),c=e.first,f--}for(;d&&f;){const t=h[f-1],n=e[d-1],r=t.key,a=n.key;t===n?(c=t.first,d--,f--):$.has(a)?!l.has(r)||v.has(r)?y(t):x.has(a)?d--:_.get(r)>_.get(a)?(x.add(r),y(t)):(v.add(a),d--):(u(n,l),d--)}for(;d--;){const t=e[d];$.has(t.key)||u(t,l)}for(;f;)y(h[f-1]);return h}function te(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ne(e){e&&e.c()}function re(e,n,s){const{fragment:l,on_mount:o,on_destroy:u,after_update:i}=e.$$;l&&l.m(n,s),R(()=>{const n=o.map(t).filter(a);u?u.push(...n):r(n),e.$$.on_mount=[]}),i.forEach(R)}function ae(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function se(e,t){-1===e.$$.dirty[0]&&(O.push(e),J||(J=!0,T.then(H)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(t,a,s,l,o,u,i=[-1]){const c=q;P(t);const d=a.props||{},f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:i};let m=!1;if(f.ctx=s?s(t,d,(e,n,...r)=>{const a=r.length?r[0]:n;return f.ctx&&o(f.ctx[e],f.ctx[e]=a)&&(f.bound[e]&&f.bound[e](a),m&&se(t,e)),n}):[],f.update(),m=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);f.fragment&&f.fragment.l(e),e.forEach(p)}else f.fragment&&f.fragment.c();a.intro&&V(t.$$.fragment),re(t,a.target,a.anchor),H()}P(c)}class oe{$destroy(){ae(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const ue=[];function ie(e){const t=e.substr(2),n=t.match(/^component\/(.*)$/),r=t.match(/^settings$/);return{component_id:n?"component-"+n[1]:null,component_selector:n?"#component-"+n[1]:null,component_path:n?n[1]:null,settings:!!r,root:""==t}}function ce(e){let t=[];function n(){if(t)for(let e of t)e&&(console.log("route away",e),e.classList.remove("target"));if(t=e(ie(window.location.hash)),t)for(let e of t)e&&(e.classList.add("target"),console.log("route to",e))}return window.addEventListener("hashchange",n,!1),window.addEventListener("load",n,!1),n}function pe(e){return Object.keys(e).filter(t=>null!==e[t]&&void 0!==e[t]).reduce((t,n)=>(t[n]=e[n],t),{})}function de(e,...t){let n=e;for(let e=0;e<t.length;e++)n=t[e](n);return n}function fe(e){return e.reduce((e,t)=>Math.max(e,t.id+1),e.length)}function me(t){let n,r,a,s,l,o;return{c(){n=f("input"),C(n,"width",t[1]+1+"em"),x(n,"type","number"),x(n,"placeholder",r=t[2].placeholder),x(n,"min",a=t[2].min),x(n,"max",s=t[2].max),x(n,"step",l=t[2].step)},m(e,r,a){c(e,n,r),w(n,t[0]),a&&o(),o=_(n,"input",t[8])},p(e,[t]){2&t&&C(n,"width",e[1]+1+"em"),4&t&&r!==(r=e[2].placeholder)&&x(n,"placeholder",r),4&t&&a!==(a=e[2].min)&&x(n,"min",a),4&t&&s!==(s=e[2].max)&&x(n,"max",s),4&t&&l!==(l=e[2].step)&&x(n,"step",l),1&t&&y(n.value)!==e[0]&&w(n,e[0])},i:e,o:e,d(e){e&&p(n),o()}}}function ge(e,t,n){let r,{value:a=null}=t,{def:s=null}=t,{force:l=!1}=t,{min:o=null}=t,{max:u=null}=t,{step:i=null}=t,{size:c=5}=t;return e.$set=e=>{"value"in e&&n(0,a=e.value),"def"in e&&n(3,s=e.def),"force"in e&&n(4,l=e.force),"min"in e&&n(5,o=e.min),"max"in e&&n(6,u=e.max),"step"in e&&n(7,i=e.step),"size"in e&&n(1,c=e.size)},e.$$.update=()=>{248&e.$$.dirty&&n(2,r={placeholder:s,min:l?s:o,max:l?s:u,step:i||"any"})},[a,c,r,s,l,o,u,i,function(){a=y(this.value),n(0,a)}]}class he extends oe{constructor(e){super(),le(this,e,ge,me,s,{value:0,def:3,force:4,min:5,max:6,step:7,size:1})}}function $e(t){let n,r,a;return{c(){n=f("input"),r=g(" min"),C(n,"width",t[2]+1+"em"),x(n,"type","number"),x(n,"placeholder",t[1]),x(n,"step",t[3]),x(n,"title",t[4])},m(e,s,l){c(e,n,s),w(n,t[0]),c(e,r,s),l&&a(),a=_(n,"input",t[5])},p(e,[t]){4&t&&C(n,"width",e[2]+1+"em"),2&t&&x(n,"placeholder",e[1]),8&t&&x(n,"step",e[3]),16&t&&x(n,"title",e[4]),1&t&&y(n.value)!==e[0]&&w(n,e[0])},i:e,o:e,d(e){e&&p(n),e&&p(r),a()}}}function _e(e,t,n){let{value:r=null}=t,{def:a=null}=t,{size:s=5}=t,{step:l="any"}=t,{title:o=""}=t;return e.$set=e=>{"value"in e&&n(0,r=e.value),"def"in e&&n(1,a=e.def),"size"in e&&n(2,s=e.size),"step"in e&&n(3,l=e.step),"title"in e&&n(4,o=e.title)},[r,a,s,l,o,function(){r=y(this.value),n(0,r)}]}class ve extends oe{constructor(e){super(),le(this,e,_e,$e,s,{value:0,def:1,size:2,step:3,title:4})}}function xe(t){let n,r,a,s;return{c(){n=f("input"),x(n,"type","checkbox"),x(n,"data-def",t[1]),x(n,"data-force",t[2]),x(n,"data-checked",t[0]),n.checked=r=t[0]||!1===t[0]?t[0]:t[1],n.readOnly=a=t[3]?!t[0]&&!1!==t[0]:t[2],n.disabled=t[2]},m(e,r,a){c(e,n,r),a&&s(),s=_(n,"change",t[4])},p(e,[t]){2&t&&x(n,"data-def",e[1]),4&t&&x(n,"data-force",e[2]),1&t&&x(n,"data-checked",e[0]),3&t&&r!==(r=e[0]||!1===e[0]?e[0]:e[1])&&(n.checked=r),13&t&&a!==(a=e[3]?!e[0]&&!1!==e[0]:e[2])&&(n.readOnly=a),4&t&&(n.disabled=e[2])},i:e,o:e,d(e){e&&p(n),s()}}}function ye(e,t,n){let{checked:r=null}=t,{def:a=null}=t,{force:s=!1}=t,{tristate:l=!0}=t;return e.$set=e=>{"checked"in e&&n(0,r=e.checked),"def"in e&&n(1,a=e.def),"force"in e&&n(2,s=e.force),"tristate"in e&&n(3,l=e.tristate)},[r,a,s,l,function(e){let t=!e.target.checked,s=e.target.checked;e.target.readOnly?n(0,r=s):t==a&&l&&null!==a?(n(0,r=null),e.target.checked=t):n(0,r=s)}]}class be extends oe{constructor(e){super(),le(this,e,ye,xe,s,{checked:0,def:1,force:2,tristate:3})}}function we(e,t,n){const r=e.slice();return r[26]=t[n],r}function Ce(e,t,n){const r=e.slice();return r[23]=t[n],r[25]=n,r}function ze(e,t,n){const r=e.slice();return r[26]=t[n],r}function ke(t){let n,r,a=t[26]+"";return{c(){n=f("th"),r=g(a)},m(e,t){c(e,n,t),i(n,r)},p:e,d(e){e&&p(n)}}}function je(e){let t,n,r,a,s,l,o=e[26].substr(0,2)+"";function u(t){e[19].call(null,t,e[25],e[26])}let d={title:e[26]};void 0!==e[0].postes_estimations[e[25]].components[e[26]]&&(d.checked=e[0].postes_estimations[e[25]].components[e[26]]);const m=new be({props:d});return L.push(()=>te(m,"checked",u)),{c(){t=f("td"),n=f("label"),ne(m.$$.fragment),a=h(),s=g(o),x(n,"class","svelte-x24czq")},m(e,r){c(e,t,r),i(t,n),re(m,n,null),i(n,a),i(n,s),l=!0},p(t,n){e=t;const a={};!r&&9&n&&(r=!0,a.checked=e[0].postes_estimations[e[25]].components[e[26]],B(()=>r=!1)),m.$set(a)},i(e){l||(V(m.$$.fragment,e),l=!0)},o(e){Y(m.$$.fragment,e),l=!1},d(e){e&&p(t),ae(m)}}}function qe(e){let t,n,a,s,l,o,u,m,$,v,y,w,C,k,j,q,P,S,N,E,A,F,O,M,I,T,J,U,D,H,Q,Z,G,K,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,ge,he,$e,_e,xe=e[23].name+"",ye=e[8](e[0],e[25]).join(", ")+"";function be(t){e[15].call(null,t,e[25])}let Ce={};void 0!==e[0].postes_estimations[e[25]].value&&(Ce.value=e[0].postes_estimations[e[25]].value);const ze=new ve({props:Ce});function ke(){e[16].call(v,e[25])}function qe(...t){return e[17](e[25],...t)}function Pe(...t){return e[18](e[25],...t)}L.push(()=>te(ze,"value",be));let Se=e[3],Ne=[];for(let t=0;t<Se.length;t+=1)Ne[t]=je(we(e,Se,t));const Ee=e=>Y(Ne[e],1,1,()=>{Ne[e]=null});return{c(){t=f("tr"),n=f("td"),a=g(xe),s=g(" :"),l=h(),o=f("td"),ne(ze.$$.fragment),m=h(),$=f("td"),v=f("select"),y=f("option"),y.textContent="(désactivé)",w=f("optgroup"),C=f("option"),C.textContent="une fois pour toutes",k=f("option"),j=g("par élément ("),q=g(ye),P=g(")"),S=f("option"),S.textContent="par ferrage de charnières",N=f("option"),N.textContent="par tenon",E=f("optgroup"),A=f("option"),A.textContent="par m² de montants ou traverses à contre-profil",F=f("option"),F.textContent="par m² de montants ou traverses (sauf contre-profil)",O=f("option"),O.textContent="par m² de montants ou traverses (tous)",M=f("option"),M.textContent="par m² de panneaux montés en rainure",I=f("option"),I.textContent="par m² de panneaux libres",T=f("option"),T.textContent="par m² de panneaux (tous)",J=f("option"),J.textContent="par m² de côtés de tiroir",U=f("option"),U.textContent="par m² (toutes pièces)",D=f("option"),D.textContent="par nombre de montants ou traverses à contre-profil",H=f("option"),H.textContent="par nombre de montants ou traverses (sauf contre-profil)",Q=f("option"),Q.textContent="par nombre de montants ou traverses (tous)",Z=f("option"),Z.textContent="par nombre de panneaux montés en rainure",G=f("option"),G.textContent="par nombre de panneaux libres",K=f("option"),K.textContent="par nombre de panneaux (tous)",ee=f("option"),ee.textContent="par nombre de côtés de tiroir",se=f("option"),se.textContent="par nombre total de pièces",le=f("optgroup"),oe=f("option"),oe.textContent="par m² de panneau (ep ⩽ 20)",ue=f("option"),ue.textContent="par m² de pièces (ep > 20)",ie=f("option"),ie.textContent="par panneau (ep ⩽ 20)",ce=f("option"),ce.textContent="par nombre de pièces (ep > 20)",pe=h(),de=f("td"),fe=f("button"),fe.textContent="🗑",me=h(),ge=f("button"),ge.textContent="✎",he=h();for(let e=0;e<Ne.length;e+=1)Ne[e].c();y.__value="",y.value=y.__value,C.__value="constant",C.value=C.__value,k.__value="per_component",k.value=k.__value,S.__value="per_ferrage_charniere",S.value=S.__value,N.__value="tenon",N.value=N.__value,x(w,"label","par opération..."),A.__value="m2_trav_mont_cp",A.value=A.__value,F.__value="m2_trav_mont_ncp",F.value=F.__value,O.__value="m2_trav_mont",O.value=O.__value,M.__value="m2_panneau",M.value=M.__value,I.__value="m2_panneau_seul",I.value=I.__value,T.__value="m2_panneau_tous",T.value=T.__value,J.__value="m2_cote",J.value=J.__value,U.__value="m2_plateau",U.value=U.__value,D.__value="nb_trav_mont_cp",D.value=D.__value,H.__value="nb_trav_mont_ncp",H.value=H.__value,Q.__value="nb_trav_mont",Q.value=Q.__value,Z.__value="nb_panneau",Z.value=Z.__value,G.__value="nb_panneau_seul",G.value=G.__value,K.__value="nb_panneau_tous",K.value=K.__value,ee.__value="nb_cote",ee.value=ee.__value,se.__value="nb_plateau",se.value=se.__value,x(E,"label","par type de pièce..."),oe.__value="m2_ep0_20",oe.value=oe.__value,ue.__value="m2_ep20_plus",ue.value=ue.__value,ie.__value="nb_ep0_20",ie.value=ie.__value,ce.__value="nb_ep20_plus",ce.value=ce.__value,x(le,"label","par épaisseur..."),void 0===e[0].postes_estimations[e[25]].indice&&R(ke)},m(u,p,d){c(u,t,p),i(t,n),i(n,a),i(n,s),i(t,l),i(t,o),re(ze,o,null),i(t,m),i(t,$),i($,v),i(v,y),i(v,w),i(w,C),i(w,k),i(k,j),i(k,q),i(k,P),i(w,S),i(w,N),i(v,E),i(E,A),i(E,F),i(E,O),i(E,M),i(E,I),i(E,T),i(E,J),i(E,U),i(E,D),i(E,H),i(E,Q),i(E,Z),i(E,G),i(E,K),i(E,ee),i(E,se),i(v,le),i(le,oe),i(le,ue),i(le,ie),i(le,ce),z(v,e[0].postes_estimations[e[25]].indice),i(t,pe),i(t,de),i(de,fe),i(de,me),i(de,ge),i(t,he);for(let e=0;e<Ne.length;e+=1)Ne[e].m(t,null);$e=!0,d&&r(_e),_e=[_(v,"change",ke),_(fe,"click",qe),_(ge,"click",Pe)]},p(n,r){e=n,(!$e||2&r)&&xe!==(xe=e[23].name+"")&&b(a,xe);const s={};if(!u&&1&r&&(u=!0,s.value=e[0].postes_estimations[e[25]].value,B(()=>u=!1)),ze.$set(s),(!$e||1&r)&&ye!==(ye=e[8](e[0],e[25]).join(", ")+"")&&b(q,ye),1&r&&z(v,e[0].postes_estimations[e[25]].indice),9&r){let n;for(Se=e[3],n=0;n<Se.length;n+=1){const a=we(e,Se,n);Ne[n]?(Ne[n].p(a,r),V(Ne[n],1)):(Ne[n]=je(a),Ne[n].c(),V(Ne[n],1),Ne[n].m(t,null))}for(X(),n=Se.length;n<Ne.length;n+=1)Ee(n);W()}},i(e){if(!$e){V(ze.$$.fragment,e);for(let e=0;e<Se.length;e+=1)V(Ne[e]);$e=!0}},o(e){Y(ze.$$.fragment,e),Ne=Ne.filter(Boolean);for(let e=0;e<Ne.length;e+=1)Y(Ne[e]);$e=!1},d(e){e&&p(t),ae(ze),d(Ne,e),r(_e)}}}function Pe(e){let t,n,a,s,l,o,u,m,$,v,y,w,C,z,k,j,q,P,S,N,E,A,F,O,M,I,T,J,R,U,D,H,Q,Z,G,K,ee,se,le,oe,ue,ie,ce,pe,de,fe=JSON.stringify(e[1],null,2)+"";function me(t){e[13].call(null,t)}let ge={def:e[4].cubeprice,min:"0"};void 0!==e[0].cubeprice&&(ge.value=e[0].cubeprice);const $e=new he({props:ge});function _e(t){e[14].call(null,t)}L.push(()=>te($e,"value",me));let ve={def:e[4].cubemargin,min:"0"};void 0!==e[0].cubemargin&&(ve.value=e[0].cubemargin);const xe=new he({props:ve});L.push(()=>te(xe,"value",_e));let ye=e[3],be=[];for(let t=0;t<ye.length;t+=1)be[t]=ke(ze(e,ye,t));let we=e[1].postes_estimations,je=[];for(let t=0;t<we.length;t+=1)je[t]=qe(Ce(e,we,t));const Pe=e=>Y(je[e],1,1,()=>{je[e]=null});return{c(){t=f("div"),n=f("button"),n.textContent="Fermer",a=h(),s=f("hr"),l=h(),o=f("label"),u=f("span"),u.textContent="Prix du bois : ",ne($e.$$.fragment),$=g(" €"),v=h(),y=f("label"),w=f("span"),w.textContent="Marge de cubage : ",ne(xe.$$.fragment),z=g(" %"),k=h(),j=f("h2"),j.textContent="Postes",q=h(),P=f("table"),S=f("tr"),N=f("th"),N.textContent="Nom",E=h(),A=f("th"),A.textContent="Temps (min)",F=h(),O=f("th"),O.textContent="Indice",M=h(),I=f("th"),I.textContent=" ",T=h();for(let e=0;e<be.length;e+=1)be[e].c();J=h();for(let e=0;e<je.length;e+=1)je[e].c();R=h(),U=f("li"),D=f("button"),D.textContent="Ajouter un poste",H=h(),Q=f("hr"),Z=h(),G=f("button"),G.textContent="Fermer",K=h(),ee=f("button"),ee.textContent="Ouvrir...",se=h(),le=f("details"),oe=f("summary"),oe.textContent="Contenu des préférences",ue=h(),ie=f("pre"),ce=g(fe),x(P,"class","estim svelte-x24czq"),x(t,"class","routable")},m(p,d,f){c(p,t,d),i(t,n),i(t,a),i(t,s),i(t,l),i(t,o),i(o,u),re($e,o,null),i(o,$),i(t,v),i(t,y),i(y,w),re(xe,y,null),i(y,z),i(t,k),i(t,j),i(t,q),i(t,P),i(P,S),i(S,N),i(S,E),i(S,A),i(S,F),i(S,O),i(S,M),i(S,I),i(S,T);for(let e=0;e<be.length;e+=1)be[e].m(S,null);i(P,J);for(let e=0;e<je.length;e+=1)je[e].m(P,null);i(P,R),i(P,U),i(U,D),i(t,H),i(t,Q),i(t,Z),i(t,G),i(t,K),i(t,ee),i(t,se),i(t,le),i(le,oe),i(le,ue),i(le,ie),i(ie,ce),e[22](t),pe=!0,f&&r(de),de=[_(n,"click",e[12]),_(D,"click",e[20]),_(G,"click",e[21]),_(ee,"click",e[9])]},p(e,[t]){const n={};!m&&1&t&&(m=!0,n.value=e[0].cubeprice,B(()=>m=!1)),$e.$set(n);const r={};if(!C&&1&t&&(C=!0,r.value=e[0].cubemargin,B(()=>C=!1)),xe.$set(r),8&t){let n;for(ye=e[3],n=0;n<ye.length;n+=1){const r=ze(e,ye,n);be[n]?be[n].p(r,t):(be[n]=ke(r),be[n].c(),be[n].m(S,null))}for(;n<be.length;n+=1)be[n].d(1);be.length=ye.length}if(459&t){let n;for(we=e[1].postes_estimations,n=0;n<we.length;n+=1){const r=Ce(e,we,n);je[n]?(je[n].p(r,t),V(je[n],1)):(je[n]=qe(r),je[n].c(),V(je[n],1),je[n].m(P,R))}for(X(),n=we.length;n<je.length;n+=1)Pe(n);W()}(!pe||2&t)&&fe!==(fe=JSON.stringify(e[1],null,2)+"")&&b(ce,fe)},i(e){if(!pe){V($e.$$.fragment,e),V(xe.$$.fragment,e);for(let e=0;e<we.length;e+=1)V(je[e]);pe=!0}},o(e){Y($e.$$.fragment,e),Y(xe.$$.fragment,e),je=je.filter(Boolean);for(let e=0;e<je.length;e+=1)Y(je[e]);pe=!1},d(n){n&&p(t),ae($e),ae(xe),d(be,n),d(je,n),e[22](null),r(de)}}}function Se(e,t,n){let{settings:r}=t,{settings_opened:a=!1}=t,s=Object.keys(A("App-components")),l={cubeprice:1440,cubemargin:135,postes_estimations:[]},o={};r.subscribe(e=>{n(0,o=e)});let u,i={};function c(){let e=prompt("Quel nom donner à l'estimation :");e&&n(0,o.postes_estimations=[...o.postes_estimations,{name:e,value:0,indice:"constant",components:s.reduce((e,t)=>(e[t]=!0,e),{})}],o),console.log(o.postes_estimations)}function p(e){o.postes_estimations.splice(e,1),n(0,o)}function d(e){let t=o.postes_estimations[e],r=prompt(`Renommer la phase "${t.name}" en :`,t.name);r&&n(0,o.postes_estimations[e].name=r,o)}ce(e=>(n(10,a=e.settings),e.settings?[u]:[]));return e.$set=e=>{"settings"in e&&n(11,r=e.settings),"settings_opened"in e&&n(10,a=e.settings_opened)},e.$$.update=()=>{1&e.$$.dirty&&n(0,o={postes_estimations:[],...o}),1&e.$$.dirty&&n(1,i={...l,...pe(o)}),2050&e.$$.dirty&&r.set(i)},[o,i,u,s,l,c,p,d,function(e,t){return s.filter(n=>e.postes_estimations[t].components[n])},function(){let e=document.createElement("input");e.style.display="none",e.setAttribute("type","file"),e.addEventListener("change",e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{let t=JSON.parse(e.target.result);t.settings&&r.set(t.settings)},n.readAsText(t)},!1),document.body.appendChild(e),e.click(),document.body.removeChild(e)},a,r,e=>window.location.hash="#/",function(e){o.cubeprice=e,n(0,o)},function(e){o.cubemargin=e,n(0,o)},function(e,t){o.postes_estimations[t].value=e,n(0,o)},function(e){o.postes_estimations[e].indice=k(this),n(0,o)},(e,t)=>p(e),(e,t)=>d(e),function(e,t,r){o.postes_estimations[t].components[r]=e,n(0,o)},e=>c(),e=>window.location.hash="#/",function(e){L[e?"unshift":"push"](()=>{n(2,u=e)})}]}class Ne extends oe{constructor(e){super(),le(this,e,Se,Pe,s,{settings:11,settings_opened:10})}}function Ee(e,t,n){const r=e.slice();return r[4]=t[n],r}function Ae(e){let t,n,r=e[0].children,a=[];for(let t=0;t<r.length;t+=1)a[t]=Oe(Ee(e,r,t));const s=e=>Y(a[e],1,1,()=>{a[e]=null});return{c(){t=f("ul");for(let e=0;e<a.length;e+=1)a[e].c()},m(e,r){c(e,t,r);for(let e=0;e<a.length;e+=1)a[e].m(t,null);n=!0},p(e,n){if(3&n){let l;for(r=e[0].children,l=0;l<r.length;l+=1){const s=Ee(e,r,l);a[l]?(a[l].p(s,n),V(a[l],1)):(a[l]=Oe(s),a[l].c(),V(a[l],1),a[l].m(t,null))}for(X(),l=r.length;l<a.length;l+=1)s(l);W()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)V(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Y(a[e]);n=!1},d(e){e&&p(t),d(a,e)}}}function Fe(e){let t,n,r;const a=new Ie({props:{path:e[1]+"-"+e[4].id,data:e[4]}});return{c(){t=f("li"),ne(a.$$.fragment),n=h()},m(e,s){c(e,t,s),re(a,t,null),i(t,n),r=!0},p(e,t){const n={};3&t&&(n.path=e[1]+"-"+e[4].id),1&t&&(n.data=e[4]),a.$set(n)},i(e){r||(V(a.$$.fragment,e),r=!0)},o(e){Y(a.$$.fragment,e),r=!1},d(e){e&&p(t),ae(a)}}}function Oe(e){let t,n,r=e[4].type&&Fe(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[4].type?r?(r.p(e,n),1&n&&V(r,1)):(r=Fe(e),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(X(),Y(r,1,1,()=>{r=null}),W())},i(e){n||(V(r),n=!0)},o(e){Y(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Le(e){let t,n,r,a,s,l,o,u,d=e[0].type+"",m=e[0].name+"",_=e[0].children&&Ae(e);return{c(){t=f("a"),n=g(d),r=h(),a=g(m),l=h(),_&&_.c(),o=$(),x(t,"href",s="#/component/"+e[1]),x(t,"class","svelte-99m9qk"),j(t,"selected",e[2])},m(e,s){c(e,t,s),i(t,n),i(t,r),i(t,a),c(e,l,s),_&&_.m(e,s),c(e,o,s),u=!0},p(e,[r]){(!u||1&r)&&d!==(d=e[0].type+"")&&b(n,d),(!u||1&r)&&m!==(m=e[0].name+"")&&b(a,m),(!u||2&r&&s!==(s="#/component/"+e[1]))&&x(t,"href",s),4&r&&j(t,"selected",e[2]),e[0].children?_?(_.p(e,r),1&r&&V(_,1)):(_=Ae(e),_.c(),V(_,1),_.m(o.parentNode,o)):_&&(X(),Y(_,1,1,()=>{_=null}),W())},i(e){u||(V(_),u=!0)},o(e){Y(_),u=!1},d(e){e&&p(t),e&&p(l),_&&_.d(e),e&&p(o)}}}function Me(e,t,n){let{data:r={}}=t,{path:a="0"}=t,s=!1;function l(){const e=ie(window.location.hash);n(2,s=e.component_selector==="#component-"+a)}return window.addEventListener("hashchange",l,!1),window.addEventListener("load",l,!1),e.$set=e=>{"data"in e&&n(0,r=e.data),"path"in e&&n(1,a=e.path)},[r,a,s]}class Ie extends oe{constructor(e){super(),le(this,e,Me,Le,s,{data:0,path:1})}}function Te(e,t,n){const r=e.slice();return r[6]=t[n],r}function Je(e){let t,n,r=e[0].children,a=[];for(let t=0;t<r.length;t+=1)a[t]=Be(Te(e,r,t));const s=e=>Y(a[e],1,1,()=>{a[e]=null});return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=$()},m(e,r){for(let t=0;t<a.length;t+=1)a[t].m(e,r);c(e,t,r),n=!0},p(e,n){if(15&n){let l;for(r=e[0].children,l=0;l<r.length;l+=1){const s=Te(e,r,l);a[l]?(a[l].p(s,n),V(a[l],1)):(a[l]=Be(s),a[l].c(),V(a[l],1),a[l].m(t.parentNode,t))}for(X(),l=r.length;l<a.length;l+=1)s(l);W()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)V(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Y(a[e]);n=!1},d(e){d(a,e),e&&p(t)}}}function Re(e){let t;const n=new He({props:{path:e[1]+"-"+e[6].id,data:e[6],prefix:e[2]+e[3],indent:e[3]}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};3&t&&(r.path=e[1]+"-"+e[6].id),1&t&&(r.data=e[6]),12&t&&(r.prefix=e[2]+e[3]),8&t&&(r.indent=e[3]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function Be(e){let t,n,r=e[6].type&&Re(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[6].type?r?(r.p(e,n),1&n&&V(r,1)):(r=Re(e),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(X(),Y(r,1,1,()=>{r=null}),W())},i(e){n||(V(r),n=!0)},o(e){Y(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Ue(e){let t,n,r,a,s,l,o,u,d,m,_=e[0].type+"",v=e[0].name+"",x=e[0].children&&Je(e);return{c(){t=f("option"),n=g(e[2]),r=g(_),a=h(),s=g(v),u=h(),x&&x.c(),d=$(),t.__value=l="#/component/"+e[1],t.value=t.__value,t.selected=o=e[4]?"selected":"",j(t,"selected",e[4])},m(e,l){c(e,t,l),i(t,n),i(t,r),i(t,a),i(t,s),c(e,u,l),x&&x.m(e,l),c(e,d,l),m=!0},p(e,[a]){(!m||4&a)&&b(n,e[2]),(!m||1&a)&&_!==(_=e[0].type+"")&&b(r,_),(!m||1&a)&&v!==(v=e[0].name+"")&&b(s,v),(!m||2&a&&l!==(l="#/component/"+e[1]))&&(t.__value=l),t.value=t.__value,(!m||16&a&&o!==(o=e[4]?"selected":""))&&(t.selected=o),16&a&&j(t,"selected",e[4]),e[0].children?x?(x.p(e,a),1&a&&V(x,1)):(x=Je(e),x.c(),V(x,1),x.m(d.parentNode,d)):x&&(X(),Y(x,1,1,()=>{x=null}),W())},i(e){m||(V(x),m=!0)},o(e){Y(x),m=!1},d(e){e&&p(t),e&&p(u),x&&x.d(e),e&&p(d)}}}function De(e,t,n){let{data:r={}}=t,{path:a="0"}=t,{prefix:s=""}=t,{indent:l=" "}=t,o=!1;function u(){const e=ie(window.location.hash);n(4,o=e.component_selector==="#component-"+a)}return window.addEventListener("hashchange",u,!1),window.addEventListener("load",u,!1),e.$set=e=>{"data"in e&&n(0,r=e.data),"path"in e&&n(1,a=e.path),"prefix"in e&&n(2,s=e.prefix),"indent"in e&&n(3,l=e.indent)},[r,a,s,l,o]}class He extends oe{constructor(e){super(),le(this,e,De,Ue,s,{data:0,path:1,prefix:2,indent:3})}}function Qe(t){let n,r;return{c(){n=m("polyline"),x(n,"class","outline"),x(n,"points",t[1]),x(n,"fill","none"),x(n,"stroke","black"),x(n,"data-name",r=t[0].name)},m(e,t){c(e,n,t)},p(e,[t]){2&t&&x(n,"points",e[1]),1&t&&r!==(r=e[0].name)&&x(n,"data-name",r)},i:e,o:e,d(e){e&&p(n)}}}function Ze(e,t,n){let r,{piece:a}=t,{pos:s}=t;return e.$set=e=>{"piece"in e&&n(0,a=e.piece),"pos"in e&&n(2,s=e.pos)},e.$$.update=()=>{5&e.$$.dirty&&n(1,r=a.projection_polyline(s).map(e=>e.join(",")).join(" "))},[a,r,s]}class Ge extends oe{constructor(e){super(),le(this,e,Ze,Qe,s,{piece:0,pos:2})}}function Xe(e,t,n){const r=e.slice();return r[2]=t[n],r}function We(t){let n,r=console.warn("Unknown item.type for",t[0])+"";return{c(){n=g(r)},m(e,t){c(e,n,t)},p(e,t){1&t&&r!==(r=console.warn("Unknown item.type for",e[0])+"")&&b(n,r)},i:e,o:e,d(e){e&&p(n)}}}function Ve(e){let t,n,r,a,s=e[0].pieces,l=[];for(let t=0;t<s.length;t+=1)l[t]=Ke(Xe(e,s,t));const o=e=>Y(l[e],1,1,()=>{l[e]=null});return{c(){t=m("g");for(let e=0;e<l.length;e+=1)l[e].c();x(t,"transform",n="translate("+e[0].projection_position(e[1])[0]+", "+e[0].projection_position(e[1])[1]+")"),x(t,"data-name",r=e[0].name)},m(e,n){c(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);a=!0},p(e,u){if(3&u){let n;for(s=e[0].pieces,n=0;n<s.length;n+=1){const r=Xe(e,s,n);l[n]?(l[n].p(r,u),V(l[n],1)):(l[n]=Ke(r),l[n].c(),V(l[n],1),l[n].m(t,null))}for(X(),n=s.length;n<l.length;n+=1)o(n);W()}(!a||3&u&&n!==(n="translate("+e[0].projection_position(e[1])[0]+", "+e[0].projection_position(e[1])[1]+")"))&&x(t,"transform",n),(!a||1&u&&r!==(r=e[0].name))&&x(t,"data-name",r)},i(e){if(!a){for(let e=0;e<s.length;e+=1)V(l[e]);a=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Y(l[e]);a=!1},d(e){e&&p(t),d(l,e)}}}function Ye(e){let t;const n=new Ge({props:{piece:e[0],pos:e[1]}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.piece=e[0]),2&t&&(r.pos=e[1]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function Ke(e){let t;const n=new nt({props:{item:e[2],pos:e[1]}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.item=e[2]),2&t&&(r.pos=e[1]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function et(e){let t,n,r,a;const s=[Ye,Ve,We],l=[];function o(e,t){return"Piece"==e[0].type?0:"Group"==e[0].type?1:2}return t=o(e),n=l[t]=s[t](e),{c(){n.c(),r=$()},m(e,n){l[t].m(e,n),c(e,r,n),a=!0},p(e,[a]){let u=t;t=o(e),t===u?l[t].p(e,a):(X(),Y(l[u],1,1,()=>{l[u]=null}),W(),n=l[t],n||(n=l[t]=s[t](e),n.c()),V(n,1),n.m(r.parentNode,r))},i(e){a||(V(n),a=!0)},o(e){Y(n),a=!1},d(e){l[t].d(e),e&&p(r)}}}function tt(e,t,n){let{item:r}=t,{pos:a}=t;return e.$set=e=>{"item"in e&&n(0,r=e.item),"pos"in e&&n(1,a=e.pos)},[r,a]}class nt extends oe{constructor(e){super(),le(this,e,tt,et,s,{item:0,pos:1})}}function rt(e,t,n){const r=e.slice();return r[11]=t[n],r}function at(e,t,n){const r=e.slice();return r[11]=t[n],r}function st(e,t,n){const r=e.slice();return r[11]=t[n],r}function lt(e){let t;const n=new nt({props:{item:e[11],pos:"xy"}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.item=e[11]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function ot(e){let t;const n=new nt({props:{item:e[11],pos:"zy"}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.item=e[11]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function ut(e){let t;const n=new nt({props:{item:e[11],pos:"xZ"}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.item=e[11]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function it(e){let t,n,a,s,l,o,u,$,v,y,C,z,k,j,q,P,S,N,E,A,F,O,L,M,I,T=100*e[0]+"",J=e[3],R=[];for(let t=0;t<J.length;t+=1)R[t]=lt(st(e,J,t));const B=e=>Y(R[e],1,1,()=>{R[e]=null});let U=e[3],D=[];for(let t=0;t<U.length;t+=1)D[t]=ot(at(e,U,t));const H=e=>Y(D[e],1,1,()=>{D[e]=null});let Q=e[3],Z=[];for(let t=0;t<Q.length;t+=1)Z[t]=ut(rt(e,Q,t));const G=e=>Y(Z[e],1,1,()=>{Z[e]=null});return{c(){t=f("h3"),n=g(e[1]),a=h(),s=f("p"),l=g("Zoom : "),o=f("input"),u=h(),$=g(T),v=g(" %\n  "),y=f("br"),C=h(),z=f("a"),z.textContent="Enregistrer image",k=h(),j=m("svg"),q=m("g");for(let e=0;e<R.length;e+=1)R[e].c();S=m("g");for(let e=0;e<D.length;e+=1)D[e].c();E=m("g");for(let e=0;e<Z.length;e+=1)Z[e].c();x(o,"type","range"),x(o,"min","0"),x(o,"max","1"),x(o,"step",".05"),x(z,"href","javascript:void(0)"),x(q,"transform",P="translate(5, "+(5+e[0]*e[5])+") scale("+e[0]+" "+e[0]+")"),x(S,"transform",N="translate("+(5+e[0]*e[4]+10)+", "+(5+e[0]*e[5])+") scale("+e[0]+" "+e[0]+")"),x(E,"transform",A="translate(5, "+(5+e[0]*e[5]+5)+") scale("+e[0]+" "+e[0]+")"),x(j,"data-count",F=e[3].length),x(j,"width",O=5+e[0]*e[4]+5+e[0]*e[6]+5),x(j,"height",L=5+e[0]*e[5]+5+e[0]*e[6]+5)},m(p,d,f){c(p,t,d),i(t,n),c(p,a,d),c(p,s,d),i(s,l),i(s,o),w(o,e[0]),i(s,u),i(s,$),i(s,v),i(s,y),i(s,C),i(s,z),c(p,k,d),c(p,j,d),i(j,q);for(let e=0;e<R.length;e+=1)R[e].m(q,null);i(j,S);for(let e=0;e<D.length;e+=1)D[e].m(S,null);i(j,E);for(let e=0;e<Z.length;e+=1)Z[e].m(E,null);e[10](j),M=!0,f&&r(I),I=[_(o,"change",e[9]),_(o,"input",e[9]),_(z,"click",e[7])]},p(e,[t]){if((!M||2&t)&&b(n,e[1]),1&t&&w(o,e[0]),(!M||1&t)&&T!==(T=100*e[0]+"")&&b($,T),8&t){let n;for(J=e[3],n=0;n<J.length;n+=1){const r=st(e,J,n);R[n]?(R[n].p(r,t),V(R[n],1)):(R[n]=lt(r),R[n].c(),V(R[n],1),R[n].m(q,null))}for(X(),n=J.length;n<R.length;n+=1)B(n);W()}if((!M||33&t&&P!==(P="translate(5, "+(5+e[0]*e[5])+") scale("+e[0]+" "+e[0]+")"))&&x(q,"transform",P),8&t){let n;for(U=e[3],n=0;n<U.length;n+=1){const r=at(e,U,n);D[n]?(D[n].p(r,t),V(D[n],1)):(D[n]=ot(r),D[n].c(),V(D[n],1),D[n].m(S,null))}for(X(),n=U.length;n<D.length;n+=1)H(n);W()}if((!M||49&t&&N!==(N="translate("+(5+e[0]*e[4]+10)+", "+(5+e[0]*e[5])+") scale("+e[0]+" "+e[0]+")"))&&x(S,"transform",N),8&t){let n;for(Q=e[3],n=0;n<Q.length;n+=1){const r=rt(e,Q,n);Z[n]?(Z[n].p(r,t),V(Z[n],1)):(Z[n]=ut(r),Z[n].c(),V(Z[n],1),Z[n].m(E,null))}for(X(),n=Q.length;n<Z.length;n+=1)G(n);W()}(!M||33&t&&A!==(A="translate(5, "+(5+e[0]*e[5]+5)+") scale("+e[0]+" "+e[0]+")"))&&x(E,"transform",A),(!M||8&t&&F!==(F=e[3].length))&&x(j,"data-count",F),(!M||81&t&&O!==(O=5+e[0]*e[4]+5+e[0]*e[6]+5))&&x(j,"width",O),(!M||97&t&&L!==(L=5+e[0]*e[5]+5+e[0]*e[6]+5))&&x(j,"height",L)},i(e){if(!M){for(let e=0;e<J.length;e+=1)V(R[e]);for(let e=0;e<U.length;e+=1)V(D[e]);for(let e=0;e<Q.length;e+=1)V(Z[e]);M=!0}},o(e){R=R.filter(Boolean);for(let e=0;e<R.length;e+=1)Y(R[e]);D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)Y(D[e]);Z=Z.filter(Boolean);for(let e=0;e<Z.length;e+=1)Y(Z[e]);M=!1},d(n){n&&p(t),n&&p(a),n&&p(s),n&&p(k),n&&p(j),d(R,n),d(D,n),d(Z,n),e[10](null),r(I)}}}function ct(e,t,n){let r,a,s,l,o,{pieces:u}=t,{zoom:i=.25}=t,{name:c=u.name||"Dessin"}=t;return e.$set=e=>{"pieces"in e&&n(8,u=e.pieces),"zoom"in e&&n(0,i=e.zoom),"name"in e&&n(1,c=e.name)},e.$$.update=()=>{256&e.$$.dirty&&n(3,a=u instanceof Array?u:u.individual()),8&e.$$.dirty&&n(4,[s,l,o]=a.map(e=>e.bounding_box()).map(e=>[e.xmax,e.ymax,e.zmax]).reduce((e,t)=>[Math.max(e[0],t[0]),Math.max(e[1],t[1]),Math.max(e[2],t[2])],[0,0,0]),s,(n(5,l),n(3,a),n(8,u)),(n(6,o),n(3,a),n(8,u)))},[i,c,r,a,s,l,o,function(){let e=r.outerHTML,t=(prompt("Nom du fichier :",c)||"dessin")+".svg",n=new window.File([e],t,{type:"image/svg+xml"}),a=URL.createObjectURL(n);try{let e=document.createElement("a");e.href=a,e.style.display="none",e.setAttribute("download",t),document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(a)}},u,function(){i=y(this.value),n(0,i)},function(e){L[e?"unshift":"push"](()=>{n(2,r=e)})}]}class pt extends oe{constructor(e){super(),le(this,e,ct,it,s,{pieces:8,zoom:0,name:1})}}function dt(e){switch(e){case"left":case"l":case"gauche":case"ga":case"zy":case"x":return"zy";case"right":case"r":case"droite":case"dr":case"Zy":case"X":return"Zy";case"top":case"t":case"haut":case"h":case"xZ":case"y":return"xZ";case"bottom":case"b":case"bas":case"xz":case"Y":return"xz";case"front":case"F":case"avant":case"av":case"xy":case"z":return"xy";case"back":case"B":case"arrière":case"ar":case"Xy":case"Z":return"Xy";default:throw"Unknown position "+e}}function ft(e){switch(e){case"xyz":case"xzy":case"yxz":case"yzx":case"zxy":case"zyx":return e;default:throw"Unknown orient "+e}}class mt{constructor(e,t,n){this.component_type=n,this.type="Group",this.pieces=e||[],this.name=t,this.x=0,this.y=0,this.z=0,this.features=[]}individual(){return this.pieces.reduce((e,t)=>e.concat(t.individual().map(e=>e.prefix_name(this.name))),[])}shallow(){return this.update({pieces:this.pieces.filter(e=>!(e instanceof mt))})}flat_groups(e,t){let n=[],r=[];for(let t of this.pieces)t instanceof mt?n=n.concat(t.flat_groups(`${e||""}${this.name} `)):r.push(t);return n=[this.update({pieces:r,name:`${e||""}${this.name}`})].concat(n),t&&n.push(this.update({pieces:this.individual(),name:`${e||""}Total ${this.name}`})),n}surface(){return this.pieces.reduce((e,t)=>e+t.surface(),0)}get nombre_tenons(){return this.pieces.reduce((e,t)=>e+t.nombre_tenons,0)}update(e){return this.update_new({...this,...e})}update_new(e){return Object.assign(Object.create(mt.prototype),e)}add_pieces(e){return this.update({pieces:[...this.pieces,...e]})}position(e,t,n){return this.update({x:e||0==e?e:this.x,y:t||0==t?t:this.y,z:n||0==n?n:this.z})}get largeur(){let e=this.bounding_box();return e.xmax-e.xmin}get hauteur(){let e=this.bounding_box();return e.ymax-e.ymin}get profondeur(){let e=this.bounding_box();return e.zmax-e.zmin}bounding_box(){let e={xmin:Math.min,ymin:Math.min,zmin:Math.min,xmax:Math.max,ymax:Math.max,zmax:Math.max},t=this.pieces.map(e=>e.bounding_box()).reduce((t,n)=>null===t?n:Object.keys(e).reduce((r,a)=>({...r,[a]:e[a](t[a],n[a])}),{}),null)||{};return{xmin:this.x+(t.xmin||0),xmax:this.x+(t.xmax||0),ymin:this.y+(t.ymin||0),ymax:this.y+(t.ymax||0),zmin:this.z+(t.zmin||0),zmax:this.z+(t.zmax||0)}}dim(e){return[(e==e.toLowerCase()?1:-1)*this[e=e.toLowerCase()]]}projection_position(e){return e=dt(e),[this.dim(e[0]),-this.dim(e[1])]}add_features(){return this.update({features:[...this.features,...Array.from(arguments,e=>e&&!this.features.includes(e))]})}count_features(){return this.pieces.map(e=>e.count_features(...arguments)).reduce((e,t)=>{for(let n in t)e[n]=(e[n]||0)+t[n];return e},this.features)}}function gt(e,t,n){const r=e.slice();return r[32]=t[n],r[34]=n,r}function ht(e,t,n){const r=e.slice();return r[32]=t[n],r[34]=n,r}const $t=e=>({}),_t=e=>({}),vt=e=>({}),xt=e=>({}),yt=e=>({}),bt=e=>({}),wt=e=>({}),Ct=e=>({});function zt(e){let t,n=e[0].children,r=[];for(let t=0;t<n.length;t+=1)r[t]=jt(ht(e,n,t));return{c(){t=f("ul");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){c(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,a){if(99&a[0]){let s;for(n=e[0].children,s=0;s<n.length;s+=1){const l=ht(e,n,s);r[s]?r[s].p(l,a):(r[s]=jt(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&p(t),d(r,e)}}}function kt(e){let t,n,a,s,l,o,u,d,m,$,y,w,C=e[32].type+"",z=e[32].name+"";function k(...t){return e[29](e[34],...t)}function j(...t){return e[30](e[34],...t)}return{c(){t=f("li"),n=f("a"),a=g(C),s=h(),l=g(z),u=h(),d=f("a"),d.textContent="✎",m=h(),$=f("a"),$.textContent="🗑",y=h(),x(n,"href",o="#/component/"+e[1]+"-"+e[32].id),x(d,"href","@"),x($,"href","@")},m(e,o,p){c(e,t,o),i(t,n),i(n,a),i(n,s),i(n,l),i(t,u),i(t,d),i(t,m),i(t,$),i(t,y),p&&r(w),w=[_(d,"click",v(k)),_($,"click",v(j))]},p(t,r){e=t,1&r[0]&&C!==(C=e[32].type+"")&&b(a,C),1&r[0]&&z!==(z=e[32].name+"")&&b(l,z),3&r[0]&&o!==(o="#/component/"+e[1]+"-"+e[32].id)&&x(n,"href",o)},d(e){e&&p(t),r(w)}}}function jt(e){let t,n=e[32].type&&kt(e);return{c(){n&&n.c(),t=$()},m(e,r){n&&n.m(e,r),c(e,t,r)},p(e,r){e[32].type?n?n.p(e,r):(n=kt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&p(t)}}}function qt(e){let t,n,r=e[0].children,a=[];for(let t=0;t<r.length;t+=1)a[t]=Pt(gt(e,r,t));const s=e=>Y(a[e],1,1,()=>{a[e]=null});return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=$()},m(e,r){for(let t=0;t<a.length;t+=1)a[t].m(e,r);c(e,t,r),n=!0},p(e,n){if(147&n[0]){let l;for(r=e[0].children,l=0;l<r.length;l+=1){const s=gt(e,r,l);a[l]?(a[l].p(s,n),V(a[l],1)):(a[l]=Pt(s),a[l].c(),V(a[l],1),a[l].m(t.parentNode,t))}for(X(),l=r.length;l<a.length;l+=1)s(l);W()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)V(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Y(a[e]);n=!1},d(e){d(a,e),e&&p(t)}}}function Pt(e){let t,n;function r(...t){return e[31](e[34],...t)}var a=e[4][e[32].type];function s(e){return{props:{initdata:e[32],path:e[1]+"-"+e[32].id}}}if(a){var l=new a(s(e));l.$on("datachange",r)}return{c(){l&&ne(l.$$.fragment),t=$()},m(e,r){l&&re(l,e,r),c(e,t,r),n=!0},p(n,o){e=n;const u={};if(1&o[0]&&(u.initdata=e[32]),3&o[0]&&(u.path=e[1]+"-"+e[32].id),a!==(a=e[4][e[32].type])){if(l){X();const e=l;Y(e.$$.fragment,1,0,()=>{ae(e,1)}),W()}a?((l=new a(s(e))).$on("datachange",r),ne(l.$$.fragment),V(l.$$.fragment,1),re(l,t.parentNode,t)):l=null}else a&&l.$set(u)},i(e){n||(l&&V(l.$$.fragment,e),n=!0)},o(e){l&&Y(l.$$.fragment,e),n=!1},d(e){e&&p(t),l&&ae(l,e)}}}function St(e){let t,n,a,s,d,m,g,v,y,b,w,C,z,k,q,P,S,N,E,A,F,O,L,M,I,T,J,R,B,U,D,H,Q,Z,G,K,ee,te,ne,re,ae,se,le,oe,ue,ie,ce,pe,de;const fe=e[16].plan,me=l(fe,e,e[15],Ct),ge=e[16].dim,he=l(ge,e,e[15],bt),$e=e[16].default,_e=l($e,e,e[15],null),ve=e[16].tables,xe=l(ve,e,e[15],xt),ye=e[16].children,be=l(ye,e,e[15],_t);let we=e[0].children&&e[0].children.length&&zt(e),Ce=e[0].children&&e[0].children.length&&qt(e);return{c(){t=f("div"),n=f("ul"),a=f("li"),s=f("a"),s.textContent="Tout",d=h(),m=f("li"),g=f("a"),g.textContent="Plan",v=h(),y=f("li"),b=f("a"),b.textContent="Plan + Dimensions",w=h(),C=f("li"),z=f("a"),z.textContent="Dimensions",k=h(),q=f("li"),P=f("a"),P.textContent="Tableaux",S=h(),N=f("li"),E=f("a"),E.textContent="Sous-éléments",A=h(),F=f("div"),O=f("div"),me&&me.c(),L=h(),M=f("div"),he&&he.c(),I=h(),T=f("div"),_e&&_e.c(),J=h(),R=f("div"),xe&&xe.c(),B=h(),U=f("div"),be&&be.c(),D=h(),H=f("button"),H.textContent="Nouvelle porte",Q=h(),Z=f("button"),Z.textContent="Nouveau caisson",G=h(),K=f("button"),K.textContent="Nouvelle étagère",ee=h(),te=f("button"),te.textContent="Nouvelle façade",ne=h(),re=f("button"),re.textContent="Nouveau tiroir",ae=h(),se=f("button"),se.textContent="Nouveau sous-ensemble",le=h(),we&&we.c(),ie=h(),Ce&&Ce.c(),ce=$(),x(s,"href","@"),x(s,"class","svelte-6quuq"),j(s,"active","all"==e[2]),x(a,"class","svelte-6quuq"),x(g,"href","@"),x(g,"class","svelte-6quuq"),j(g,"active","plan"==e[2]),x(m,"class","svelte-6quuq"),x(b,"href","@"),x(b,"class","svelte-6quuq"),j(b,"active","plan-dim"==e[2]),x(y,"class","svelte-6quuq"),x(z,"href","@"),x(z,"class","svelte-6quuq"),j(z,"active","dim"==e[2]),x(C,"class","svelte-6quuq"),x(P,"href","@"),x(P,"class","svelte-6quuq"),j(P,"active","tables"==e[2]),x(q,"class","svelte-6quuq"),x(E,"href","@"),x(E,"class","svelte-6quuq"),j(E,"active","children"==e[2]),x(N,"class","svelte-6quuq"),x(n,"class","tabs svelte-6quuq"),x(O,"class","component-grid-plan svelte-6quuq"),x(M,"class","component-grid-dim svelte-6quuq"),x(T,"class","component-grid-main svelte-6quuq"),x(R,"class","component-grid-tables svelte-6quuq"),x(U,"class","component-grid-children svelte-6quuq"),x(F,"class","component-grid svelte-6quuq"),x(t,"class",oe="routable component layout-"+e[2]+" svelte-6quuq"),x(t,"id",ue="component-"+e[1]),j(t,"target",e[3])},m(l,o,u){c(l,t,o),i(t,n),i(n,a),i(a,s),i(n,d),i(n,m),i(m,g),i(n,v),i(n,y),i(y,b),i(n,w),i(n,C),i(C,z),i(n,k),i(n,q),i(q,P),i(n,S),i(n,N),i(N,E),i(t,A),i(t,F),i(F,O),me&&me.m(O,null),i(F,L),i(F,M),he&&he.m(M,null),i(F,I),i(F,T),_e&&_e.m(T,null),i(F,J),i(F,R),xe&&xe.m(R,null),i(F,B),i(F,U),be&&be.m(U,null),i(U,D),i(U,H),i(U,Q),i(U,Z),i(U,G),i(U,K),i(U,ee),i(U,te),i(U,ne),i(U,re),i(U,ae),i(U,se),i(U,le),we&&we.m(U,null),c(l,ie,o),Ce&&Ce.m(l,o),c(l,ce,o),pe=!0,u&&r(de),de=[_(s,"click",e[17]),_(g,"click",e[18]),_(b,"click",e[19]),_(z,"click",e[20]),_(P,"click",e[21]),_(E,"click",e[22]),_(H,"click",e[23]),_(Z,"click",e[24]),_(K,"click",e[25]),_(te,"click",e[26]),_(re,"click",e[27]),_(se,"click",e[28])]},p(e,n){4&n[0]&&j(s,"active","all"==e[2]),4&n[0]&&j(g,"active","plan"==e[2]),4&n[0]&&j(b,"active","plan-dim"==e[2]),4&n[0]&&j(z,"active","dim"==e[2]),4&n[0]&&j(P,"active","tables"==e[2]),4&n[0]&&j(E,"active","children"==e[2]),me&&me.p&&32768&n[0]&&me.p(o(fe,e,e[15],Ct),u(fe,e[15],n,wt)),he&&he.p&&32768&n[0]&&he.p(o(ge,e,e[15],bt),u(ge,e[15],n,yt)),_e&&_e.p&&32768&n[0]&&_e.p(o($e,e,e[15],null),u($e,e[15],n,null)),xe&&xe.p&&32768&n[0]&&xe.p(o(ve,e,e[15],xt),u(ve,e[15],n,vt)),be&&be.p&&32768&n[0]&&be.p(o(ye,e,e[15],_t),u(ye,e[15],n,$t)),e[0].children&&e[0].children.length?we?we.p(e,n):(we=zt(e),we.c(),we.m(U,null)):we&&(we.d(1),we=null),(!pe||4&n[0]&&oe!==(oe="routable component layout-"+e[2]+" svelte-6quuq"))&&x(t,"class",oe),(!pe||2&n[0]&&ue!==(ue="component-"+e[1]))&&x(t,"id",ue),12&n[0]&&j(t,"target",e[3]),e[0].children&&e[0].children.length?Ce?(Ce.p(e,n),1&n[0]&&V(Ce,1)):(Ce=qt(e),Ce.c(),V(Ce,1),Ce.m(ce.parentNode,ce)):Ce&&(X(),Y(Ce,1,1,()=>{Ce=null}),W())},i(e){pe||(V(me,e),V(he,e),V(_e,e),V(xe,e),V(be,e),V(Ce),pe=!0)},o(e){Y(me,e),Y(he,e),Y(_e,e),Y(xe,e),Y(be,e),Y(Ce),pe=!1},d(e){e&&p(t),me&&me.d(e),he&&he.d(e),_e&&_e.d(e),xe&&xe.d(e),be&&be.d(e),we&&we.d(),e&&p(ie),Ce&&Ce.d(e),e&&p(ce),r(de)}}}function Nt(e,t,n){const r=N();let a=A("App-components"),s="all";A("settings").subscribe(e=>{n(2,s=e.component_layout)});let{data:l}=t,{state:o={}}=t,{childrenState:u=[]}=t,{children:i=l.children||[]}=t,{path:c=`${A("Component-path")}-${l.id}`}=t;function p(e,t){r("datachange",{state:e,data:t})}function d(e){let t=prompt(`Renommer "${i[e].name}" en :`,i[e].name)||i[e].name;n(11,i[e].name=t,i)}function f(e){if(!confirm(`Supprimer ${i[e].name} ?`))return;let t=[...i];t.splice(e,1),console.log("delete",e,i,t),n(11,i=t)}function m(e,t){e.detail.data&&n(11,i[t]=e.detail.data,i),e.detail.state&&n(10,u[t]=e.detail.state,u)}E("Component-path",c),r("datachange",{data:l,state:o});let g=!1;function h(e,t){e&&e.preventDefault(),n(2,s=t),A("settings").update(e=>({...e,component_layout:s}))}function $(e){let t=fe(i),r=prompt("Nom du sous-ensemble :",`${c}-${t}`)||`${c}-${t}`;n(11,i=[...i,{type:e,name:r,id:t}])}ce(e=>{n(3,g=e.component_path==c)});let{$$slots:_={},$$scope:v}=t;return e.$set=e=>{"data"in e&&n(0,l=e.data),"state"in e&&n(12,o=e.state),"childrenState"in e&&n(10,u=e.childrenState),"children"in e&&n(11,i=e.children),"path"in e&&n(1,c=e.path),"$$scope"in e&&n(15,v=e.$$scope)},e.$$.update=()=>{4097&e.$$.dirty[0]&&p(o,l)},[l,c,s,g,a,d,f,m,h,$,u,i,o,r,p,v,_,e=>h(e,"all"),e=>h(e,"plan"),e=>h(e,"plan-dim"),e=>h(e,"dim"),e=>h(e,"tables"),e=>h(e,"children"),e=>$("Porte"),e=>$("Caisson"),e=>$("Etagere"),e=>$("Facade"),e=>$("Tiroir"),e=>$("Ensemble"),(e,t)=>d(e),(e,t)=>f(e),(e,t)=>m(t,e)]}class Et extends oe{constructor(e){super(),le(this,e,Nt,St,s,{data:0,state:12,childrenState:10,children:11,path:1},[-1,-1])}}function At(e,t,n){const r=e.slice();return r[13]=t[n],r[15]=n,r}function Ft(e){let t,n,r,a,s,l,o,u,m,g,$,_,v,x,y,b,w=e[4]&&Ot(),z=e[2],k=[];for(let t=0;t<z.length;t+=1)k[t]=It(At(e,z,t));const j=e=>Y(k[e],1,1,()=>{k[e]=null});return{c(){t=f("table"),n=f("tr"),r=f("th"),r.textContent="Éléments",a=h(),s=f("th"),s.textContent="dimensions (L x h x p)",l=h(),w&&w.c(),o=h(),u=f("th"),u.textContent="de la gauche",m=h(),g=f("th"),g.textContent="du bas",$=h(),_=f("th"),_.textContent="du mur",v=h(),x=f("td"),y=h();for(let e=0;e<k.length;e+=1)k[e].c();C(r,"text-align","left"),C(s,"text-align","right"),C(u,"text-align","right"),C(g,"text-align","right"),C(_,"text-align","right")},m(e,p){c(e,t,p),i(t,n),i(n,r),i(n,a),i(n,s),i(n,l),w&&w.m(n,null),i(n,o),i(n,u),i(n,m),i(n,g),i(n,$),i(n,_),i(n,v),i(n,x),i(t,y);for(let e=0;e<k.length;e+=1)k[e].m(t,null);b=!0},p(e,r){if(e[4]?w||(w=Ot(),w.c(),w.m(n,o)):w&&(w.d(1),w=null),31&r){let n;for(z=e[2],n=0;n<z.length;n+=1){const a=At(e,z,n);k[n]?(k[n].p(a,r),V(k[n],1)):(k[n]=It(a),k[n].c(),V(k[n],1),k[n].m(t,null))}for(X(),n=z.length;n<k.length;n+=1)j(n);W()}},i(e){if(!b){for(let e=0;e<z.length;e+=1)V(k[e]);b=!0}},o(e){k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)Y(k[e]);b=!1},d(e){e&&p(t),w&&w.d(),d(k,e)}}}function Ot(e){let t;return{c(){t=f("th"),t.textContent="n° dessin",C(t,"text-align","right"),x(t,"colspan","2")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function Lt(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,y,w,z,k,j,q,P,S,N,E,A,F,O=e[13].type+"",M=e[13].name+"",I=(e[0][e[15]]||{}).largeur+"",T=(e[0][e[15]]||{}).hauteur+"",J=(e[0][e[15]]||{}).profondeur+"",R=e[4]&&Mt(e);function U(t){e[10].call(null,t,e[15])}let D={def:(e[3][e[15]]||{}).x||0};void 0!==e[1][e[15]].x&&(D.value=e[1][e[15]].x);const H=new he({props:D});function Q(t){e[11].call(null,t,e[15])}L.push(()=>te(H,"value",U));let Z={def:(e[3][e[15]]||{}).y||0};void 0!==e[1][e[15]].y&&(Z.value=e[1][e[15]].y);const G=new he({props:Z});function K(t){e[12].call(null,t,e[15])}L.push(()=>te(G,"value",Q));let ee={def:(e[3][e[15]]||{}).z||0};void 0!==e[1][e[15]].z&&(ee.value=e[1][e[15]].z);const se=new he({props:ee});return L.push(()=>te(se,"value",K)),{c(){t=f("tr"),n=f("td"),r=g(O),a=h(),s=g(M),l=h(),o=f("td"),u=g(I),d=g("x"),m=g(T),$=g("x"),_=g(J),v=h(),R&&R.c(),x=h(),y=f("td"),ne(H.$$.fragment),z=h(),k=f("td"),ne(G.$$.fragment),q=h(),P=f("td"),ne(se.$$.fragment),N=h(),E=f("td"),E.textContent="mm",A=h(),C(o,"text-align","right")},m(e,p){c(e,t,p),i(t,n),i(n,r),i(n,a),i(n,s),i(t,l),i(t,o),i(o,u),i(o,d),i(o,m),i(o,$),i(o,_),i(t,v),R&&R.m(t,null),i(t,x),i(t,y),re(H,y,null),i(t,z),i(t,k),re(G,k,null),i(t,q),i(t,P),re(se,P,null),i(t,N),i(t,E),i(t,A),F=!0},p(n,a){e=n,(!F||4&a)&&O!==(O=e[13].type+"")&&b(r,O),(!F||4&a)&&M!==(M=e[13].name+"")&&b(s,M),(!F||1&a)&&I!==(I=(e[0][e[15]]||{}).largeur+"")&&b(u,I),(!F||1&a)&&T!==(T=(e[0][e[15]]||{}).hauteur+"")&&b(m,T),(!F||1&a)&&J!==(J=(e[0][e[15]]||{}).profondeur+"")&&b(_,J),e[4]?R?(R.p(e,a),16&a&&V(R,1)):(R=Mt(e),R.c(),V(R,1),R.m(t,x)):R&&(X(),Y(R,1,1,()=>{R=null}),W());const l={};8&a&&(l.def=(e[3][e[15]]||{}).x||0),!w&&2&a&&(w=!0,l.value=e[1][e[15]].x,B(()=>w=!1)),H.$set(l);const o={};8&a&&(o.def=(e[3][e[15]]||{}).y||0),!j&&2&a&&(j=!0,o.value=e[1][e[15]].y,B(()=>j=!1)),G.$set(o);const i={};8&a&&(i.def=(e[3][e[15]]||{}).z||0),!S&&2&a&&(S=!0,i.value=e[1][e[15]].z,B(()=>S=!1)),se.$set(i)},i(e){F||(V(R),V(H.$$.fragment,e),V(G.$$.fragment,e),V(se.$$.fragment,e),F=!0)},o(e){Y(R),Y(H.$$.fragment,e),Y(G.$$.fragment,e),Y(se.$$.fragment,e),F=!1},d(e){e&&p(t),R&&R.d(),ae(H),ae(G),ae(se)}}}function Mt(e){let t,n,r,a,s,l;function o(t){e[8].call(null,t,e[15])}let u={tristate:!1};void 0!==e[1][e[15]].show&&(u.checked=e[1][e[15]].show);const i=new be({props:u});function d(t){e[9].call(null,t,e[15])}L.push(()=>te(i,"checked",o));let m={def:(e[3][e[15]]||{}).d||1,min:1};void 0!==e[1][e[15]].d&&(m.value=e[1][e[15]].d);const g=new he({props:m});return L.push(()=>te(g,"value",d)),{c(){t=f("td"),ne(i.$$.fragment),r=h(),a=f("td"),ne(g.$$.fragment)},m(e,n){c(e,t,n),re(i,t,null),c(e,r,n),c(e,a,n),re(g,a,null),l=!0},p(t,r){e=t;const a={};!n&&2&r&&(n=!0,a.checked=e[1][e[15]].show,B(()=>n=!1)),i.$set(a);const l={};8&r&&(l.def=(e[3][e[15]]||{}).d||1),!s&&2&r&&(s=!0,l.value=e[1][e[15]].d,B(()=>s=!1)),g.$set(l)},i(e){l||(V(i.$$.fragment,e),V(g.$$.fragment,e),l=!0)},o(e){Y(i.$$.fragment,e),Y(g.$$.fragment,e),l=!1},d(e){e&&p(t),ae(i),e&&p(r),e&&p(a),ae(g)}}}function It(e){let t,n,r=e[13].type&&Lt(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[13].type?r?(r.p(e,n),4&n&&V(r,1)):(r=Lt(e),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(X(),Y(r,1,1,()=>{r=null}),W())},i(e){n||(V(r),n=!0)},o(e){Y(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Tt(e){let t,n,r=e[2].length>0&&Ft(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,[n]){e[2].length>0?r?(r.p(e,n),4&n&&V(r,1)):(r=Ft(e),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(X(),Y(r,1,1,()=>{r=null}),W())},i(e){n||(V(r),n=!0)},o(e){Y(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Jt(e,t,n){let{children:r=[]}=t,{childrenState:a=[]}=t,{pieces:s=[]}=t,{pieces_drawings:l=[]}=t,{childrenPos:o}=t,{defaultChildrenPos:u=[]}=t,{drawings:i=!1}=t;function c(e){return console.log("resize childrenPos"),e.map((e,t)=>pe(o[t]||{}))}return e.$set=e=>{"children"in e&&n(2,r=e.children),"childrenState"in e&&n(6,a=e.childrenState),"pieces"in e&&n(0,s=e.pieces),"pieces_drawings"in e&&n(5,l=e.pieces_drawings),"childrenPos"in e&&n(1,o=e.childrenPos),"defaultChildrenPos"in e&&n(3,u=e.defaultChildrenPos),"drawings"in e&&n(4,i=e.drawings)},e.$$.update=()=>{4&e.$$.dirty&&console.log("ChildrenPositions children = ",r),64&e.$$.dirty&&console.log("ChildrenPositions childrenState = ",a),4&e.$$.dirty&&n(1,o=c(r)),78&e.$$.dirty&&n(0,s=r.map((e,t)=>{const n=a[t]||{};return n.pieces_group||new mt(n.pieces||[],`${e.type} ${e.name}`,e.type)}).map((e,t)=>{let{x:n,y:r,z:a}={x:0,y:0,z:0,...u[t]||{},...pe(o[t]||{})};return e.position(n,r,a)})),1&e.$$.dirty&&console.log("ChildrenPositions pieces = ",s),11&e.$$.dirty&&n(5,l=s.reduce((e,t,n)=>{let r={d:1,show:!0,...u[n]||{},...pe(o[n]||{})},a=r.d||1;return r.show&&(e[a-1]=[...e[a-1]||[],t]),e},[])),32&e.$$.dirty&&console.log("ChildrenPositions pieces_drawings = ",l),2&e.$$.dirty&&console.log("ChildrenPositions childrenPos = ",JSON.stringify(o,null,2)),8&e.$$.dirty&&console.log("ChildrenPositions defaultChildrenPos = ",u),16&e.$$.dirty&&console.log("ChildrenPositions drawings = ",i)},[s,o,r,u,i,l,a,c,function(e,t){o[t].show=e,n(1,o),n(2,r)},function(e,t){o[t].d=e,n(1,o),n(2,r)},function(e,t){o[t].x=e,n(1,o),n(2,r)},function(e,t){o[t].y=e,n(1,o),n(2,r)},function(e,t){o[t].z=e,n(1,o),n(2,r)}]}class Rt extends oe{constructor(e){super(),le(this,e,Jt,Tt,s,{children:2,childrenState:6,pieces:0,pieces_drawings:5,childrenPos:1,defaultChildrenPos:3,drawings:4})}}function Bt(e,t){let n={},r=t.flat_groups("",!1).map(t=>function(e,t,n){let r=t.component_type,a=(e.postes_estimations||[]).filter(e=>e.components[r]).map(e=>({...e,type:r,...Ut(e,t,n,r)})).map(e=>({computed:e.value*e.base_value,...e})).filter(e=>0!=e.computed),s=a.reduce((e,t)=>e+t.computed,0);return{type:r,name:t.name,postes:a,total:s}}(e,t,n)),a=r.reduce((e,t)=>e+t.total,0);return{components:r,total:a}}function Ut(e,t,n,r){switch(e.indice){case"m2_ep0_20":return{base_value:t.pieces.filter(e=>e.epaisseur<=20).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_ep20_plus":return{base_value:t.pieces.filter(e=>e.epaisseur>20).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_panneau":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_panneau_seul":return{base_value:t.pieces.filter(e=>e.features.includes("panneau-seul")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_panneau_tous":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")||e.features.includes("panneau-seul")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_trav_mont_ncp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_trav_mont_cp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse-cp")||e.features.includes("montant-cp")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_trav_mont":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")||e.features.includes("traverse-cp")||e.features.includes("montant-cp")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_cote":return{base_value:t.pieces.filter(e=>e.features.includes("cote")).reduce((e,t)=>e+t.surface(),0),base_unit:"m²"};case"m2_plateau":return{base_value:t.surface(),base_unit:"m²"};case"nb_ep0_20":return{base_value:t.pieces.filter(e=>e.epaisseur<=20).length,base_unit:"pièces"};case"nb_ep20_plus":return{base_value:t.pieces.filter(e=>e.epaisseur>20).length,base_unit:"pièces"};case"nb_panneau":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")).length,base_unit:"panneaux"};case"nb_panneau_seul":return{base_value:t.pieces.filter(e=>e.features.includes("panneau-seul")).length,base_unit:"panneaux"};case"nb_panneau_tous":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")||e.features.includes("panneau-seul")).length,base_unit:"panneaux"};case"nb_trav_mont_ncp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")).length,base_unit:"pièces"};case"nb_trav_mont_cp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse-cp")||e.features.includes("montant-cp")).length,base_unit:"pièces"};case"nb_trav_mont":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")||e.features.includes("traverse-cp")||e.features.includes("montant-cp")).length,base_unit:"pièces"};case"nb_cote":return{base_value:t.pieces.filter(e=>e.features.includes("cote")).length,base_unit:"côté"};case"nb_plateau":return{base_value:t.pieces.length,base_unit:"pièces"};case"tenon":return{base_value:t.nombre_tenons,base_unit:"tenons"};case"constant":let a=`${r}/${e.name}`,s=n[a]?0:1;return n[a]=!0,{base_value:s,base_unit:"fois"};case"per_component":return{base_value:1,base_unit:r};case"per_ferrage_charniere":return{base_value:t.features.includes("ferrage-charniere")?1:0,base_unit:r};default:return{base_value:0,base_unit:""}}}function Dt(e,t,n){const r=e.slice();return r[8]=t[n],r}function Ht(e,t,n){const r=e.slice();return r[5]=t[n],r}function Qt(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,y,w,C,z,k=e[8].name+"",j=e[8].base_value.toFixed(4)+"",q=e[8].base_unit+"",P=Xt(e[8].value,e[2])+"",S=e[8].base_unit+"",N=Xt(e[8].computed,e[2])+"";return{c(){t=f("tr"),n=f("td"),r=h(),a=f("td"),s=g(k),l=h(),o=f("td"),u=g(j),d=h(),m=g(q),$=h(),_=f("td"),v=g(P),x=g(" / "),y=g(S),w=h(),C=f("td"),z=g(N)},m(e,p){c(e,t,p),i(t,n),i(t,r),i(t,a),i(a,s),i(t,l),i(t,o),i(o,u),i(o,d),i(o,m),i(t,$),i(t,_),i(_,v),i(_,x),i(_,y),i(t,w),i(t,C),i(C,z)},p(e,t){1&t&&k!==(k=e[8].name+"")&&b(s,k),1&t&&j!==(j=e[8].base_value.toFixed(4)+"")&&b(u,j),1&t&&q!==(q=e[8].base_unit+"")&&b(m,q),5&t&&P!==(P=Xt(e[8].value,e[2])+"")&&b(v,P),1&t&&S!==(S=e[8].base_unit+"")&&b(y,S),5&t&&N!==(N=Xt(e[8].computed,e[2])+"")&&b(z,N)},d(e){e&&p(t)}}}function Zt(e){let t,n,r,a,s,l,o,u,m,_,v,y,w=e[5].type+"",C=e[5].name+"",z=Xt(e[5].total,e[2])+"",k=e[5].postes,j=[];for(let t=0;t<k.length;t+=1)j[t]=Qt(Dt(e,k,t));return{c(){t=f("tr"),n=f("th"),r=g(w),a=h(),s=f("th"),l=g(C),o=h(),u=f("td"),m=f("em"),_=g(z),v=h();for(let e=0;e<j.length;e+=1)j[e].c();y=$(),x(s,"colspan","3")},m(e,p){c(e,t,p),i(t,n),i(n,r),i(t,a),i(t,s),i(s,l),i(t,o),i(t,u),i(u,m),i(m,_),c(e,v,p);for(let t=0;t<j.length;t+=1)j[t].m(e,p);c(e,y,p)},p(e,t){if(1&t&&w!==(w=e[5].type+"")&&b(r,w),1&t&&C!==(C=e[5].name+"")&&b(l,C),5&t&&z!==(z=Xt(e[5].total,e[2])+"")&&b(_,z),5&t){let n;for(k=e[5].postes,n=0;n<k.length;n+=1){const r=Dt(e,k,n);j[n]?j[n].p(r,t):(j[n]=Qt(r),j[n].c(),j[n].m(y.parentNode,y))}for(;n<j.length;n+=1)j[n].d(1);j.length=k.length}},d(e){e&&p(t),e&&p(v),d(j,e),e&&p(y)}}}function Gt(t){let n,r,a,s,l,o,u,m,$,v,y,w,z,k,j,q,P,S=t[1].name+"",N=Xt(t[0].total,t[2])+"",E=t[0].components,A=[];for(let e=0;e<E.length;e+=1)A[e]=Zt(Ht(t,E,e));return{c(){n=f("table"),r=f("caption"),a=g("Estimations pour "),s=g(S),l=g(" (afficher "),o=f("label"),u=f("input"),m=g(" les minutes seulement"),$=g(")"),v=h();for(let e=0;e<A.length;e+=1)A[e].c();y=h(),w=f("tr"),z=f("th"),z.textContent="Total",k=h(),j=f("td"),q=g(N),x(u,"type","checkbox"),C(o,"display","inline"),x(z,"colspan","4"),x(n,"class","large styled")},m(e,p,d){c(e,n,p),i(n,r),i(r,a),i(r,s),i(r,l),i(r,o),i(o,u),u.checked=t[2],i(o,m),i(r,$),i(n,v);for(let e=0;e<A.length;e+=1)A[e].m(n,null);i(n,y),i(n,w),i(w,z),i(w,k),i(w,j),i(j,q),d&&P(),P=_(u,"change",t[4])},p(e,[t]){if(2&t&&S!==(S=e[1].name+"")&&b(s,S),4&t&&(u.checked=e[2]),5&t){let r;for(E=e[0].components,r=0;r<E.length;r+=1){const a=Ht(e,E,r);A[r]?A[r].p(a,t):(A[r]=Zt(a),A[r].c(),A[r].m(n,y))}for(;r<A.length;r+=1)A[r].d(1);A.length=E.length}5&t&&N!==(N=Xt(e[0].total,e[2])+"")&&b(q,N)},i:e,o:e,d(e){e&&p(n),d(A,e),P()}}}function Xt(e,t){if(t)return e.toFixed()+" min";{let t=e%60;return`${((e-t)/60).toFixed()} h ${t.toFixed()} min`}}function Wt(e,t,n){let r,{pieces:a}=t,{estimations:s}=t,l=!1;return A("settings").subscribe(e=>{n(3,r=e)}),e.$set=e=>{"pieces"in e&&n(1,a=e.pieces),"estimations"in e&&n(0,s=e.estimations)},e.$$.update=()=>{10&e.$$.dirty&&n(0,s=Bt(r,a))},[s,a,l,r,function(){l=this.checked,n(2,l)}]}class Vt extends oe{constructor(e){super(),le(this,e,Wt,Gt,s,{pieces:1,estimations:0})}}function Yt(e,t,n){const r=e.slice();return r[27]=t[n],r[29]=n,r}function Kt(e,t,n){const r=e.slice();return r[24]=t[n],r}function en(e,t,n){const r=e.slice();return r[33]=t[n],r}function tn(e,t,n){const r=e.slice();return r[30]=t[n],r}function nn(e,t,n){const r=e.slice();return r[33]=t[n],r}function rn(e,t,n){const r=e.slice();return r[33]=t[n],r}function an(e){let t,n=e[12],r=[];for(let t=0;t<n.length;t+=1)r[t]=sn(rn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(4096&a[0]){let s;for(n=e[12],s=0;s<n.length;s+=1){const l=rn(e,n,s);r[s]?r[s].p(l,a):(r[s]=sn(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function sn(e){let t,n,r,a=e[33]+"";return{c(){t=f("th"),n=g("Pièces ép="),r=g(a),x(t,"colspan","2")},m(e,a){c(e,t,a),i(t,n),i(t,r)},p(e,t){4096&t[0]&&a!==(a=e[33]+"")&&b(r,a)},d(e){e&&p(t)}}}function ln(e){let t;return{c(){t=f("th"),t.textContent="Panneaux",x(t,"colspan","2")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function on(e){let t,n,r=e[4]&&un(e),a=e[5]&&pn();return{c(){t=f("tr"),r&&r.c(),n=h(),a&&a.c()},m(e,s){c(e,t,s),r&&r.m(t,null),i(t,n),a&&a.m(t,null)},p(e,s){e[4]?r?r.p(e,s):(r=un(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[5]?a||(a=pn(),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&p(t),r&&r.d(),a&&a.d()}}}function un(e){let t,n=e[12],r=[];for(let t=0;t<n.length;t+=1)r[t]=cn(nn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(4096&a[0]){const a=n.length;let s;for(n=e[12],s=a;s<n.length;s+=1){nn(e,n,s);r[s]||(r[s]=cn(),r[s].c(),r[s].m(t.parentNode,t))}for(s=n.length;s<a;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function cn(e){let t,n,r;return{c(){t=f("th"),t.textContent="Nbre",n=h(),r=f("th"),r.textContent="m²"},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function pn(e){let t,n,r;return{c(){t=f("th"),t.textContent="Nbre",n=h(),r=f("th"),r.textContent="m²"},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function dn(e){let t,n=e[12],r=[];for(let t=0;t<n.length;t+=1)r[t]=fn(en(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(4352&a[0]){let s;for(n=e[12],s=0;s<n.length;s+=1){const l=en(e,n,s);r[s]?r[s].p(l,a):(r[s]=fn(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function fn(e){let t,n,r,a,s,l=((e[30].epaisseurs.find(u)||{}).nb_pieces||0)+"",o=((e[30].epaisseurs.find(d)||{}).surface||0).toFixed(6)+"";function u(...t){return e[18](e[33],...t)}function d(...t){return e[19](e[33],...t)}return{c(){t=f("td"),n=g(l),r=h(),a=f("td"),s=g(o)},m(e,l){c(e,t,l),i(t,n),c(e,r,l),c(e,a,l),i(a,s)},p(t,r){e=t,4352&r[0]&&l!==(l=((e[30].epaisseurs.find(u)||{}).nb_pieces||0)+"")&&b(n,l),4352&r[0]&&o!==(o=((e[30].epaisseurs.find(d)||{}).surface||0).toFixed(6)+"")&&b(s,o)},d(e){e&&p(t),e&&p(r),e&&p(a)}}}function mn(e){let t,n,r,a,s,l=e[30].nb_panneaux+"",o=e[30].m2_panneaux.toFixed(6)+"";return{c(){t=f("td"),n=g(l),r=h(),a=f("td"),s=g(o)},m(e,l){c(e,t,l),i(t,n),c(e,r,l),c(e,a,l),i(a,s)},p(e,t){256&t[0]&&l!==(l=e[30].nb_panneaux+"")&&b(n,l),256&t[0]&&o!==(o=e[30].m2_panneaux.toFixed(6)+"")&&b(s,o)},d(e){e&&p(t),e&&p(r),e&&p(a)}}}function gn(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,y,w,C,z,k,j,q,P,S=e[30].name+"",N=e[30].dimension_x+"",E=e[30].dimension_y+"",A=e[30].dimension_z+"",F=e[30].nb_pieces+"",O=e[30].nb_tenons+"",L=e[30].surface.toFixed(6)+"",M=e[4]&&dn(e),I=e[5]&&mn(e);return{c(){t=f("tr"),n=f("td"),r=g(S),a=h(),s=f("td"),l=g(N),o=g(" x "),u=g(E),d=g(" x "),m=g(A),$=h(),_=f("td"),v=g(F),x=h(),y=f("td"),w=g(O),C=h(),z=f("td"),k=g(L),j=h(),M&&M.c(),q=h(),I&&I.c(),P=h()},m(e,p){c(e,t,p),i(t,n),i(n,r),i(t,a),i(t,s),i(s,l),i(s,o),i(s,u),i(s,d),i(s,m),i(t,$),i(t,_),i(_,v),i(t,x),i(t,y),i(y,w),i(t,C),i(t,z),i(z,k),i(t,j),M&&M.m(t,null),i(t,q),I&&I.m(t,null),i(t,P)},p(e,n){256&n[0]&&S!==(S=e[30].name+"")&&b(r,S),256&n[0]&&N!==(N=e[30].dimension_x+"")&&b(l,N),256&n[0]&&E!==(E=e[30].dimension_y+"")&&b(u,E),256&n[0]&&A!==(A=e[30].dimension_z+"")&&b(m,A),256&n[0]&&F!==(F=e[30].nb_pieces+"")&&b(v,F),256&n[0]&&O!==(O=e[30].nb_tenons+"")&&b(w,O),256&n[0]&&L!==(L=e[30].surface.toFixed(6)+"")&&b(k,L),e[4]?M?M.p(e,n):(M=dn(e),M.c(),M.m(t,q)):M&&(M.d(1),M=null),e[5]?I?I.p(e,n):(I=mn(e),I.c(),I.m(t,P)):I&&(I.d(1),I=null)},d(e){e&&p(t),M&&M.d(),I&&I.d()}}}function hn(e){let t,n=e[24].name+"";return{c(){t=g(n)},m(e,n){c(e,t,n)},p(e,r){512&r[0]&&n!==(n=e[24].name+"")&&b(t,n)},d(e){e&&p(t)}}}function $n(e){let t,n=e[24].name_list,r=[];for(let t=0;t<n.length;t+=1)r[t]=_n(Yt(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(512&a[0]){let s;for(n=e[24].name_list,s=0;s<n.length;s+=1){const l=Yt(e,n,s);r[s]?r[s].p(l,a):(r[s]=_n(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function _n(e){let t,n,r=e[27]+"",a=0!=e[29]&&function(e){let t;return{c(){t=f("br")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}();return{c(){a&&a.c(),t=h(),n=g(r)},m(e,r){a&&a.m(e,r),c(e,t,r),c(e,n,r)},p(e,t){512&t[0]&&r!==(r=e[27]+"")&&b(n,r)},d(e){a&&a.d(e),e&&p(t),e&&p(n)}}}function vn(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,y,w,C,z,k,j,q,P,S,N=(e[24].que||1)+"",E=e[24].string_dimentions()+"",A=e[24].string_arrasement()+"",F=e[24].largeur*e[24].longueur/1e6+"",O=e[24].epaisseur_plateau+"",L=e[24].que*e[24].cubage(e[7]/100).toFixed(9)+"",M=e[24].que*e[24].prix(e[6],e[7]/100).toFixed(2)+"";function I(e,t){return e[2]?$n:hn}let T=I(e),J=T(e);return{c(){t=f("tr"),n=f("td"),J.c(),r=h(),a=f("td"),s=g(N),l=h(),o=f("td"),u=g(E),d=h(),m=f("td"),$=g(A),_=h(),v=f("td"),x=g(F),y=h(),w=f("td"),C=g(O),z=h(),k=f("td"),j=g(L),q=h(),P=f("td"),S=g(M)},m(e,p){c(e,t,p),i(t,n),J.m(n,null),i(t,r),i(t,a),i(a,s),i(t,l),i(t,o),i(o,u),i(t,d),i(t,m),i(m,$),i(t,_),i(t,v),i(v,x),i(t,y),i(t,w),i(w,C),i(t,z),i(t,k),i(k,j),i(t,q),i(t,P),i(P,S)},p(e,t){T===(T=I(e))&&J?J.p(e,t):(J.d(1),J=T(e),J&&(J.c(),J.m(n,null))),512&t[0]&&N!==(N=(e[24].que||1)+"")&&b(s,N),512&t[0]&&E!==(E=e[24].string_dimentions()+"")&&b(u,E),512&t[0]&&A!==(A=e[24].string_arrasement()+"")&&b($,A),512&t[0]&&F!==(F=e[24].largeur*e[24].longueur/1e6+"")&&b(x,F),512&t[0]&&O!==(O=e[24].epaisseur_plateau+"")&&b(C,O),640&t[0]&&L!==(L=e[24].que*e[24].cubage(e[7]/100).toFixed(9)+"")&&b(j,L),704&t[0]&&M!==(M=e[24].que*e[24].prix(e[6],e[7]/100).toFixed(2)+"")&&b(S,M)},d(e){e&&p(t),J.d()}}}function xn(e){let t,n,a,s,l,o,u,m,$,v,z,k,j,q,P,S,N,E,A,F,O,M,I,T,J,R,U,D,H,Q,Z,G,X,W,K,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,ge,he,$e,_e,ve,xe,ye,be,we,Ce,ze,ke,je,qe,Pe,Se,Ne,Ee,Ae,Fe,Oe,Le,Me,Ie,Te,Je,Re,Be,Ue,De,He,Qe,Ze,Ge,Xe,We,Ve,Ye,Ke,et,tt,nt,rt,at,st,lt,ot,ut,it,ct,pt,dt,ft,mt,gt,ht,$t,_t=e[1].name+"",vt=e[10].toFixed(9)+"",xt=e[11].toFixed(2)+"",yt=e[4]&&an(e),bt=e[5]&&ln(),wt=(e[4]||e[5])&&on(e),Ct=e[8],zt=[];for(let t=0;t<Ct.length;t+=1)zt[t]=gn(tn(e,Ct,t));let kt=e[9],jt=[];for(let t=0;t<kt.length;t+=1)jt[t]=vn(Kt(e,kt,t));function qt(t){e[23].call(null,t)}let Pt={pieces:e[1]};void 0!==e[0]&&(Pt.estimations=e[0]);const St=new Vt({props:Pt});return L.push(()=>te(St,"estimations",qt)),{c(){t=f("table"),n=f("caption"),a=g("Statistiques pour "),s=g(_t),l=g(" (afficher "),o=f("label"),u=f("input"),m=g(" totaux"),$=g(", "),v=f("label"),z=f("input"),k=g(" par épaisseur"),j=g(", "),q=f("label"),P=f("input"),S=g(" par type"),N=g(")"),E=h(),A=f("tr"),F=f("th"),O=g("Ensemble"),I=h(),T=f("th"),J=g("Dimensions"),U=h(),D=f("th"),H=g("Nombre de pièces"),Z=h(),G=f("th"),X=g("Nombre de tenons"),K=h(),ee=f("th"),se=g("Surface des pièces"),oe=h(),yt&&yt.c(),ue=h(),bt&&bt.c(),ie=h(),wt&&wt.c(),ce=h();for(let e=0;e<zt.length;e+=1)zt[e].c();pe=h(),de=f("hr"),fe=h(),me=f("table"),ge=f("caption"),ge.textContent="Liste de débit",he=h(),$e=f("tr"),_e=f("th"),ve=g("Pièce ("),xe=f("label"),ye=f("input"),be=g(" séparer"),we=g(")"),Ce=h(),ze=f("th"),ze.textContent="Qué",ke=h(),je=f("th"),je.textContent="L x l x e",qe=h(),Pe=f("th"),Pe.textContent="Arrasement",Se=h(),Ne=f("th"),Ne.textContent="Surface (m²)",Ee=h(),Ae=f("th"),Ae.textContent="epaisseur plateau (mm)",Fe=h(),Oe=f("th"),Le=g("Cubage"),Me=f("br"),Ie=g("(x"),Te=f("input"),Je=g("%)"),Re=h(),Be=f("th"),Ue=g("Prix au m³"),De=f("br"),He=f("input"),Qe=h();for(let e=0;e<jt.length;e+=1)jt[e].c();Ze=h(),Ge=f("tr"),Xe=f("td"),Xe.textContent="Total",We=h(),Ve=f("td"),Ye=h(),Ke=f("td"),et=h(),tt=f("td"),nt=h(),rt=f("td"),at=h(),st=f("td"),lt=h(),ot=f("td"),ut=g(vt),it=h(),ct=f("td"),pt=g(xt),dt=h(),ft=f("hr"),mt=h(),ne(St.$$.fragment),x(u,"type","checkbox"),C(o,"display","inline"),x(z,"type","checkbox"),C(v,"display","inline"),x(P,"type","checkbox"),C(q,"display","inline"),x(F,"rowspan",M=e[4]||e[5]?2:1),x(T,"rowspan",R=e[4]||e[5]?2:1),x(D,"rowspan",Q=e[4]||e[5]?2:1),x(G,"rowspan",W=e[4]||e[5]?2:1),x(ee,"rowspan",le=e[4]||e[5]?2:1),x(t,"class","large styled"),x(ye,"type","checkbox"),C(xe,"display","inline"),x(Te,"type","number"),x(Te,"size","3"),x(Te,"min","100"),x(Te,"step","5"),x(Te,"class","svelte-fy3499"),x(He,"type","number"),x(He,"size","5"),x(He,"step","10"),x(He,"class","svelte-fy3499"),x(me,"class","large styled")},m(p,d,f){c(p,t,d),i(t,n),i(n,a),i(n,s),i(n,l),i(n,o),i(o,u),u.checked=e[3],i(o,m),i(n,$),i(n,v),i(v,z),z.checked=e[4],i(v,k),i(n,j),i(n,q),i(q,P),P.checked=e[5],i(q,S),i(n,N),i(t,E),i(t,A),i(A,F),i(F,O),i(A,I),i(A,T),i(T,J),i(A,U),i(A,D),i(D,H),i(A,Z),i(A,G),i(G,X),i(A,K),i(A,ee),i(ee,se),i(A,oe),yt&&yt.m(A,null),i(A,ue),bt&&bt.m(A,null),i(t,ie),wt&&wt.m(t,null),i(t,ce);for(let e=0;e<zt.length;e+=1)zt[e].m(t,null);c(p,pe,d),c(p,de,d),c(p,fe,d),c(p,me,d),i(me,ge),i(me,he),i(me,$e),i($e,_e),i(_e,ve),i(_e,xe),i(xe,ye),ye.checked=e[2],i(xe,be),i(_e,we),i($e,Ce),i($e,ze),i($e,ke),i($e,je),i($e,qe),i($e,Pe),i($e,Se),i($e,Ne),i($e,Ee),i($e,Ae),i($e,Fe),i($e,Oe),i(Oe,Le),i(Oe,Me),i(Oe,Ie),i(Oe,Te),w(Te,e[7]),i(Oe,Je),i($e,Re),i($e,Be),i(Be,Ue),i(Be,De),i(Be,He),w(He,e[6]),i(me,Qe);for(let e=0;e<jt.length;e+=1)jt[e].m(me,null);i(me,Ze),i(me,Ge),i(Ge,Xe),i(Ge,We),i(Ge,Ve),i(Ge,Ye),i(Ge,Ke),i(Ge,et),i(Ge,tt),i(Ge,nt),i(Ge,rt),i(Ge,at),i(Ge,st),i(Ge,lt),i(Ge,ot),i(ot,ut),i(Ge,it),i(Ge,ct),i(ct,pt),c(p,dt,d),c(p,ft,d),c(p,mt,d),re(St,p,d),ht=!0,f&&r($t),$t=[_(u,"change",e[15]),_(z,"change",e[16]),_(P,"change",e[17]),_(ye,"change",e[20]),_(Te,"input",e[21]),_(He,"input",e[22])]},p(e,n){if((!ht||2&n[0])&&_t!==(_t=e[1].name+"")&&b(s,_t),8&n[0]&&(u.checked=e[3]),16&n[0]&&(z.checked=e[4]),32&n[0]&&(P.checked=e[5]),(!ht||48&n[0]&&M!==(M=e[4]||e[5]?2:1))&&x(F,"rowspan",M),(!ht||48&n[0]&&R!==(R=e[4]||e[5]?2:1))&&x(T,"rowspan",R),(!ht||48&n[0]&&Q!==(Q=e[4]||e[5]?2:1))&&x(D,"rowspan",Q),(!ht||48&n[0]&&W!==(W=e[4]||e[5]?2:1))&&x(G,"rowspan",W),(!ht||48&n[0]&&le!==(le=e[4]||e[5]?2:1))&&x(ee,"rowspan",le),e[4]?yt?yt.p(e,n):(yt=an(e),yt.c(),yt.m(A,ue)):yt&&(yt.d(1),yt=null),e[5]?bt||(bt=ln(),bt.c(),bt.m(A,null)):bt&&(bt.d(1),bt=null),e[4]||e[5]?wt?wt.p(e,n):(wt=on(e),wt.c(),wt.m(t,ce)):wt&&(wt.d(1),wt=null),4400&n[0]){let r;for(Ct=e[8],r=0;r<Ct.length;r+=1){const a=tn(e,Ct,r);zt[r]?zt[r].p(a,n):(zt[r]=gn(a),zt[r].c(),zt[r].m(t,null))}for(;r<zt.length;r+=1)zt[r].d(1);zt.length=Ct.length}if(4&n[0]&&(ye.checked=e[2]),128&n[0]&&y(Te.value)!==e[7]&&w(Te,e[7]),64&n[0]&&y(He.value)!==e[6]&&w(He,e[6]),708&n[0]){let t;for(kt=e[9],t=0;t<kt.length;t+=1){const r=Kt(e,kt,t);jt[t]?jt[t].p(r,n):(jt[t]=vn(r),jt[t].c(),jt[t].m(me,Ze))}for(;t<jt.length;t+=1)jt[t].d(1);jt.length=kt.length}(!ht||1024&n[0])&&vt!==(vt=e[10].toFixed(9)+"")&&b(ut,vt),(!ht||2048&n[0])&&xt!==(xt=e[11].toFixed(2)+"")&&b(pt,xt);const r={};2&n[0]&&(r.pieces=e[1]),!gt&&1&n[0]&&(gt=!0,r.estimations=e[0],B(()=>gt=!1)),St.$set(r)},i(e){ht||(V(St.$$.fragment,e),ht=!0)},o(e){Y(St.$$.fragment,e),ht=!1},d(e){e&&p(t),yt&&yt.d(),bt&&bt.d(),wt&&wt.d(),d(zt,e),e&&p(pe),e&&p(de),e&&p(fe),e&&p(me),d(jt,e),e&&p(dt),e&&p(ft),e&&p(mt),ae(St,e),r($t)}}}function yn(e,t,n){let r,a,{pieces:s=[]}=t,{merge:l=!0}=t,{estimations:o}=t,u=!0,i=!0,c=!1,p=!0;A("settings").subscribe(e=>{n(6,r=e.cubeprice),n(7,a=e.cubemargin)});let d=[];let f,m,g,h,$;return e.$set=e=>{"pieces"in e&&n(1,s=e.pieces),"merge"in e&&n(13,l=e.merge),"estimations"in e&&n(0,o=e.estimations)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(14,f=s.pieces.reduce((e,t)=>e.concat(t.individual()),[]).map(e=>e.piece?e.piece.update_new({...e.piece,names:e.nom?e.nom.split(" "):e.piece.names,que:quantite*(e.que||e.piece.que||1)}):e)),24576&e.$$.dirty[0]&&n(9,m=l?Object.values(f.reduce((e,t)=>(e[t.signature()]=[...e[t.signature()]||[],t],e),{})).map(e=>e.reduce((e,t)=>null==e?t:e.merge(t),null)):f),640&e.$$.dirty[0]&&n(10,g=m.map(e=>e.que*e.cubage(a/100)).reduce((e,t)=>e+t,0)),704&e.$$.dirty[0]&&n(11,h=m.map(e=>e.que*e.prix(r,a/100)).reduce((e,t)=>e+t,0)),10&e.$$.dirty[0]&&n(8,d=function(e,t){return e.flat_groups("",t).map(e=>{const t=e.pieces.reduce((e,t)=>({...e,[t.epaisseur]:[...e[t.epaisseur]||[],t]}),{}),n=Object.keys(t).map(e=>({epaisseur:e,nb_pieces:t[e].length,surface:t[e].reduce((e,t)=>e+t.surface(),0)})),{xmin:r,xmax:a,ymin:s,ymax:l,zmin:o,zmax:u}=e.bounding_box(),i=e.pieces.filter(e=>e.features.includes("panneau")||e.features.includes("panneau-seul"));return{name:e.name,dimension_x:a-r,dimension_y:l-s,dimension_z:u-o,nb_tenons:e.pieces.reduce((e,t)=>e+t.nombre_tenons,0),nb_pieces:e.pieces.length,surface:e.surface(),epaisseurs:n,nb_panneaux:i.length,m2_panneaux:i.reduce((e,t)=>e+t.surface(),0)}}).filter(e=>e.nb_pieces>0)}(s,i)),256&e.$$.dirty[0]&&n(12,$=Object.keys(d.reduce((e,t)=>(t.epaisseurs.forEach(t=>e[t.epaisseur]=!0),e),{})))},[o,s,u,i,c,p,r,a,d,m,g,h,$,l,f,function(){i=this.checked,n(3,i)},function(){c=this.checked,n(4,c)},function(){p=this.checked,n(5,p)},(e,t)=>t.epaisseur==e,(e,t)=>t.epaisseur==e,function(){u=this.checked,n(2,u)},function(){a=y(this.value),n(7,a)},function(){r=y(this.value),n(6,r)},function(e){o=e,n(0,o)}]}class bn extends oe{constructor(e){super(),le(this,e,yn,xn,s,{pieces:1,merge:13,estimations:0},[-1,-1])}}function wn(e,t,n){const r=e.slice();return r[23]=t[n],r[25]=n,r}function Cn(e){let t,n,r,a,s;function l(t){e[15].call(null,t)}let o={pieces:e[23]||[],name:"Dessin "+(e[25]+1)};void 0!==e[8]&&(o.zoom=e[8]);const u=new pt({props:o});return L.push(()=>te(u,"zoom",l)),{c(){t=f("div"),ne(u.$$.fragment),r=h(),x(t,"data-count",a=e[6].length)},m(e,n){c(e,t,n),re(u,t,null),i(t,r),s=!0},p(e,r){const l={};128&r&&(l.pieces=e[23]||[]),!n&&256&r&&(n=!0,l.zoom=e[8],B(()=>n=!1)),u.$set(l),(!s||64&r&&a!==(a=e[6].length))&&x(t,"data-count",a)},i(e){s||(V(u.$$.fragment,e),s=!0)},o(e){Y(u.$$.fragment,e),s=!1},d(e){e&&p(t),ae(u)}}}function zn(e){let t,n,r,a,s,l,o,u,m=e[5].name+"",$=e[7],y=[];for(let t=0;t<$.length;t+=1)y[t]=Cn(wn(e,$,t));const w=e=>Y(y[e],1,1,()=>{y[e]=null});return{c(){t=f("div"),n=f("h2"),r=g(m),a=h(),s=f("a"),s.textContent="✎",l=h();for(let e=0;e<y.length;e+=1)y[e].c();x(s,"href","@"),x(t,"slot","plan")},m(p,d,f){c(p,t,d),i(t,n),i(n,r),i(n,a),i(n,s),i(t,l);for(let e=0;e<y.length;e+=1)y[e].m(t,null);o=!0,f&&u(),u=_(s,"click",v(e[9]))},p(e,n){if((!o||32&n)&&m!==(m=e[5].name+"")&&b(r,m),448&n){let r;for($=e[7],r=0;r<$.length;r+=1){const a=wn(e,$,r);y[r]?(y[r].p(a,n),V(y[r],1)):(y[r]=Cn(a),y[r].c(),V(y[r],1),y[r].m(t,null))}for(X(),r=$.length;r<y.length;r+=1)w(r);W()}},i(e){if(!o){for(let e=0;e<$.length;e+=1)V(y[e]);o=!0}},o(e){y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)Y(y[e]);o=!1},d(e){e&&p(t),d(y,e),u()}}}function kn(e){let t,n,r,a,s;function l(t){e[16].call(null,t)}function o(t){e[17].call(null,t)}function u(t){e[18].call(null,t)}let i={children:e[3],childrenState:e[2],drawings:!0};void 0!==e[4]&&(i.childrenPos=e[4]),void 0!==e[6]&&(i.pieces=e[6]),void 0!==e[7]&&(i.pieces_drawings=e[7]);const d=new Rt({props:i});return L.push(()=>te(d,"childrenPos",l)),L.push(()=>te(d,"pieces",o)),L.push(()=>te(d,"pieces_drawings",u)),{c(){t=f("div"),ne(d.$$.fragment),x(t,"slot","children")},m(e,n){c(e,t,n),re(d,t,null),s=!0},p(e,t){const s={};8&t&&(s.children=e[3]),4&t&&(s.childrenState=e[2]),!n&&16&t&&(n=!0,s.childrenPos=e[4],B(()=>n=!1)),!r&&64&t&&(r=!0,s.pieces=e[6],B(()=>r=!1)),!a&&128&t&&(a=!0,s.pieces_drawings=e[7],B(()=>a=!1)),d.$set(s)},i(e){s||(V(d.$$.fragment,e),s=!0)},o(e){Y(d.$$.fragment,e),s=!1},d(e){e&&p(t),ae(d)}}}function jn(e){let t,n;const r=new bn({props:{pieces:new mt(e[6],"Ensemble "+e[5].name,"Ensemble")}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};96&t&&(n.pieces=new mt(e[6],"Ensemble "+e[5].name,"Ensemble")),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function qn(t){let n,r;return{c(){n=h(),r=h()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Pn(e){let t,n,r,a;function s(t){e[19].call(null,t)}function l(t){e[20].call(null,t)}function o(t){e[21].call(null,t)}let u={state:e[1],path:e[0],$$slots:{default:[qn],tables:[jn],children:[kn],plan:[zn]},$$scope:{ctx:e}};void 0!==e[5]&&(u.data=e[5]),void 0!==e[3]&&(u.children=e[3]),void 0!==e[2]&&(u.childrenState=e[2]);const i=new Et({props:u});return L.push(()=>te(i,"data",s)),L.push(()=>te(i,"children",l)),L.push(()=>te(i,"childrenState",o)),i.$on("datachange",e[22]),{c(){ne(i.$$.fragment)},m(e,t){re(i,e,t),a=!0},p(e,[a]){const s={};2&a&&(s.state=e[1]),1&a&&(s.path=e[0]),67109372&a&&(s.$$scope={dirty:a,ctx:e}),!t&&32&a&&(t=!0,s.data=e[5],B(()=>t=!1)),!n&&8&a&&(n=!0,s.children=e[3],B(()=>n=!1)),!r&&4&a&&(r=!0,s.childrenState=e[2],B(()=>r=!1)),i.$set(s)},i(e){a||(V(i.$$.fragment,e),a=!0)},o(e){Y(i.$$.fragment,e),a=!1},d(e){ae(i,e)}}}function Sn(e,t,n){let r,{name:a=null}=t,{path:s="0"}=t,{initdata:l={}}=t,{state:o={}}=t,u=[],i={children:[],childrenPos:[],type:"Ensemble",id:0},c=l.children,p=l.childrenPos;function d(e){console.log("initdata changed"),n(4,p=e.childrenPos),n(3,c=e.children)}function f(e,t,a,s,l){n(5,r={...e,name:t,...a,childrenPos:s,children:l})}let m=[],g=[],h=.5;return e.$set=e=>{"name"in e&&n(10,a=e.name),"path"in e&&n(0,s=e.path),"initdata"in e&&n(11,l=e.initdata),"state"in e&&n(1,o=e.state)},e.$$.update=()=>{2048&e.$$.dirty&&d(l),3096&e.$$.dirty&&f(i,a,l,p,c)},[s,o,u,c,p,r,m,g,h,function(){n(5,r.name=prompt(`Renommer "${r.name}" en :`,r.name)||r.name,r)},a,l,i,d,f,function(e){h=e,n(8,h)},function(e){p=e,n(4,p)},function(e){m=e,n(6,m)},function(e){g=e,n(7,g)},function(e){r=e,n(5,r)},function(e){c=e,n(3,c)},function(e){u=e,n(2,u)},function(t){F(e,t)}]}class Nn extends oe{constructor(e){super(),le(this,e,Sn,Pn,s,{name:10,path:0,initdata:11,state:1})}}function En(e){let t,n,r;return{c(){t=f("option"),n=g(e[1]),r=g(" (par défaut)"),t.__value=e[5],t.value=t.__value},m(e,a){c(e,t,a),i(t,n),i(t,r)},p(e,t){2&t&&b(n,e[1])},d(e){e&&p(t)}}}function An(e){let t,n,r,a,s=null!=e[0]&&En(e);const d=e[11].default,m=l(d,e,e[10],null);return{c(){t=f("select"),s&&s.c(),n=$(),m&&m.c(),x(t,"class","svelte-if5jk6"),void 0===e[3]&&R(()=>e[12].call(t)),j(t,"error",e[4])},m(l,o,u){c(l,t,o),s&&s.m(t,null),i(t,n),m&&m.m(t,null),z(t,e[3]),e[13](t),r=!0,u&&a(),a=_(t,"change",e[12])},p(e,[r]){null!=e[0]?s?s.p(e,r):(s=En(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),m&&m.p&&1024&r&&m.p(o(d,e,e[10],null),u(d,e[10],r,null)),8&r&&z(t,e[3]),16&r&&j(t,"error",e[4])},i(e){r||(V(m,e),r=!0)},o(e){Y(m,e),r=!1},d(n){n&&p(t),s&&s.d(),m&&m.d(n),e[13](null),a()}}}function Fn(e,t,n){let{value:r=null}=t,{def:a=null}=t,{force:s=!1}=t,{init:l=null}=t;null!=l&&null==r&&(r=l);let o,u=a,i=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2),c=null!=a&&null==r?i:r;function p(e){if(!e)return;let t=Array.from(e.options).find(e=>e.value==a);t&&n(1,u=t.textContent)}let d,{$$slots:f={},$$scope:m}=t;return e.$set=e=>{"value"in e&&n(6,r=e.value),"def"in e&&n(0,a=e.def),"force"in e&&n(7,s=e.force),"init"in e&&n(8,l=e.init),"$$scope"in e&&n(10,m=e.$$scope)},e.$$.update=()=>{9&e.$$.dirty&&n(6,r=null!=a&&c==i?null:c),4&e.$$.dirty&&p(o),193&e.$$.dirty&&n(4,d=s&&null!=r&&r!=a)},[a,u,o,c,d,i,r,s,l,p,m,f,function(){c=k(this),n(3,c)},function(e){L[e?"unshift":"push"](()=>{n(2,o=e)})}]}class On extends oe{constructor(e){super(),le(this,e,Fn,An,s,{value:6,def:0,force:7,init:8})}}function Ln(e,t,n){const r=e.slice();return r[9]=t[n],r}function Mn(e){let t,n,r,a,s,l,o,u,d,f,h,$,_,v,y,w,z,k,j,q,P,S,N,E,A,F,O,L=e[9].text+"",M=e[9].length+"",I=e[9].text_suffix+"";return{c(){t=m("circle"),a=m("circle"),o=m("text"),u=g(L),d=g(M),f=g(I),_=m("line"),k=m("line"),N=m("line"),x(t,"cx",n=e[9].zstart),x(t,"cy",r=20*e[9].row+15),x(t,"r","2"),x(t,"stroke","black"),x(t,"stroke-width","1"),x(t,"fill","white"),x(a,"cx",s=e[9].zstart+e[9].zlength),x(a,"cy",l=20*e[9].row+15),x(a,"r","2"),x(a,"stroke","black"),x(a,"stroke-width","1"),x(a,"fill","white"),x(o,"x",h=e[9].zstart+e[9].zlength/2),x(o,"y",$=20*e[9].row+13),x(o,"text-anchor","middle"),x(o,"font-size","10pt"),x(_,"x1",v=e[9].zstart-5*e[3]),x(_,"y1",y=20*e[9].row+15),x(_,"x2",w=e[9].zstart+e[9].zlength+5*e[3]),x(_,"y2",z=20*e[9].row+15),C(_,"stroke-width","1"),C(_,"stroke","rgb(0,0,0)"),x(k,"x1",j=e[9].zstart),x(k,"y1",q=20*e[9].row+10),x(k,"x2",P=e[9].zstart),x(k,"y2",S=20*e[9].row+19),C(k,"stroke-width","1"),C(k,"stroke","rgb(0,0,0)"),x(N,"x1",E=e[9].zstart+e[9].zlength),x(N,"y1",A=20*e[9].row+10),x(N,"x2",F=e[9].zstart+e[9].zlength),x(N,"y2",O=20*e[9].row+19),C(N,"stroke-width","1"),C(N,"stroke","rgb(0,0,0)")},m(e,n){c(e,t,n),c(e,a,n),c(e,o,n),i(o,u),i(o,d),i(o,f),c(e,_,n),c(e,k,n),c(e,N,n)},p(e,i){16&i&&n!==(n=e[9].zstart)&&x(t,"cx",n),16&i&&r!==(r=20*e[9].row+15)&&x(t,"cy",r),16&i&&s!==(s=e[9].zstart+e[9].zlength)&&x(a,"cx",s),16&i&&l!==(l=20*e[9].row+15)&&x(a,"cy",l),16&i&&L!==(L=e[9].text+"")&&b(u,L),16&i&&M!==(M=e[9].length+"")&&b(d,M),16&i&&I!==(I=e[9].text_suffix+"")&&b(f,I),16&i&&h!==(h=e[9].zstart+e[9].zlength/2)&&x(o,"x",h),16&i&&$!==($=20*e[9].row+13)&&x(o,"y",$),24&i&&v!==(v=e[9].zstart-5*e[3])&&x(_,"x1",v),16&i&&y!==(y=20*e[9].row+15)&&x(_,"y1",y),24&i&&w!==(w=e[9].zstart+e[9].zlength+5*e[3])&&x(_,"x2",w),16&i&&z!==(z=20*e[9].row+15)&&x(_,"y2",z),16&i&&j!==(j=e[9].zstart)&&x(k,"x1",j),16&i&&q!==(q=20*e[9].row+10)&&x(k,"y1",q),16&i&&P!==(P=e[9].zstart)&&x(k,"x2",P),16&i&&S!==(S=20*e[9].row+19)&&x(k,"y2",S),16&i&&E!==(E=e[9].zstart+e[9].zlength)&&x(N,"x1",E),16&i&&A!==(A=20*e[9].row+10)&&x(N,"y1",A),16&i&&F!==(F=e[9].zstart+e[9].zlength)&&x(N,"x2",F),16&i&&O!==(O=20*e[9].row+19)&&x(N,"y2",O)},d(e){e&&p(t),e&&p(a),e&&p(o),e&&p(_),e&&p(k),e&&p(N)}}}function In(t){let n,r,a=t[4],s=[];for(let e=0;e<a.length;e+=1)s[e]=Mn(Ln(t,a,e));return{c(){n=m("g");for(let e=0;e<s.length;e+=1)s[e].c();x(n,"transform",r="translate("+t[0]+", "+t[1]+") "+t[2])},m(e,t){c(e,n,t);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(24&t){let r;for(a=e[4],r=0;r<a.length;r+=1){const l=Ln(e,a,r);s[r]?s[r].p(l,t):(s[r]=Mn(l),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}7&t&&r!==(r="translate("+e[0]+", "+e[1]+") "+e[2])&&x(n,"transform",r)},i:e,o:e,d(e){e&&p(n),d(s,e)}}}function Tn(e,t,n){let r,a,s,{dim:l=[]}=t,{zoom:o=1}=t,{suffix:u=""}=t,{pos:i="top"}=t,{x:c=0}=t,{y:p=0}=t;return e.$set=e=>{"dim"in e&&n(5,l=e.dim),"zoom"in e&&n(6,o=e.zoom),"suffix"in e&&n(7,u=e.suffix),"pos"in e&&n(8,i=e.pos),"x"in e&&n(0,c=e.x),"y"in e&&n(1,p=e.y)},e.$$.update=()=>{256&e.$$.dirty&&n(2,r="left"==i?"rotate(-90)":""),256&e.$$.dirty&&n(3,a="left"==i?-1:1),232&e.$$.dirty&&n(4,s=l.map(e=>({row:0,text:"",text_suffix:u,...e,zstart:o*e.start*a,zlength:o*e.length*a})))},[c,p,r,a,s,l,o,u,i]}class Jn extends oe{constructor(e){super(),le(this,e,Tn,In,s,{dim:5,zoom:6,suffix:7,pos:8,x:0,y:1})}}class Rn{constructor(){this.type="Piece",this.longueur=0,this.largeur=0,this.epaisseur=0,this.arrasement=0,this.x=0,this.y=0,this.z=0,this.orient="xyz",this.names=[],this.que=1,this.features=[]}update(e){if(e.features&&1==e.features.length&&1==e.features[0])throw console.log("WARNING: incorrect feature %o",e),new Exception;return this.update_new({...this,props:e})}update_new(e){let t=Object.assign(Object.create(Rn.prototype),e);if(t.features&&1==t.features.length&&1==t.features[0])throw console.log("WARNING: incorrect feature %o",t),new Exception;return t}get epaisseur_plateau(){return this.epaisseur<=17?20:this.epaisseur<=24?27:this.epaisseur<=32?35:this.epaisseur+10}get nombre_tenons(){return(this.longueur_tenon1?1:0)+(this.longueur_tenon2?1:0)}get name(){return this.names.join(" ")}get name_list(){return(this.names_list||[this.names]).map(e=>e.join(" "))}set_name(){return this.update_new({...this,names:Array.from(arguments).filter(e=>e)})}add_name(){return this.update_new({...this,names:this.names.concat(Array.from(arguments).filter(e=>e))})}prefix_name(){return this.update_new({...this,names:Array.from(arguments).filter(e=>e).concat(this.names)})}add_features(){return this.update_new({...this,features:[...this.features,...Array.from(arguments).filter(e=>e&&!this.features.includes(e))]})}count_features(){return Array.from(arguments,e=>[e,this.features.includes(e)?this.que:0]).reduce((e=0,t=1,(n,r)=>(n||(n={}),n[r[e||0]]=null==e||t?r[t||1]:r,n)),{});var e,t}multiply_que(e){return this.update_new({...this,que:this.que*e})}build(e,t,n){return this.update_new({...this,arrasement:e||this.arrasement,longueur:e||this.longueur,largeur:t||this.largeur,epaisseur:n||this.epaisseur})}ajout_tenons(e,t){return void 0===t&&(t=e),this.update_new({...this,arrasement:this.arrasement||this.longueur,longueur:this.longueur+e+t,longueur_tenon1:(this.longueur_tenon1||0)+e,longueur_tenon2:(this.longueur_tenon2||0)+t})}usine_tenons(e,t){return void 0===t&&(t=e),this.update_new({...this,arrasement:this.arrasement-e-t,longueur_tenon1:(this.longueur_tenon1||0)+e,longueur_tenon2:(this.longueur_tenon2||0)+t})}put(e,t,n,r){return this.update_new({...this,x:e||this.x,y:t||this.y,z:n||this.z,orient:r?ft(r):this.orient})}dim(e,t,n,r){t=null==t?"longueur":t,n=null==n?"largeur":n,r=null==r?"epaisseur":r;let a=e==e.toLowerCase()?1:-1;e=e.toLowerCase();let s=[0==t?0:this[t]||0,0==n?0:this[n]||0,0==r?0:this[r]||0];return[a*this[e],a*s[this.orient.indexOf(e)]]}bounding_box(){let[e,t]=this.dim("x"),[n,r]=this.dim("y"),[a,s]=this.dim("z");return{dx:t,dy:r,dz:s,xmin:e,ymin:n,zmin:a,xmax:e+t,ymax:n+r,zmax:a+s}}projection_polyline(e){e=dt(e);let[t,n]=this.dim(e[0]),[r,a]=this.dim(e[1]),[s,l]=this.dim(e[0],"longueur_tenon1",0,0),[o,u]=this.dim(e[0],"longueur_tenon2",0,0),[i,c]=this.dim(e[1],"longueur_tenon1",0,0),[p,d]=this.dim(e[1],"longueur_tenon2",0,0),f=Math.floor(n/3),m=n-f,g=Math.floor(a/3),h=a-g;return[[t+l,r+c],[t+f,r+c],[t+f,r],[t+m,r],[t+m,r+c],[t+n-u,r+c],[t+n-u,r+g],[t+n,r+g],[t+n,r+h],[t+n-u,r+h],[t+n-u,r+a-d],[t+m,r+a-d],[t+m,r+a],[t+f,r+a],[t+f,r+a-d],[t+l,r+a-d],[t+l,r+h],[t,r+h],[t,r+g],[t+l,r+g],[t+l,r+c]].map(e=>[e[0],-e[1]])}string_arrasement(){return this.arrasement&&this.arrasement!=this.longueur?this.arrasement:""}string_dimentions(){return`${this.longueur} x ${this.largeur} x ${this.epaisseur}`}string_dimentions_plateau(){return`${this.longueur} x ${this.largeur} x ${this.epaisseur_plateau}`}surface(){return this.longueur*this.largeur*1e-6}cubage(e){return this.longueur*this.largeur*this.epaisseur_plateau*1e-9*(e||1)}prix(e,t){return this.cubage(t)*e}individual(){return[this]}signature(){return JSON.stringify(Object.keys(this).sort().filter(e=>!["names","names_list","x","y","z","orient","que"].includes(e)).map(e=>[e,this[e]]).reduce((e,t)=>e.concat(t),[]))}merge(e){return console.assert(this.signature()==e.signature()),this.update_new({...this,que:(this.que||1)+(e.que||1),names_list:[...this.names_list||[this.names],e.names],names:this.names.filter(t=>e.names.includes(t)).concat(this.names.filter(t=>!e.names.includes(t)&&!e.names.includes(`(${t})`)).map(e=>"("==e[0]?e:`(${e})`)).concat(e.names.filter(e=>!this.names.includes(e)&&!this.names.includes(`(${e})`)).map(e=>"("==e[0]?e:`(${e})`))})}}function Bn(e,t,n){const r=e.slice();return r[38]=t[n],r}function Un(e){let t;const n=new Ge({props:{piece:e[38],pos:"avant"}});return{c(){ne(n.$$.fragment)},m(e,r){re(n,e,r),t=!0},p(e,t){const r={};512&t[0]&&(r.piece=e[38]),n.$set(r)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){ae(n,e)}}}function Dn(e){let t,n,a,s,l,o,u,$,v,y,C,z,k,j,q,P,S=100*e[5]+"";const N=new pt({props:{pieces:e[9],name:"Porte "+e[1].name}}),E=new Jn({props:{zoom:e[5],x:"20",y:"0",dim:[{text:"largeur: ",start:0,length:e[2].largeur,row:2},{text:"lon. traverse: ",start:e[8].x,length:e[8].longueur,row:1},{start:e[6].x,length:e[6].largeur,row:0},{start:e[7].x,length:e[7].largeur,row:0}]}}),A=new Jn({props:{zoom:e[5],x:"0",y:"60",pos:"left",dim:[{text:"hauteur: ",start:0,length:e[2].hauteur,row:0}]}});let F=e[9],O=[];for(let t=0;t<F.length;t+=1)O[t]=Un(Bn(e,F,t));const L=e=>Y(O[e],1,1,()=>{O[e]=null});return{c(){t=f("div"),ne(N.$$.fragment),n=h(),a=f("p"),s=g("Zoom : "),l=f("input"),o=h(),u=g(S),$=g(" %"),v=h(),y=m("svg"),ne(E.$$.fragment),ne(A.$$.fragment),C=m("g");for(let e=0;e<O.length;e+=1)O[e].c();x(l,"type","range"),x(l,"min","0"),x(l,"max","1"),x(l,"step",".05"),x(a,"class","svelte-18serza"),x(C,"transform",z="translate(20, "+(60+e[5]*e[2].hauteur)+") scale("+e[5]+" "+e[5]+")"),x(y,"width",k=e[5]*e[2].largeur+25),x(y,"height",j=e[5]*e[2].hauteur+65),x(y,"class","svelte-18serza"),x(t,"slot","plan"),x(t,"class","svelte-18serza")},m(p,d,f){c(p,t,d),re(N,t,null),i(t,n),i(t,a),i(a,s),i(a,l),w(l,e[5]),i(a,o),i(a,u),i(a,$),i(t,v),i(t,y),re(E,y,null),re(A,y,null),i(y,C);for(let e=0;e<O.length;e+=1)O[e].m(C,null);q=!0,f&&r(P),P=[_(l,"change",e[18]),_(l,"input",e[18])]},p(e,t){const n={};512&t[0]&&(n.pieces=e[9]),2&t[0]&&(n.name="Porte "+e[1].name),N.$set(n),32&t[0]&&w(l,e[5]),(!q||32&t[0])&&S!==(S=100*e[5]+"")&&b(u,S);const r={};32&t[0]&&(r.zoom=e[5]),452&t[0]&&(r.dim=[{text:"largeur: ",start:0,length:e[2].largeur,row:2},{text:"lon. traverse: ",start:e[8].x,length:e[8].longueur,row:1},{start:e[6].x,length:e[6].largeur,row:0},{start:e[7].x,length:e[7].largeur,row:0}]),E.$set(r);const a={};if(32&t[0]&&(a.zoom=e[5]),4&t[0]&&(a.dim=[{text:"hauteur: ",start:0,length:e[2].hauteur,row:0}]),A.$set(a),512&t[0]){let n;for(F=e[9],n=0;n<F.length;n+=1){const r=Bn(e,F,n);O[n]?(O[n].p(r,t),V(O[n],1)):(O[n]=Un(r),O[n].c(),V(O[n],1),O[n].m(C,null))}for(X(),n=F.length;n<O.length;n+=1)L(n);W()}(!q||36&t[0]&&z!==(z="translate(20, "+(60+e[5]*e[2].hauteur)+") scale("+e[5]+" "+e[5]+")"))&&x(C,"transform",z),(!q||36&t[0]&&k!==(k=e[5]*e[2].largeur+25))&&x(y,"width",k),(!q||36&t[0]&&j!==(j=e[5]*e[2].hauteur+65))&&x(y,"height",j)},i(e){if(!q){V(N.$$.fragment,e),V(E.$$.fragment,e),V(A.$$.fragment,e);for(let e=0;e<F.length;e+=1)V(O[e]);q=!0}},o(e){Y(N.$$.fragment,e),Y(E.$$.fragment,e),Y(A.$$.fragment,e),O=O.filter(Boolean);for(let e=0;e<O.length;e+=1)Y(O[e]);q=!1},d(e){e&&p(t),ae(N),ae(E),ae(A),d(O,e),r(P)}}}function Hn(e){let t,n,r;return{c(){t=f("option"),t.textContent="aucun",n=h(),r=f("option"),r.textContent="charnières",t.__value="aucun",t.value=t.__value,x(t,"class","svelte-18serza"),r.__value="charnieres",r.value=r.__value,x(r,"class","svelte-18serza")},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function Qn(e){let t,n,r;return{c(){t=f("option"),t.textContent="tenon et mortaise",n=h(),r=f("option"),r.textContent="contre profil",t.__value="tenon-mortaise",t.value=t.__value,x(t,"class","svelte-18serza"),r.__value="contre-profil",r.value=r.__value,x(r,"class","svelte-18serza")},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function Zn(e){let t,n,r,a,s;function l(t){e[32].call(null,t)}let o={min:"0",def:e[10].profondeur_profil};void 0!==e[3].profondeur_profil&&(o.value=e[3].profondeur_profil);const u=new he({props:o});return L.push(()=>te(u,"value",l)),{c(){t=f("label"),n=f("span"),n.textContent="Profondeur profil : ",ne(u.$$.fragment),a=g(" mm"),x(n,"class","svelte-18serza"),x(t,"class","svelte-18serza")},m(e,r){c(e,t,r),i(t,n),re(u,t,null),i(t,a),s=!0},p(e,t){const n={};!r&&8&t[0]&&(r=!0,n.value=e[3].profondeur_profil,B(()=>r=!1)),u.$set(n)},i(e){s||(V(u.$$.fragment,e),s=!0)},o(e){Y(u.$$.fragment,e),s=!1},d(e){e&&p(t),ae(u)}}}function Gn(e){let t,n,r,a,s;function l(t){e[31].call(null,t)}let o={min:"0",def:e[10].profondeur_tenons};void 0!==e[3].profondeur_tenons&&(o.value=e[3].profondeur_tenons);const u=new he({props:o});return L.push(()=>te(u,"value",l)),{c(){t=f("label"),n=f("span"),n.textContent="Profondeur tenons : ",ne(u.$$.fragment),a=g(" mm"),x(n,"class","svelte-18serza"),x(t,"class","svelte-18serza")},m(e,r){c(e,t,r),i(t,n),re(u,t,null),i(t,a),s=!0},p(e,t){const n={};!r&&8&t[0]&&(r=!0,n.value=e[3].profondeur_tenons,B(()=>r=!1)),u.$set(n)},i(e){s||(V(u.$$.fragment,e),s=!0)},o(e){Y(u.$$.fragment,e),s=!1},d(e){e&&p(t),ae(u)}}}function Xn(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,y,w,C,z,k,j,q,P,S,N,E,A,F,O,M,I,T,J,R,U,D,H,Q,Z,G,K,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,ge,$e,_e,ve,xe,ye,we,Ce,ze,ke,je,qe,Pe,Se,Ne,Ee,Ae,Fe,Oe,Le,Me,Ie,Te,Je,Re,Be,Ue,De,He,Qe,Ze,Ge,Xe,We,Ve,Ye,Ke,et,tt,nt,rt=JSON.stringify(e[3],null,2)+"";function at(t){e[19].call(null,t)}let st={def:e[10].ferrage,force:e[10].force_ferrage,$$slots:{default:[Hn]},$$scope:{ctx:e}};void 0!==e[3].ferrage&&(st.value=e[3].ferrage);const lt=new On({props:st});function ot(t){e[20].call(null,t)}L.push(()=>te(lt,"value",at));let ut={def:e[10].type,$$slots:{default:[Qn]},$$scope:{ctx:e}};void 0!==e[3].type&&(ut.value=e[3].type);const it=new On({props:ut});function ct(t){e[21].call(null,t)}L.push(()=>te(it,"value",ot));let pt={min:"0",def:e[10].largeur,force:e[10].force_largeur};void 0!==e[3].largeur&&(pt.value=e[3].largeur);const dt=new he({props:pt});function ft(t){e[22].call(null,t)}L.push(()=>te(dt,"value",ct));let mt={min:"0",def:e[10].hauteur,force:e[10].force_hauteur};void 0!==e[3].hauteur&&(mt.value=e[3].hauteur);const gt=new he({props:mt});function ht(t){e[23].call(null,t)}L.push(()=>te(gt,"value",ft));let $t={min:"0",def:e[10].epaisseur,force:e[10].force_epaisseur};void 0!==e[3].epaisseur&&($t.value=e[3].epaisseur);const _t=new he({props:$t});function vt(t){e[24].call(null,t)}L.push(()=>te(_t,"value",ht));let xt={min:"0",def:e[10].largeur_montants};void 0!==e[3].largeur_montants&&(xt.value=e[3].largeur_montants);const yt=new he({props:xt});function bt(t){e[25].call(null,t)}L.push(()=>te(yt,"value",vt));let wt={min:"0",def:e[10].largeur_traverses};void 0!==e[3].largeur_traverses&&(wt.value=e[3].largeur_traverses);const Ct=new he({props:wt});function zt(t){e[26].call(null,t)}L.push(()=>te(Ct,"value",bt));let kt={min:"0",def:e[2].largeur_traverses};void 0!==e[3].largeur_traverse_h&&(kt.value=e[3].largeur_traverse_h);const jt=new he({props:kt});function qt(t){e[27].call(null,t)}L.push(()=>te(jt,"value",zt));let Pt={min:"0",def:e[2].largeur_traverses};void 0!==e[3].largeur_traverse_b&&(Pt.value=e[3].largeur_traverse_b);const St=new he({props:Pt});function Nt(t){e[28].call(null,t)}L.push(()=>te(St,"value",qt));let Et={min:"0",def:e[10].epaisseur_panneau};void 0!==e[3].epaisseur_panneau&&(Et.value=e[3].epaisseur_panneau);const At=new he({props:Et});function Ft(t){e[29].call(null,t)}L.push(()=>te(At,"value",Nt));let Ot={min:"0",def:e[10].profondeur_rainure};void 0!==e[3].profondeur_rainure&&(Ot.value=e[3].profondeur_rainure);const Lt=new he({props:Ot});function Mt(t){e[30].call(null,t)}L.push(()=>te(Lt,"value",Ft));let It={min:"0",def:e[10].jeu_rainure};void 0!==e[3].jeu_rainure&&(It.value=e[3].jeu_rainure);const Tt=new he({props:It});L.push(()=>te(Tt,"value",Mt));const Jt=[Gn,Zn],Rt=[];function Bt(e,t){return"tenon-mortaise"==e[2].type?0:"contre-profil"==e[2].type?1:-1}function Ut(t){e[33].call(null,t)}~(Ae=Bt(e))&&(Fe=Rt[Ae]=Jt[Ae](e));let Dt={def:e[10].inclure_panneau};void 0!==e[3].inclure_panneau&&(Dt.checked=e[3].inclure_panneau);const Ht=new be({props:Dt});function Qt(t){e[34].call(null,t)}L.push(()=>te(Ht,"checked",Ut));let Zt={def:e[10].encastree};void 0!==e[3].encastree&&(Zt.checked=e[3].encastree);const Gt=new be({props:Zt});function Xt(t){e[35].call(null,t)}L.push(()=>te(Gt,"checked",Qt));let Wt={min:"0",def:e[10].jeu_encastrement};void 0!==e[3].jeu_encastrement&&(Wt.value=e[3].jeu_encastrement);const Vt=new he({props:Wt});return L.push(()=>te(Vt,"value",Xt)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Ferrage :",s=h(),ne(lt.$$.fragment),o=h(),u=f("label"),d=f("span"),d.textContent="Type :",m=h(),ne(it.$$.fragment),_=h(),v=f("label"),y=f("span"),y.textContent="Largeur   : ",ne(dt.$$.fragment),C=g(" mm"),z=h(),k=f("label"),j=f("span"),j.textContent="Hauteur   : ",ne(gt.$$.fragment),P=g(" mm"),S=h(),N=f("label"),E=f("span"),E.textContent="Épaisseur : ",ne(_t.$$.fragment),F=g(" mm"),O=h(),M=f("hr"),I=h(),T=f("label"),J=f("span"),J.textContent="Largeur montants : ",ne(yt.$$.fragment),U=g(" mm"),D=h(),H=f("label"),Q=f("span"),Q.textContent="largeur traverses : ",ne(Ct.$$.fragment),G=g(" mm"),K=h(),ee=f("label"),se=f("span"),se.textContent="largeur traverse haut : ",ne(jt.$$.fragment),oe=g(" mm"),ue=h(),ie=f("label"),ce=f("span"),ce.textContent="largeur traverse bas : ",ne(St.$$.fragment),de=g(" mm"),fe=h(),me=f("hr"),ge=h(),$e=f("label"),_e=f("span"),_e.textContent="Épaisseur panneau : ",ne(At.$$.fragment),xe=g(" mm"),ye=h(),we=f("label"),Ce=f("span"),Ce.textContent="Profondeur rainures : ",ne(Lt.$$.fragment),ke=g(" mm"),je=h(),qe=f("label"),Pe=f("span"),Pe.textContent="Jeu paneau / rainure : ",ne(Tt.$$.fragment),Ne=g(" mm"),Ee=h(),Fe&&Fe.c(),Oe=h(),Le=f("label"),Me=f("span"),Me.textContent="Inclure le paneau",ne(Ht.$$.fragment),Te=h(),Je=f("hr"),Re=h(),Be=f("label"),Ue=f("span"),Ue.textContent="Encastrée",ne(Gt.$$.fragment),He=h(),Qe=f("label"),Ze=f("span"),Ze.textContent="jeu encastrement (tout autour) : ",ne(Vt.$$.fragment),Xe=g(" mm"),We=h(),Ve=f("pre"),Ve.textContent="defaults = "+JSON.stringify(e[10],null,2),Ye=h(),Ke=f("pre"),et=g("ui = "),tt=g(rt),x(a,"class","svelte-18serza"),x(r,"class","svelte-18serza"),x(d,"class","svelte-18serza"),x(u,"class","svelte-18serza"),x(y,"class","svelte-18serza"),x(v,"class","svelte-18serza"),x(j,"class","svelte-18serza"),x(k,"class","svelte-18serza"),x(E,"class","svelte-18serza"),x(N,"class","svelte-18serza"),x(M,"class","svelte-18serza"),x(J,"class","svelte-18serza"),x(T,"class","svelte-18serza"),x(Q,"class","svelte-18serza"),x(H,"class","svelte-18serza"),x(se,"class","svelte-18serza"),x(ee,"class","svelte-18serza"),x(ce,"class","svelte-18serza"),x(ie,"class","svelte-18serza"),x(me,"class","svelte-18serza"),x(_e,"class","svelte-18serza"),x($e,"class","svelte-18serza"),x(Ce,"class","svelte-18serza"),x(we,"class","svelte-18serza"),x(Pe,"class","svelte-18serza"),x(qe,"class","svelte-18serza"),x(Me,"class","svelte-18serza"),x(Le,"class","svelte-18serza"),x(Je,"class","svelte-18serza"),x(Ue,"class","svelte-18serza"),x(Be,"class","svelte-18serza"),x(Ze,"class","svelte-18serza"),x(Qe,"class","svelte-18serza"),x(n,"class","svelte-18serza"),x(Ve,"class","svelte-18serza"),x(Ke,"class","svelte-18serza"),x(t,"class","main svelte-18serza"),x(t,"slot","dim")},m(e,l){c(e,t,l),i(t,n),i(n,r),i(r,a),i(r,s),re(lt,r,null),i(n,o),i(n,u),i(u,d),i(u,m),re(it,u,null),i(n,_),i(n,v),i(v,y),re(dt,v,null),i(v,C),i(n,z),i(n,k),i(k,j),re(gt,k,null),i(k,P),i(n,S),i(n,N),i(N,E),re(_t,N,null),i(N,F),i(n,O),i(n,M),i(n,I),i(n,T),i(T,J),re(yt,T,null),i(T,U),i(n,D),i(n,H),i(H,Q),re(Ct,H,null),i(H,G),i(n,K),i(n,ee),i(ee,se),re(jt,ee,null),i(ee,oe),i(n,ue),i(n,ie),i(ie,ce),re(St,ie,null),i(ie,de),i(n,fe),i(n,me),i(n,ge),i(n,$e),i($e,_e),re(At,$e,null),i($e,xe),i(n,ye),i(n,we),i(we,Ce),re(Lt,we,null),i(we,ke),i(n,je),i(n,qe),i(qe,Pe),re(Tt,qe,null),i(qe,Ne),i(n,Ee),~Ae&&Rt[Ae].m(n,null),i(n,Oe),i(n,Le),i(Le,Me),re(Ht,Le,null),i(n,Te),i(n,Je),i(n,Re),i(n,Be),i(Be,Ue),re(Gt,Be,null),i(n,He),i(n,Qe),i(Qe,Ze),re(Vt,Qe,null),i(Qe,Xe),i(t,We),i(t,Ve),i(t,Ye),i(t,Ke),i(Ke,et),i(Ke,tt),nt=!0},p(e,t){const r={};1024&t[1]&&(r.$$scope={dirty:t,ctx:e}),!l&&8&t[0]&&(l=!0,r.value=e[3].ferrage,B(()=>l=!1)),lt.$set(r);const a={};1024&t[1]&&(a.$$scope={dirty:t,ctx:e}),!$&&8&t[0]&&($=!0,a.value=e[3].type,B(()=>$=!1)),it.$set(a);const s={};!w&&8&t[0]&&(w=!0,s.value=e[3].largeur,B(()=>w=!1)),dt.$set(s);const o={};!q&&8&t[0]&&(q=!0,o.value=e[3].hauteur,B(()=>q=!1)),gt.$set(o);const u={};!A&&8&t[0]&&(A=!0,u.value=e[3].epaisseur,B(()=>A=!1)),_t.$set(u);const i={};!R&&8&t[0]&&(R=!0,i.value=e[3].largeur_montants,B(()=>R=!1)),yt.$set(i);const c={};!Z&&8&t[0]&&(Z=!0,c.value=e[3].largeur_traverses,B(()=>Z=!1)),Ct.$set(c);const p={};4&t[0]&&(p.def=e[2].largeur_traverses),!le&&8&t[0]&&(le=!0,p.value=e[3].largeur_traverse_h,B(()=>le=!1)),jt.$set(p);const d={};4&t[0]&&(d.def=e[2].largeur_traverses),!pe&&8&t[0]&&(pe=!0,d.value=e[3].largeur_traverse_b,B(()=>pe=!1)),St.$set(d);const f={};!ve&&8&t[0]&&(ve=!0,f.value=e[3].epaisseur_panneau,B(()=>ve=!1)),At.$set(f);const m={};!ze&&8&t[0]&&(ze=!0,m.value=e[3].profondeur_rainure,B(()=>ze=!1)),Lt.$set(m);const g={};!Se&&8&t[0]&&(Se=!0,g.value=e[3].jeu_rainure,B(()=>Se=!1)),Tt.$set(g);let h=Ae;Ae=Bt(e),Ae===h?~Ae&&Rt[Ae].p(e,t):(Fe&&(X(),Y(Rt[h],1,1,()=>{Rt[h]=null}),W()),~Ae?(Fe=Rt[Ae],Fe||(Fe=Rt[Ae]=Jt[Ae](e),Fe.c()),V(Fe,1),Fe.m(n,Oe)):Fe=null);const _={};!Ie&&8&t[0]&&(Ie=!0,_.checked=e[3].inclure_panneau,B(()=>Ie=!1)),Ht.$set(_);const v={};!De&&8&t[0]&&(De=!0,v.checked=e[3].encastree,B(()=>De=!1)),Gt.$set(v);const x={};!Ge&&8&t[0]&&(Ge=!0,x.value=e[3].jeu_encastrement,B(()=>Ge=!1)),Vt.$set(x),(!nt||8&t[0])&&rt!==(rt=JSON.stringify(e[3],null,2)+"")&&b(tt,rt)},i(e){nt||(V(lt.$$.fragment,e),V(it.$$.fragment,e),V(dt.$$.fragment,e),V(gt.$$.fragment,e),V(_t.$$.fragment,e),V(yt.$$.fragment,e),V(Ct.$$.fragment,e),V(jt.$$.fragment,e),V(St.$$.fragment,e),V(At.$$.fragment,e),V(Lt.$$.fragment,e),V(Tt.$$.fragment,e),V(Fe),V(Ht.$$.fragment,e),V(Gt.$$.fragment,e),V(Vt.$$.fragment,e),nt=!0)},o(e){Y(lt.$$.fragment,e),Y(it.$$.fragment,e),Y(dt.$$.fragment,e),Y(gt.$$.fragment,e),Y(_t.$$.fragment,e),Y(yt.$$.fragment,e),Y(Ct.$$.fragment,e),Y(jt.$$.fragment,e),Y(St.$$.fragment,e),Y(At.$$.fragment,e),Y(Lt.$$.fragment,e),Y(Tt.$$.fragment,e),Y(Fe),Y(Ht.$$.fragment,e),Y(Gt.$$.fragment,e),Y(Vt.$$.fragment,e),nt=!1},d(e){e&&p(t),ae(lt),ae(it),ae(dt),ae(gt),ae(_t),ae(yt),ae(Ct),ae(jt),ae(St),ae(At),ae(Lt),ae(Tt),~Ae&&Rt[Ae].d(),ae(Ht),ae(Gt),ae(Vt)}}}function Wn(e){let t,n;const r=new bn({props:{pieces:e[4].pieces_group}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","tables"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};16&t[0]&&(n.pieces=e[4].pieces_group),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function Vn(t){let n,r;return{c(){n=h(),r=h()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Yn(e){let t,n;function r(t){e[36].call(null,t)}let a={state:e[4],path:e[0],$$slots:{default:[Vn],tables:[Wn],dim:[Xn],plan:[Dn]},$$scope:{ctx:e}};void 0!==e[1]&&(a.data=e[1]);const s=new Et({props:a});return L.push(()=>te(s,"data",r)),s.$on("datachange",e[37]),{c(){ne(s.$$.fragment)},m(e,t){re(s,e,t),n=!0},p(e,n){const r={};16&n[0]&&(r.state=e[4]),1&n[0]&&(r.path=e[0]),1022&n[0]|1024&n[1]&&(r.$$scope={dirty:n,ctx:e}),!t&&2&n[0]&&(t=!0,r.data=e[1],B(()=>t=!1)),s.$set(r)},i(e){n||(V(s.$$.fragment,e),n=!0)},o(e){Y(s.$$.fragment,e),n=!1},d(e){ae(s,e)}}}function Kn(e,t,n){let r,a,s,l,o,u,i,c,p,d,{path:f}=t,{initdata:m={}}=t,g={...m},h={quantite:1,type:"contre-profil",largeur:400,hauteur:600,epaisseur:18,largeur_montants:70,largeur_traverses:70,profondeur_tenons:30,profondeur_rainure:10,profondeur_profil:15,encastree:!1,jeu_encastrement:2,jeu_rainure:1,epaisseur_panneau:15,inclure_panneau:!0,ferrage:"charnieres",...m.defaults},$={...m.opt},_={...m.ui||m.opt},v={},x=.25;return e.$set=e=>{"path"in e&&n(0,f=e.path),"initdata"in e&&n(11,m=e.initdata)},e.$$.update=()=>{8&e.$$.dirty[0]&&n(2,$=de({...h,...pe(_)},e=>({largeur_traverse_h:e.largeur_traverses,largeur_traverse_b:e.largeur_traverses,...e}))),4&e.$$.dirty[0]&&n(1,g.opt=$,g),8&e.$$.dirty[0]&&n(1,g.ui=_,g),4&e.$$.dirty[0]&&n(12,r=$.encastree?$.jeu_encastrement:0),4100&e.$$.dirty[0]&&n(13,a=(new Rn).add_name("Montant").add_features("contre-profil"==$.type?"montant-cp":"montant").build($.hauteur-2*r,$.largeur_montants,$.epaisseur)),12288&e.$$.dirty[0]&&n(6,s=a.add_name("gauche").put(r,r,0,"yxz")),12292&e.$$.dirty[0]&&n(7,l=a.add_name("droit").put(r+$.largeur-$.largeur_montants,r,0,"yxz")),4100&e.$$.dirty[0]&&n(14,o="contre-profil"==$.type?(new Rn).add_name("Traverse").add_features("traverse-cp").build($.largeur-2*($.largeur_montants-$.profondeur_profil)-2*r,0,$.epaisseur):"tenon-mortaise"==$.type?(new Rn).add_name("Traverse").add_features("traverse").build($.largeur-2*$.largeur_montants-2*r,0,$.epaisseur).ajout_tenons($.profondeur_tenons):new Rn),4&e.$$.dirty[0]&&n(15,u="contre-profil"==$.type?$.largeur_montants-$.profondeur_profil:"tenon-mortaise"==$.type?$.largeur_montants-$.profondeur_tenons:0),53252&e.$$.dirty[0]&&n(8,i=o.add_name("haut").build(null,$.largeur_traverse_h).put(r+u,r+$.hauteur-$.largeur_traverse_h,0,"xyz")),53252&e.$$.dirty[0]&&n(16,c=o.add_name("bas").build(null,$.largeur_traverse_b).put(r+u,r,0,"xyz")),77828&e.$$.dirty[0]&&n(17,p=("contre-profil"==$.type?(new Rn).build($.largeur-2*($.largeur_montants-$.profondeur_rainure+$.jeu_rainure)-2*r,$.hauteur+2*($.profondeur_rainure-$.jeu_rainure)-$.largeur_traverse_h-$.largeur_traverse_b-2*r,$.epaisseur_panneau):"tenon-mortaise"==$.type?(new Rn).build($.largeur-2*($.largeur_montants-$.profondeur_rainure+$.jeu_rainure),$.hauteur+2*($.profondeur_rainure-$.jeu_rainure)-$.largeur_traverse_h-$.largeur_traverse_b,$.epaisseur_panneau):new Rn).add_name("Panneau").add_features("panneau").put(r+a.largeur-$.profondeur_rainure+$.jeu_rainure,r+c.largeur-$.profondeur_rainure+$.jeu_rainure,0,"xyz")),197060&e.$$.dirty[0]&&n(9,d=[$.inclure_panneau?p:null,i,c,s,l].filter(e=>null!=e).map(e=>e.multiply_que($.quantite))),518&e.$$.dirty[0]&&n(4,v.pieces_group=new mt(d,"Porte "+g.name,"Porte").add_features("ferrage-"+$.ferrage),v)},[f,g,$,_,v,x,s,l,i,d,h,m,r,a,o,u,c,p,function(){x=y(this.value),n(5,x)},function(e){_.ferrage=e,n(3,_)},function(e){_.type=e,n(3,_)},function(e){_.largeur=e,n(3,_)},function(e){_.hauteur=e,n(3,_)},function(e){_.epaisseur=e,n(3,_)},function(e){_.largeur_montants=e,n(3,_)},function(e){_.largeur_traverses=e,n(3,_)},function(e){_.largeur_traverse_h=e,n(3,_)},function(e){_.largeur_traverse_b=e,n(3,_)},function(e){_.epaisseur_panneau=e,n(3,_)},function(e){_.profondeur_rainure=e,n(3,_)},function(e){_.jeu_rainure=e,n(3,_)},function(e){_.profondeur_tenons=e,n(3,_)},function(e){_.profondeur_profil=e,n(3,_)},function(e){_.inclure_panneau=e,n(3,_)},function(e){_.encastree=e,n(3,_)},function(e){_.jeu_encastrement=e,n(3,_)},function(e){g=e,n(1,g),n(2,$),n(3,_),n(10,h)},function(t){F(e,t)}]}class er extends oe{constructor(e){super(),le(this,e,Kn,Yn,s,{path:0,initdata:11},[-1,-1])}}function tr(e,t,n){const r=e.slice();return r[109]=t[n],r[111]=n,r}function nr(e,t,n){const r=e.slice();return r[109]=t[n],r[111]=n,r}function rr(e,t,n){const r=e.slice();return r[106]=t[n],r}function ar(e,t,n){const r=e.slice();return r[106]=t[n],r}function sr(e,t,n){const r=e.slice();return r[118]=t[n],r[120]=n,r}function lr(e,t,n){const r=e.slice();return r[115]=t[n],r[117]=n,r}function or(e,t,n){const r=e.slice();return r[118]=t[n],r[120]=n,r}function ur(e,t,n){const r=e.slice();return r[115]=t[n],r[117]=n,r}function ir(e,t,n){const r=e.slice();return r[115]=t[n],r[117]=n,r}function cr(e,t,n){const r=e.slice();return r[115]=t[n],r[117]=n,r}function pr(e,t,n){const r=e.slice();return r[115]=t[n],r[117]=n,r}function dr(e){let t,n;const r=new pt({props:{pieces:e[15],name:"Caisson "+e[1].name}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","plan"),x(t,"class","svelte-2d04f4")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};32768&t[0]&&(n.pieces=e[15]),2&t[0]&&(n.name="Caisson "+e[1].name),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function fr(t){let n,r,a,s=t[117]+1+"";return{c(){n=f("th"),r=g("Colonne n°"),a=g(s)},m(e,t){c(e,n,t),i(n,r),i(n,a)},p:e,d(e){e&&p(n)}}}function mr(e){let t,n,r,a;function s(){e[68].call(n,e[117])}return{c(){t=f("td"),n=f("input"),x(n,"type","number"),x(n,"min","0"),x(n,"placeholder",r=e[115].largeur),C(n,"width","5em"),x(t,"class","svelte-2d04f4")},m(r,l,o){c(r,t,l),i(t,n),w(n,e[7][e[117]]),o&&a(),a=_(n,"input",s)},p(t,a){e=t,16&a[0]&&r!==(r=e[115].largeur)&&x(n,"placeholder",r),128&a[0]&&y(n.value)!==e[7][e[117]]&&w(n,e[7][e[117]])},d(e){e&&p(t),a()}}}function gr(e){let t,n,r;function a(){e[69].call(n,e[117])}return{c(){t=f("td"),n=f("input"),x(n,"type","number"),x(n,"min","1"),C(n,"width","5em"),x(t,"class","svelte-2d04f4")},m(s,l,o){c(s,t,l),i(t,n),w(n,e[8][e[117]]),o&&r(),r=_(n,"input",a)},p(t,r){e=t,256&r[0]&&y(n.value)!==e[8][e[117]]&&w(n,e[8][e[117]])},d(e){e&&p(t),r()}}}function hr(e){let t,n,r,a,s=e[120]>0&&function(e){let t;return{c(){t=f("br")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}();function l(){e[70].call(n,e[117],e[120])}return{c(){s&&s.c(),t=h(),n=f("input"),x(n,"type","number"),x(n,"min","1"),x(n,"placeholder",r=e[115].casiers[e[120]].hauteur),C(n,"width","5em")},m(r,o,u){s&&s.m(r,o),c(r,t,o),c(r,n,o),w(n,e[9][e[117]][e[120]]),u&&a(),a=_(n,"input",l)},p(t,a){e=t,16&a[0]&&r!==(r=e[115].casiers[e[120]].hauteur)&&x(n,"placeholder",r),512&a[0]&&y(n.value)!==e[9][e[117]][e[120]]&&w(n,e[9][e[117]][e[120]])},d(e){s&&s.d(e),e&&p(t),e&&p(n),a()}}}function $r(e){let t,n=e[115].casiers,r=[];for(let t=0;t<n.length;t+=1)r[t]=hr(or(e,n,t));return{c(){t=f("td");for(let e=0;e<r.length;e+=1)r[e].c();x(t,"class","svelte-2d04f4")},m(e,n){c(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,a){if(528&a[0]){let s;for(n=e[115].casiers,s=0;s<n.length;s+=1){const l=or(e,n,s);r[s]?r[s].p(l,a):(r[s]=hr(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&p(t),d(r,e)}}}function _r(e){let t;return{c(){t=f("p"),t.textContent="Attention : trop de largeurs sont définies en même temps"},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function vr(e){let t,n,r,a,s;function l(...t){return e[73](e[120],e[117],...t)}function o(...t){return e[74](e[120],e[117],...t)}function u(...t){return e[75](e[120],e[117],...t)}function d(...t){return e[76](e[120],e[117],...t)}return{c(){t=f("label"),n=f("input"),x(n,"type","radio"),x(n,"name","selection-casier"),n.__value=r=`${e[117]},${e[120]}`,n.value=n.__value,x(n,"class","svelte-2d04f4"),e[72][0].push(n),x(t,"class",a="casier casier-"+e[117]+"-"+e[120]+" svelte-2d04f4"),C(t,"flex-grow",e[118].hauteur),j(t,"panneau-haut",0==e[120]?e[4].panneau_dessus:e[4].colonnes[e[117]].casiers[e[120]-1].panneau_dessous),j(t,"panneau-bas",e[120]<e[10][e[117]].casiers.length-1?e[4].colonnes[e[117]].casiers[e[120]].panneau_dessous:e[4].panneau_dessous),j(t,"panneau-gauche",e[4].montants[e[117]].panneaux.map(l).reduce(Tr,!0)),j(t,"panneau-droit",e[4].montants[e[117]+1].panneaux.map(o).reduce(Jr,!0)),j(t,"panneau-gauche-partiel",e[4].montants[e[117]].panneaux.map(u).reduce(Rr,!1)),j(t,"panneau-droit-partiel",e[4].montants[e[117]+1].panneaux.map(d).reduce(Br,!1)),j(t,"panneau-dos",e[4].colonnes[e[117]].casiers[e[120]].panneau_dos),j(t,"tiroir",e[4].colonnes[e[117]].casiers[e[120]].tiroir)},m(r,a,l){c(r,t,a),i(t,n),n.checked=n.__value===e[12],l&&s(),s=_(n,"change",e[71])},p(r,a){e=r,4096&a[0]&&(n.checked=n.__value===e[12]),16&a[0]&&C(t,"flex-grow",e[118].hauteur),16&a[0]&&j(t,"panneau-haut",0==e[120]?e[4].panneau_dessus:e[4].colonnes[e[117]].casiers[e[120]-1].panneau_dessous),1040&a[0]&&j(t,"panneau-bas",e[120]<e[10][e[117]].casiers.length-1?e[4].colonnes[e[117]].casiers[e[120]].panneau_dessous:e[4].panneau_dessous),16&a[0]&&j(t,"panneau-gauche",e[4].montants[e[117]].panneaux.map(l).reduce(Tr,!0)),16&a[0]&&j(t,"panneau-droit",e[4].montants[e[117]+1].panneaux.map(o).reduce(Jr,!0)),16&a[0]&&j(t,"panneau-gauche-partiel",e[4].montants[e[117]].panneaux.map(u).reduce(Rr,!1)),16&a[0]&&j(t,"panneau-droit-partiel",e[4].montants[e[117]+1].panneaux.map(d).reduce(Br,!1)),16&a[0]&&j(t,"panneau-dos",e[4].colonnes[e[117]].casiers[e[120]].panneau_dos),16&a[0]&&j(t,"tiroir",e[4].colonnes[e[117]].casiers[e[120]].tiroir)},d(r){r&&p(t),e[72][0].splice(e[72][0].indexOf(n),1),s()}}}function xr(e){let t,n,r,a=e[115].casiers,s=[];for(let t=0;t<a.length;t+=1)s[t]=vr(sr(e,a,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();n=h(),x(t,"class",r="colonne colonne-"+e[117]+" svelte-2d04f4")},m(e,r){c(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);i(t,n)},p(e,r){if(5136&r[0]){let l;for(a=e[115].casiers,l=0;l<a.length;l+=1){const o=sr(e,a,l);s[l]?s[l].p(o,r):(s[l]=vr(o),s[l].c(),s[l].m(t,n))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}},d(e){e&&p(t),d(s,e)}}}function yr(e){let t,n,r,a,s,l,o;return{c(){t=f("option"),t.textContent="Aucune",n=h(),r=f("option"),r.textContent="Recouvrement total",a=h(),s=f("option"),s.textContent="Recouvrement à moitié",l=h(),o=f("option"),o.textContent="Encastré",t.__value="",t.value=t.__value,r.__value="total",r.value=r.__value,s.__value="demi",s.value=s.__value,o.__value="encastre",o.value=o.__value},m(e,u){c(e,t,u),c(e,n,u),c(e,r,u),c(e,a,u),c(e,s,u),c(e,l,u),c(e,o,u)},d(e){e&&p(t),e&&p(n),e&&p(r),e&&p(a),e&&p(s),e&&p(l),e&&p(o)}}}function br(e,t){let n,r,a,s,l,o,u,d,m,$,_,v,x,y,w,z,k,j,q,P,S=t[17]+1+"",N=t[17]+1+"";function E(e){t[77].call(null,e)}let A={init:t[4].colonnes[t[17]].porte.type,$$slots:{default:[yr]},$$scope:{ctx:t}};void 0!==t[10][t[17]].porte.type&&(A.value=t[10][t[17]].porte.type);const F=new On({props:A});function O(e){t[78].call(null,e)}L.push(()=>te(F,"value",E));let M={tristate:!1,def:t[4].colonnes[t[17]].porte.double};void 0!==t[10][t[17]].porte.double&&(M.checked=t[10][t[17]].porte.double);const I=new be({props:M});return L.push(()=>te(I,"checked",O)),{key:e,first:null,c(){n=f("p"),r=f("strong"),a=g("Colonne n°"),s=g(S),l=h(),o=f("fieldset"),u=f("legend"),d=g("Porte colonne n°"),m=g(N),$=h(),_=f("label"),v=f("span"),v.textContent="Type : ",x=h(),ne(F.$$.fragment),w=h(),z=f("label"),ne(I.$$.fragment),j=g(" porte double"),q=h(),C(z,"display","none"),this.first=n},m(e,t){c(e,n,t),i(n,r),i(r,a),i(r,s),c(e,l,t),c(e,o,t),i(o,u),i(u,d),i(u,m),i(o,$),i(o,_),i(_,v),i(_,x),re(F,_,null),i(o,w),i(o,z),re(I,z,null),i(z,j),i(o,q),P=!0},p(e,t){(!P||131072&t[0])&&S!==(S=e[17]+1+"")&&b(s,S),(!P||131072&t[0])&&N!==(N=e[17]+1+"")&&b(m,N);const n={};131088&t[0]&&(n.init=e[4].colonnes[e[17]].porte.type),4&t[4]&&(n.$$scope={dirty:t,ctx:e}),!y&&132096&t[0]&&(y=!0,n.value=e[10][e[17]].porte.type,B(()=>y=!1)),F.$set(n);const r={};131088&t[0]&&(r.def=e[4].colonnes[e[17]].porte.double),!k&&132096&t[0]&&(k=!0,r.checked=e[10][e[17]].porte.double,B(()=>k=!1)),I.$set(r)},i(e){P||(V(F.$$.fragment,e),V(I.$$.fragment,e),P=!0)},o(e){Y(F.$$.fragment,e),Y(I.$$.fragment,e),P=!1},d(e){e&&p(n),e&&p(l),e&&p(o),ae(F),ae(I)}}}function wr(e){let t,n,r,a,s,l,o;return{c(){t=f("option"),t.textContent="Aucune",n=h(),r=f("option"),r.textContent="Recouvrement total",a=h(),s=f("option"),s.textContent="Recouvrement à moitié",l=h(),o=f("option"),o.textContent="Encastré",t.__value="",t.value=t.__value,r.__value="total",r.value=r.__value,s.__value="demi",s.value=s.__value,o.__value="encastre",o.value=o.__value},m(e,u){c(e,t,u),c(e,n,u),c(e,r,u),c(e,a,u),c(e,s,u),c(e,l,u),c(e,o,u)},d(e){e&&p(t),e&&p(n),e&&p(r),e&&p(a),e&&p(s),e&&p(l),e&&p(o)}}}function Cr(e){let t,n,r,a;function s(t){e[85].call(null,t)}let l={tristate:!1,def:e[4].colonnes[e[17]].casiers[e[18]-1].panneau_dessous};void 0!==e[10][e[17]].casiers[e[18]-1].panneau_dessous&&(l.checked=e[10][e[17]].casiers[e[18]-1].panneau_dessous);const o=new be({props:l});return L.push(()=>te(o,"checked",s)),{c(){t=f("label"),ne(o.$$.fragment),r=g(" panneau dessus")},m(e,n){c(e,t,n),re(o,t,null),i(t,r),a=!0},p(e,t){const r={};393232&t[0]&&(r.def=e[4].colonnes[e[17]].casiers[e[18]-1].panneau_dessous),!n&&394240&t[0]&&(n=!0,r.checked=e[10][e[17]].casiers[e[18]-1].panneau_dessous,B(()=>n=!1)),o.$set(r)},i(e){a||(V(o.$$.fragment,e),a=!0)},o(e){Y(o.$$.fragment,e),a=!1},d(e){e&&p(t),ae(o)}}}function zr(e){let t,n,r,a;function s(t){e[84].call(null,t)}let l={tristate:!1,def:e[4].panneau_dessus};void 0!==e[5].panneau_dessus&&(l.checked=e[5].panneau_dessus);const o=new be({props:l});return L.push(()=>te(o,"checked",s)),{c(){t=f("label"),ne(o.$$.fragment),r=g(" panneau dessus (tout le meuble)")},m(e,n){c(e,t,n),re(o,t,null),i(t,r),a=!0},p(e,t){const r={};16&t[0]&&(r.def=e[4].panneau_dessus),!n&&32&t[0]&&(n=!0,r.checked=e[5].panneau_dessus,B(()=>n=!1)),o.$set(r)},i(e){a||(V(o.$$.fragment,e),a=!0)},o(e){Y(o.$$.fragment,e),a=!1},d(e){e&&p(t),ae(o)}}}function kr(e){let t,n,r,a;function s(t){e[88].call(null,t)}let l={tristate:!1,def:e[4].panneau_dessous};void 0!==e[5].panneau_dessous&&(l.checked=e[5].panneau_dessous);const o=new be({props:l});return L.push(()=>te(o,"checked",s)),{c(){t=f("label"),ne(o.$$.fragment),r=g(" panneau dessous (tout le meuble)")},m(e,n){c(e,t,n),re(o,t,null),i(t,r),a=!0},p(e,t){const r={};16&t[0]&&(r.def=e[4].panneau_dessous),!n&&32&t[0]&&(n=!0,r.checked=e[5].panneau_dessous,B(()=>n=!1)),o.$set(r)},i(e){a||(V(o.$$.fragment,e),a=!0)},o(e){Y(o.$$.fragment,e),a=!1},d(e){e&&p(t),ae(o)}}}function jr(e){let t,n,r,a;function s(t){e[87].call(null,t)}let l={tristate:!1,def:e[4].colonnes[e[17]].casiers[e[18]].panneau_dessous};void 0!==e[10][e[17]].casiers[e[18]].panneau_dessous&&(l.checked=e[10][e[17]].casiers[e[18]].panneau_dessous);const o=new be({props:l});return L.push(()=>te(o,"checked",s)),{c(){t=f("label"),ne(o.$$.fragment),r=g(" panneau dessous")},m(e,n){c(e,t,n),re(o,t,null),i(t,r),a=!0},p(e,t){const r={};393232&t[0]&&(r.def=e[4].colonnes[e[17]].casiers[e[18]].panneau_dessous),!n&&394240&t[0]&&(n=!0,r.checked=e[10][e[17]].casiers[e[18]].panneau_dessous,B(()=>n=!1)),o.$set(r)},i(e){a||(V(o.$$.fragment,e),a=!0)},o(e){Y(o.$$.fragment,e),a=!1},d(e){e&&p(t),ae(o)}}}function qr(e){let t,n,r,a,s,l,o=e[111]+1+"";function u(t){e[89].call(null,t,e[111])}let d={tristate:!1,def:e[4].montants[e[17]].panneaux[e[111]].actif};void 0!==e[11][e[17]].panneaux_actifs[e[111]]&&(d.checked=e[11][e[17]].panneaux_actifs[e[111]]);const m=new be({props:d});return L.push(()=>te(m,"checked",u)),{c(){t=f("label"),ne(m.$$.fragment),r=g(" panneau gauche (n°"),a=g(o),s=g(")")},m(e,n){c(e,t,n),re(m,t,null),i(t,r),i(t,a),i(t,s),l=!0},p(t,r){e=t;const a={};131088&r[0]&&(a.def=e[4].montants[e[17]].panneaux[e[111]].actif),!n&&133120&r[0]&&(n=!0,a.checked=e[11][e[17]].panneaux_actifs[e[111]],B(()=>n=!1)),m.$set(a)},i(e){l||(V(m.$$.fragment,e),l=!0)},o(e){Y(m.$$.fragment,e),l=!1},d(e){e&&p(t),ae(m)}}}function Pr(e){let t,n,r=e[109].droite==e[18]&&qr(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[109].droite==e[18]?r?(r.p(e,n),393232&n[0]&&V(r,1)):(r=qr(e),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(X(),Y(r,1,1,()=>{r=null}),W())},i(e){n||(V(r),n=!0)},o(e){Y(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Sr(e){let t,n,r,a,s,l,o=e[111]+1+"";function u(t){e[90].call(null,t,e[111])}let d={tristate:!1,def:e[4].montants[e[17]+1].panneaux[e[111]].actif};void 0!==e[11][e[17]+1].panneaux_actifs[e[111]]&&(d.checked=e[11][e[17]+1].panneaux_actifs[e[111]]);const m=new be({props:d});return L.push(()=>te(m,"checked",u)),{c(){t=f("label"),ne(m.$$.fragment),r=g(" panneau droite (n°"),a=g(o),s=g(")")},m(e,n){c(e,t,n),re(m,t,null),i(t,r),i(t,a),i(t,s),l=!0},p(t,r){e=t;const a={};131088&r[0]&&(a.def=e[4].montants[e[17]+1].panneaux[e[111]].actif),!n&&133120&r[0]&&(n=!0,a.checked=e[11][e[17]+1].panneaux_actifs[e[111]],B(()=>n=!1)),m.$set(a)},i(e){l||(V(m.$$.fragment,e),l=!0)},o(e){Y(m.$$.fragment,e),l=!1},d(e){e&&p(t),ae(m)}}}function Nr(e){let t,n,r=e[109].gauche==e[18]&&Sr(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[109].gauche==e[18]?r?(r.p(e,n),393232&n[0]&&V(r,1)):(r=Sr(e),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(X(),Y(r,1,1,()=>{r=null}),W())},i(e){n||(V(r),n=!0)},o(e){Y(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Er(e,t){let n,r,a,s,l,o,u,m,$,_,v,x,y,w,C,z,k,j,q,P,S,N,E,A,F,O,M,I,T,J,R,U,D,H,Q,Z,G,K,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,ge,$e,_e,ve,xe,ye,we,Ce,ze,ke,je,qe,Pe,Se,Ne,Ee,Ae,Fe,Oe,Le=t[18]+1+"",Me=t[17]+1+"",Ie=t[18]+1+"",Te=t[17]+1+"",Je=t[18]+1+"",Re=t[17]+1+"",Be=t[18]+1+"",Ue=t[17]+1+"",De=t[18]+1+"";function He(e){t[79].call(null,e)}let Qe={init:t[4].colonnes[t[17]].casiers[t[18]].porte.type,$$slots:{default:[wr]},$$scope:{ctx:t}};void 0!==t[10][t[17]].casiers[t[18]].porte.type&&(Qe.value=t[10][t[17]].casiers[t[18]].porte.type);const Ze=new On({props:Qe});function Ge(e){t[80].call(null,e)}L.push(()=>te(Ze,"value",He));let Xe={tristate:!1,def:t[4].colonnes[t[17]].casiers[t[18]].porte.double};void 0!==t[10][t[17]].casiers[t[18]].porte.double&&(Xe.checked=t[10][t[17]].casiers[t[18]].porte.double);const We=new be({props:Xe});function Ve(e){t[81].call(null,e)}L.push(()=>te(We,"checked",Ge));let Ye={tristate:!1,def:t[4].colonnes[t[17]].casiers[t[18]].porte.facade};void 0!==t[10][t[17]].casiers[t[18]].porte.facade&&(Ye.checked=t[10][t[17]].casiers[t[18]].porte.facade);const Ke=new be({props:Ye});function et(e){t[82].call(null,e)}L.push(()=>te(Ke,"checked",Ve));let tt={def:t[4].colonnes[t[17]].casiers[t[18]].num_etageres};void 0!==t[10][t[17]].casiers[t[18]].num_etageres&&(tt.value=t[10][t[17]].casiers[t[18]].num_etageres);const nt=new he({props:tt});function rt(e){t[83].call(null,e)}L.push(()=>te(nt,"value",et));let at={tristate:!1,def:t[4].colonnes[t[17]].casiers[t[18]].tiroir};void 0!==t[10][t[17]].casiers[t[18]].tiroir&&(at.checked=t[10][t[17]].casiers[t[18]].tiroir);const st=new be({props:at});L.push(()=>te(st,"checked",rt));const lt=[zr,Cr],ot=[];function ut(e,t){return 0==e[18]?0:1}function it(e){t[86].call(null,e)}we=ut(t),Ce=ot[we]=lt[we](t);let ct={tristate:!1,def:t[4].colonnes[t[17]].casiers[t[18]].panneau_dos};void 0!==t[10][t[17]].casiers[t[18]].panneau_dos&&(ct.checked=t[10][t[17]].casiers[t[18]].panneau_dos);const pt=new be({props:ct});L.push(()=>te(pt,"checked",it));const dt=[jr,kr],ft=[];function mt(e,t){return e[18]<e[10][e[17]].casiers.length-1?0:1}Se=mt(t),Ne=ft[Se]=dt[Se](t);let gt=t[4].montants[t[17]].panneaux,ht=[];for(let e=0;e<gt.length;e+=1)ht[e]=Pr(nr(t,gt,e));const $t=e=>Y(ht[e],1,1,()=>{ht[e]=null});let _t=t[4].montants[t[17]+1].panneaux,vt=[];for(let e=0;e<_t.length;e+=1)vt[e]=Nr(tr(t,_t,e));const xt=e=>Y(vt[e],1,1,()=>{vt[e]=null});return{key:e,first:null,c(){n=f("p"),r=f("strong"),a=g("Casier n° "),s=g(Le),l=h(),o=f("fieldset"),u=f("legend"),m=g("Porte col°"),$=g(Me),_=g(" cas°"),v=g(Ie),x=h(),y=f("label"),w=f("span"),w.textContent="Type : ",C=h(),ne(Ze.$$.fragment),k=h(),j=f("label"),ne(We.$$.fragment),P=g(" porte double"),S=h(),N=f("label"),ne(Ke.$$.fragment),A=g(" façade seulement"),F=h(),O=f("fieldset"),M=f("legend"),I=g("Étagère col°"),T=g(Te),J=g(" cas°"),R=g(Je),U=h(),D=f("label"),H=f("span"),H.textContent="Nombre d'étagères",Q=h(),ne(nt.$$.fragment),G=h(),K=f("fieldset"),ee=f("legend"),se=g("Tiroir col°"),le=g(Re),oe=g(" cas°"),ue=g(Be),ie=h(),ce=f("label"),ne(st.$$.fragment),de=g(" tiroir"),fe=h(),me=f("fieldset"),ge=f("legend"),$e=g("Panneaux col°"),_e=g(Ue),ve=g(" cas°"),xe=g(De),ye=h(),Ce.c(),ze=h(),ke=f("label"),ne(pt.$$.fragment),qe=g(" panneau dos"),Pe=h(),Ne.c(),Ee=h();for(let e=0;e<ht.length;e+=1)ht[e].c();Ae=h();for(let e=0;e<vt.length;e+=1)vt[e].c();Fe=h(),this.first=n},m(e,t){c(e,n,t),i(n,r),i(r,a),i(r,s),c(e,l,t),c(e,o,t),i(o,u),i(u,m),i(u,$),i(u,_),i(u,v),i(o,x),i(o,y),i(y,w),i(y,C),re(Ze,y,null),i(y,k),i(y,j),re(We,j,null),i(j,P),i(y,S),i(y,N),re(Ke,N,null),i(N,A),c(e,F,t),c(e,O,t),i(O,M),i(M,I),i(M,T),i(M,J),i(M,R),i(O,U),i(O,D),i(D,H),i(D,Q),re(nt,D,null),c(e,G,t),c(e,K,t),i(K,ee),i(ee,se),i(ee,le),i(ee,oe),i(ee,ue),i(K,ie),i(K,ce),re(st,ce,null),i(ce,de),c(e,fe,t),c(e,me,t),i(me,ge),i(ge,$e),i(ge,_e),i(ge,ve),i(ge,xe),i(me,ye),ot[we].m(me,null),i(me,ze),i(me,ke),re(pt,ke,null),i(ke,qe),i(me,Pe),ft[Se].m(me,null),i(me,Ee);for(let e=0;e<ht.length;e+=1)ht[e].m(me,null);i(me,Ae);for(let e=0;e<vt.length;e+=1)vt[e].m(me,null);i(me,Fe),Oe=!0},p(e,t){(!Oe||262144&t[0])&&Le!==(Le=e[18]+1+"")&&b(s,Le),(!Oe||131072&t[0])&&Me!==(Me=e[17]+1+"")&&b($,Me),(!Oe||262144&t[0])&&Ie!==(Ie=e[18]+1+"")&&b(v,Ie);const n={};393232&t[0]&&(n.init=e[4].colonnes[e[17]].casiers[e[18]].porte.type),4&t[4]&&(n.$$scope={dirty:t,ctx:e}),!z&&394240&t[0]&&(z=!0,n.value=e[10][e[17]].casiers[e[18]].porte.type,B(()=>z=!1)),Ze.$set(n);const r={};393232&t[0]&&(r.def=e[4].colonnes[e[17]].casiers[e[18]].porte.double),!q&&394240&t[0]&&(q=!0,r.checked=e[10][e[17]].casiers[e[18]].porte.double,B(()=>q=!1)),We.$set(r);const a={};393232&t[0]&&(a.def=e[4].colonnes[e[17]].casiers[e[18]].porte.facade),!E&&394240&t[0]&&(E=!0,a.checked=e[10][e[17]].casiers[e[18]].porte.facade,B(()=>E=!1)),Ke.$set(a),(!Oe||131072&t[0])&&Te!==(Te=e[17]+1+"")&&b(T,Te),(!Oe||262144&t[0])&&Je!==(Je=e[18]+1+"")&&b(R,Je);const l={};393232&t[0]&&(l.def=e[4].colonnes[e[17]].casiers[e[18]].num_etageres),!Z&&394240&t[0]&&(Z=!0,l.value=e[10][e[17]].casiers[e[18]].num_etageres,B(()=>Z=!1)),nt.$set(l),(!Oe||131072&t[0])&&Re!==(Re=e[17]+1+"")&&b(le,Re),(!Oe||262144&t[0])&&Be!==(Be=e[18]+1+"")&&b(ue,Be);const o={};393232&t[0]&&(o.def=e[4].colonnes[e[17]].casiers[e[18]].tiroir),!pe&&394240&t[0]&&(pe=!0,o.checked=e[10][e[17]].casiers[e[18]].tiroir,B(()=>pe=!1)),st.$set(o),(!Oe||131072&t[0])&&Ue!==(Ue=e[17]+1+"")&&b(_e,Ue),(!Oe||262144&t[0])&&De!==(De=e[18]+1+"")&&b(xe,De);let u=we;we=ut(e),we===u?ot[we].p(e,t):(X(),Y(ot[u],1,1,()=>{ot[u]=null}),W(),Ce=ot[we],Ce||(Ce=ot[we]=lt[we](e),Ce.c()),V(Ce,1),Ce.m(me,ze));const i={};393232&t[0]&&(i.def=e[4].colonnes[e[17]].casiers[e[18]].panneau_dos),!je&&394240&t[0]&&(je=!0,i.checked=e[10][e[17]].casiers[e[18]].panneau_dos,B(()=>je=!1)),pt.$set(i);let c=Se;if(Se=mt(e),Se===c?ft[Se].p(e,t):(X(),Y(ft[c],1,1,()=>{ft[c]=null}),W(),Ne=ft[Se],Ne||(Ne=ft[Se]=dt[Se](e),Ne.c()),V(Ne,1),Ne.m(me,Ee)),395280&t[0]){let n;for(gt=e[4].montants[e[17]].panneaux,n=0;n<gt.length;n+=1){const r=nr(e,gt,n);ht[n]?(ht[n].p(r,t),V(ht[n],1)):(ht[n]=Pr(r),ht[n].c(),V(ht[n],1),ht[n].m(me,Ae))}for(X(),n=gt.length;n<ht.length;n+=1)$t(n);W()}if(395280&t[0]){let n;for(_t=e[4].montants[e[17]+1].panneaux,n=0;n<_t.length;n+=1){const r=tr(e,_t,n);vt[n]?(vt[n].p(r,t),V(vt[n],1)):(vt[n]=Nr(r),vt[n].c(),V(vt[n],1),vt[n].m(me,Fe))}for(X(),n=_t.length;n<vt.length;n+=1)xt(n);W()}},i(e){if(!Oe){V(Ze.$$.fragment,e),V(We.$$.fragment,e),V(Ke.$$.fragment,e),V(nt.$$.fragment,e),V(st.$$.fragment,e),V(Ce),V(pt.$$.fragment,e),V(Ne);for(let e=0;e<gt.length;e+=1)V(ht[e]);for(let e=0;e<_t.length;e+=1)V(vt[e]);Oe=!0}},o(e){Y(Ze.$$.fragment,e),Y(We.$$.fragment,e),Y(Ke.$$.fragment,e),Y(nt.$$.fragment,e),Y(st.$$.fragment,e),Y(Ce),Y(pt.$$.fragment,e),Y(Ne),ht=ht.filter(Boolean);for(let e=0;e<ht.length;e+=1)Y(ht[e]);vt=vt.filter(Boolean);for(let e=0;e<vt.length;e+=1)Y(vt[e]);Oe=!1},d(e){e&&p(n),e&&p(l),e&&p(o),ae(Ze),ae(We),ae(Ke),e&&p(F),e&&p(O),ae(nt),e&&p(G),e&&p(K),ae(st),e&&p(fe),e&&p(me),ot[we].d(),ae(pt),ft[Se].d(),d(ht,e),d(vt,e)}}}function Ar(e){let t,n,r,a,s,l,o,u,m,$,v,b,C,z,k,q,P,S,N,E,A,F,O,M,I,T,J,R,U,D,H,Q,Z,G,se,le,oe,ue,ie,ce,pe,de,fe,me,ge,$e,_e,ve,xe,ye,be,we,Ce,ze,ke,je,qe,Pe,Se,Ne,Ee,Ae,Fe,Oe,Le,Me,Ie,Te,Je,Re,Be,Ue,De,He,Qe,Ze,Ge,Xe,We,Ve,Ye,Ke,et,tt,nt,rt,at,st,lt,ot,ut,it,ct,pt,dt,ft,mt,gt,ht,$t,_t,vt,xt,yt,bt,wt,Ct,zt=e[7].filter(Ir).length==e[7].length,kt=[],jt=new Map,qt=[],Pt=new Map;function St(t){e[64].call(null,t)}let Nt={min:"0",def:e[20].hauteur};void 0!==e[5].hauteur&&(Nt.value=e[5].hauteur);const Et=new he({props:Nt});function At(t){e[65].call(null,t)}L.push(()=>te(Et,"value",St));let Ft={min:"0",def:e[20].largeur};void 0!==e[5].largeur&&(Ft.value=e[5].largeur);const Ot=new he({props:Ft});function Lt(t){e[66].call(null,t)}L.push(()=>te(Ot,"value",At));let Mt={min:"0",def:e[20].profondeur};void 0!==e[5].profondeur&&(Mt.value=e[5].profondeur);const It=new he({props:Mt});L.push(()=>te(It,"value",Lt));let Tt=e[4].colonnes,Jt=[];for(let t=0;t<Tt.length;t+=1)Jt[t]=fr(pr(e,Tt,t));let Rt=e[4].colonnes,Bt=[];for(let t=0;t<Rt.length;t+=1)Bt[t]=mr(cr(e,Rt,t));let Ut=e[4].colonnes,Dt=[];for(let t=0;t<Ut.length;t+=1)Dt[t]=gr(ir(e,Ut,t));let Ht=e[4].colonnes,Qt=[];for(let t=0;t<Ht.length;t+=1)Qt[t]=$r(ur(e,Ht,t));let Zt=zt&&_r(),Gt=e[4].colonnes,Xt=[];for(let t=0;t<Gt.length;t+=1)Xt[t]=xr(lr(e,Gt,t));let Wt=[e[19]];const Vt=e=>e[106].key;for(let t=0;t<1;t+=1){let n=ar(e,Wt,t),r=Vt(n);jt.set(r,kt[t]=br(r,n))}let Yt=[e[19]];const Kt=e=>e[106].key;for(let t=0;t<1;t+=1){let n=rr(e,Yt,t),r=Kt(n);Pt.set(r,qt[t]=Er(r,n))}function en(t){e[91].call(null,t)}let tn={def:e[4].epaisseur_montants,min:"0"};void 0!==e[5].epaisseur_montants&&(tn.value=e[5].epaisseur_montants);const nn=new he({props:tn});function rn(t){e[92].call(null,t)}L.push(()=>te(nn,"value",en));let an={def:e[4].largeur_montants,min:"0"};void 0!==e[5].largeur_montants&&(an.value=e[5].largeur_montants);const sn=new he({props:an});function ln(t){e[93].call(null,t)}L.push(()=>te(sn,"value",rn));let on={def:e[4].largeur_traverses,min:"0"};void 0!==e[5].largeur_traverses&&(on.value=e[5].largeur_traverses);const un=new he({props:on});function cn(t){e[94].call(null,t)}L.push(()=>te(un,"value",ln));let pn={def:e[4].profondeur_tenons_cotes,min:"0"};void 0!==e[5].profondeur_tenons_cotes&&(pn.value=e[5].profondeur_tenons_cotes);const dn=new he({props:pn});function fn(t){e[95].call(null,t)}L.push(()=>te(dn,"value",cn));let mn={def:e[4].profondeur_tenons,min:"0"};void 0!==e[5].profondeur_tenons&&(mn.value=e[5].profondeur_tenons);const gn=new he({props:mn});function hn(t){e[96].call(null,t)}L.push(()=>te(gn,"value",fn));let $n={def:e[4].epaisseur_panneau,min:"0"};void 0!==e[5].epaisseur_panneau&&($n.value=e[5].epaisseur_panneau);const _n=new he({props:$n});function vn(t){e[97].call(null,t)}L.push(()=>te(_n,"value",hn));let xn={def:e[4].profondeur_rainure,min:"0"};void 0!==e[5].profondeur_rainure&&(xn.value=e[5].profondeur_rainure);const yn=new he({props:xn});function bn(t){e[98].call(null,t)}L.push(()=>te(yn,"value",vn));let wn={def:e[4].jeu_rainure,min:"0"};void 0!==e[5].jeu_rainure&&(wn.value=e[5].jeu_rainure);const Cn=new he({props:wn});function zn(t){e[99].call(null,t)}L.push(()=>te(Cn,"value",bn));let kn={def:e[4].montants_inter_longueur_tenon,min:"0"};void 0!==e[5].montants_inter_longueur_tenon&&(kn.value=e[5].montants_inter_longueur_tenon);const jn=new he({props:kn});return L.push(()=>te(jn,"value",zn)),{c(){t=f("div"),n=f("h3"),n.textContent="Mesures",r=h(),a=f("form"),s=f("label"),l=f("span"),l.textContent="Hauteur    : ",ne(Et.$$.fragment),u=g(" mm"),m=h(),$=f("label"),v=f("span"),v.textContent="Largeur    : ",ne(Ot.$$.fragment),C=g(" mm"),z=h(),k=f("label"),q=f("span"),q.textContent="Profondeur : ",ne(It.$$.fragment),S=g(" mm"),N=h(),E=f("label"),A=f("span"),A.textContent="Colonnes   : ",F=f("input"),O=h(),M=f("table"),I=f("tr"),T=f("td"),J=h();for(let e=0;e<Jt.length;e+=1)Jt[e].c();R=h(),U=f("tr"),D=f("td"),D.textContent="Largeur intérieure : ",H=h();for(let e=0;e<Bt.length;e+=1)Bt[e].c();Q=h(),Z=f("td"),Z.textContent="mm",G=h(),se=f("tr"),le=f("td"),le.textContent="Casiers : ",oe=h();for(let e=0;e<Dt.length;e+=1)Dt[e].c();ue=h(),ie=f("td"),ce=h(),pe=f("tr"),de=f("td"),de.textContent="Hauteur intérieure : ",fe=h();for(let e=0;e<Qt.length;e+=1)Qt[e].c();me=h(),ge=f("td"),$e=h(),Zt&&Zt.c(),_e=h(),ve=f("hr"),xe=h(),ye=f("div"),be=f("div");for(let e=0;e<Xt.length;e+=1)Xt[e].c();we=h(),Ce=f("div");for(let e=0;e<1;e+=1)kt[e].c();ze=h(),ke=f("div");for(let e=0;e<1;e+=1)qt[e].c();je=h(),qe=f("hr"),Pe=h(),Se=f("label"),Ne=f("span"),Ne.textContent="Épaisseur montants et traverses : ",ne(nn.$$.fragment),Ae=g(" mm"),Fe=h(),Oe=f("label"),Le=f("span"),Le.textContent="Largeur montants : ",ne(sn.$$.fragment),Ie=g(" mm"),Te=h(),Je=f("label"),Re=f("span"),Re.textContent="Largeur traverses : ",ne(un.$$.fragment),Ue=g(" mm"),De=h(),He=f("label"),Qe=f("span"),Qe.textContent="Profondeur tenons cotés : ",ne(dn.$$.fragment),Ge=g(" mm"),Xe=h(),We=f("label"),Ve=f("span"),Ve.textContent="Profondeur tenons : ",ne(gn.$$.fragment),Ke=g(" mm"),et=h(),tt=f("hr"),nt=h(),rt=f("label"),at=f("span"),at.textContent="Épaisseur panneau : ",ne(_n.$$.fragment),lt=g(" mm"),ot=h(),ut=f("label"),it=f("span"),it.textContent="Profondeur rainure : ",ne(yn.$$.fragment),pt=g(" mm"),dt=h(),ft=f("label"),mt=f("span"),mt.textContent="Jeu panneau / rainure : ",ne(Cn.$$.fragment),ht=g(" mm"),$t=h(),_t=f("label"),vt=f("span"),vt.textContent="Longueur tenons cloisons :",xt=h(),ne(jn.$$.fragment),bt=g(" mm"),x(l,"class","svelte-2d04f4"),x(s,"class","svelte-2d04f4"),x(v,"class","svelte-2d04f4"),x($,"class","svelte-2d04f4"),x(q,"class","svelte-2d04f4"),x(k,"class","svelte-2d04f4"),x(A,"class","svelte-2d04f4"),x(F,"type","number"),x(F,"min","1"),x(F,"class","svelte-2d04f4"),x(E,"class","svelte-2d04f4"),x(T,"class","svelte-2d04f4"),x(D,"class","svelte-2d04f4"),x(Z,"class","svelte-2d04f4"),x(le,"class","svelte-2d04f4"),x(ie,"class","svelte-2d04f4"),x(de,"class","svelte-2d04f4"),x(ge,"class","svelte-2d04f4"),x(be,"class","meuble svelte-2d04f4"),j(be,"panneau-haut",e[4].panneau_dessus),j(be,"panneau-bas",e[4].panneau_dessous),x(Ce,"class","svelte-2d04f4"),x(ke,"class","svelte-2d04f4"),x(ye,"class","prefs-casier svelte-2d04f4"),x(Ne,"class","svelte-2d04f4"),x(Se,"class","svelte-2d04f4"),x(Le,"class","svelte-2d04f4"),x(Oe,"class","svelte-2d04f4"),x(Re,"class","svelte-2d04f4"),x(Je,"class","svelte-2d04f4"),x(Qe,"class","svelte-2d04f4"),x(He,"class","svelte-2d04f4"),x(Ve,"class","svelte-2d04f4"),x(We,"class","svelte-2d04f4"),x(at,"class","svelte-2d04f4"),x(rt,"class","svelte-2d04f4"),x(it,"class","svelte-2d04f4"),x(ut,"class","svelte-2d04f4"),x(mt,"class","svelte-2d04f4"),x(ft,"class","svelte-2d04f4"),x(vt,"class","svelte-2d04f4"),x(_t,"class","svelte-2d04f4"),x(a,"class","svelte-2d04f4"),x(t,"class","main svelte-2d04f4"),x(t,"slot","dim")},m(o,p,d){c(o,t,p),i(t,n),i(t,r),i(t,a),i(a,s),i(s,l),re(Et,s,null),i(s,u),i(a,m),i(a,$),i($,v),re(Ot,$,null),i($,C),i(a,z),i(a,k),i(k,q),re(It,k,null),i(k,S),i(a,N),i(a,E),i(E,A),i(E,F),w(F,e[6]),i(a,O),i(a,M),i(M,I),i(I,T),i(I,J);for(let e=0;e<Jt.length;e+=1)Jt[e].m(I,null);i(M,R),i(M,U),i(U,D),i(U,H);for(let e=0;e<Bt.length;e+=1)Bt[e].m(U,null);i(U,Q),i(U,Z),i(M,G),i(M,se),i(se,le),i(se,oe);for(let e=0;e<Dt.length;e+=1)Dt[e].m(se,null);i(se,ue),i(se,ie),i(M,ce),i(M,pe),i(pe,de),i(pe,fe);for(let e=0;e<Qt.length;e+=1)Qt[e].m(pe,null);i(pe,me),i(pe,ge),i(a,$e),Zt&&Zt.m(a,null),i(a,_e),i(a,ve),i(a,xe),i(a,ye),i(ye,be);for(let e=0;e<Xt.length;e+=1)Xt[e].m(be,null);i(ye,we),i(ye,Ce);for(let e=0;e<1;e+=1)kt[e].m(Ce,null);i(ye,ze),i(ye,ke);for(let e=0;e<1;e+=1)qt[e].m(ke,null);i(a,je),i(a,qe),i(a,Pe),i(a,Se),i(Se,Ne),re(nn,Se,null),i(Se,Ae),i(a,Fe),i(a,Oe),i(Oe,Le),re(sn,Oe,null),i(Oe,Ie),i(a,Te),i(a,Je),i(Je,Re),re(un,Je,null),i(Je,Ue),i(a,De),i(a,He),i(He,Qe),re(dn,He,null),i(He,Ge),i(a,Xe),i(a,We),i(We,Ve),re(gn,We,null),i(We,Ke),i(a,et),i(a,tt),i(a,nt),i(a,rt),i(rt,at),re(_n,rt,null),i(rt,lt),i(a,ot),i(a,ut),i(ut,it),re(yn,ut,null),i(ut,pt),i(a,dt),i(a,ft),i(ft,mt),re(Cn,ft,null),i(ft,ht),i(a,$t),i(a,_t),i(_t,vt),i(_t,xt),re(jn,_t,null),i(_t,bt),wt=!0,d&&Ct(),Ct=_(F,"input",e[67])},p(e,t){const n={};!o&&32&t[0]&&(o=!0,n.value=e[5].hauteur,B(()=>o=!1)),Et.$set(n);const r={};!b&&32&t[0]&&(b=!0,r.value=e[5].largeur,B(()=>b=!1)),Ot.$set(r);const s={};if(!P&&32&t[0]&&(P=!0,s.value=e[5].profondeur,B(()=>P=!1)),It.$set(s),64&t[0]&&y(F.value)!==e[6]&&w(F,e[6]),16&t[0]){let n;for(Tt=e[4].colonnes,n=0;n<Tt.length;n+=1){const r=pr(e,Tt,n);Jt[n]?Jt[n].p(r,t):(Jt[n]=fr(r),Jt[n].c(),Jt[n].m(I,null))}for(;n<Jt.length;n+=1)Jt[n].d(1);Jt.length=Tt.length}if(144&t[0]){let n;for(Rt=e[4].colonnes,n=0;n<Rt.length;n+=1){const r=cr(e,Rt,n);Bt[n]?Bt[n].p(r,t):(Bt[n]=mr(r),Bt[n].c(),Bt[n].m(U,Q))}for(;n<Bt.length;n+=1)Bt[n].d(1);Bt.length=Rt.length}if(272&t[0]){let n;for(Ut=e[4].colonnes,n=0;n<Ut.length;n+=1){const r=ir(e,Ut,n);Dt[n]?Dt[n].p(r,t):(Dt[n]=gr(r),Dt[n].c(),Dt[n].m(se,ue))}for(;n<Dt.length;n+=1)Dt[n].d(1);Dt.length=Ut.length}if(528&t[0]){let n;for(Ht=e[4].colonnes,n=0;n<Ht.length;n+=1){const r=ur(e,Ht,n);Qt[n]?Qt[n].p(r,t):(Qt[n]=$r(r),Qt[n].c(),Qt[n].m(pe,me))}for(;n<Qt.length;n+=1)Qt[n].d(1);Qt.length=Ht.length}if(128&t[0]&&(zt=e[7].filter(Ir).length==e[7].length),zt?Zt||(Zt=_r(),Zt.c(),Zt.m(a,_e)):Zt&&(Zt.d(1),Zt=null),5136&t[0]){let n;for(Gt=e[4].colonnes,n=0;n<Gt.length;n+=1){const r=lr(e,Gt,n);Xt[n]?Xt[n].p(r,t):(Xt[n]=xr(r),Xt[n].c(),Xt[n].m(be,null))}for(;n<Xt.length;n+=1)Xt[n].d(1);Xt.length=Gt.length}if(16&t[0]&&j(be,"panneau-haut",e[4].panneau_dessus),16&t[0]&&j(be,"panneau-bas",e[4].panneau_dessous),656400&t[0]){const n=[e[19]];X(),kt=ee(kt,t,Vt,1,e,n,jt,Ce,K,br,null,ar),W()}if(920624&t[0]){const n=[e[19]];X(),qt=ee(qt,t,Kt,1,e,n,Pt,ke,K,Er,null,rr),W()}const l={};16&t[0]&&(l.def=e[4].epaisseur_montants),!Ee&&32&t[0]&&(Ee=!0,l.value=e[5].epaisseur_montants,B(()=>Ee=!1)),nn.$set(l);const u={};16&t[0]&&(u.def=e[4].largeur_montants),!Me&&32&t[0]&&(Me=!0,u.value=e[5].largeur_montants,B(()=>Me=!1)),sn.$set(u);const i={};16&t[0]&&(i.def=e[4].largeur_traverses),!Be&&32&t[0]&&(Be=!0,i.value=e[5].largeur_traverses,B(()=>Be=!1)),un.$set(i);const c={};16&t[0]&&(c.def=e[4].profondeur_tenons_cotes),!Ze&&32&t[0]&&(Ze=!0,c.value=e[5].profondeur_tenons_cotes,B(()=>Ze=!1)),dn.$set(c);const p={};16&t[0]&&(p.def=e[4].profondeur_tenons),!Ye&&32&t[0]&&(Ye=!0,p.value=e[5].profondeur_tenons,B(()=>Ye=!1)),gn.$set(p);const d={};16&t[0]&&(d.def=e[4].epaisseur_panneau),!st&&32&t[0]&&(st=!0,d.value=e[5].epaisseur_panneau,B(()=>st=!1)),_n.$set(d);const f={};16&t[0]&&(f.def=e[4].profondeur_rainure),!ct&&32&t[0]&&(ct=!0,f.value=e[5].profondeur_rainure,B(()=>ct=!1)),yn.$set(f);const m={};16&t[0]&&(m.def=e[4].jeu_rainure),!gt&&32&t[0]&&(gt=!0,m.value=e[5].jeu_rainure,B(()=>gt=!1)),Cn.$set(m);const g={};16&t[0]&&(g.def=e[4].montants_inter_longueur_tenon),!yt&&32&t[0]&&(yt=!0,g.value=e[5].montants_inter_longueur_tenon,B(()=>yt=!1)),jn.$set(g)},i(e){if(!wt){V(Et.$$.fragment,e),V(Ot.$$.fragment,e),V(It.$$.fragment,e);for(let e=0;e<1;e+=1)V(kt[e]);for(let e=0;e<1;e+=1)V(qt[e]);V(nn.$$.fragment,e),V(sn.$$.fragment,e),V(un.$$.fragment,e),V(dn.$$.fragment,e),V(gn.$$.fragment,e),V(_n.$$.fragment,e),V(yn.$$.fragment,e),V(Cn.$$.fragment,e),V(jn.$$.fragment,e),wt=!0}},o(e){Y(Et.$$.fragment,e),Y(Ot.$$.fragment,e),Y(It.$$.fragment,e);for(let e=0;e<1;e+=1)Y(kt[e]);for(let e=0;e<1;e+=1)Y(qt[e]);Y(nn.$$.fragment,e),Y(sn.$$.fragment,e),Y(un.$$.fragment,e),Y(dn.$$.fragment,e),Y(gn.$$.fragment,e),Y(_n.$$.fragment,e),Y(yn.$$.fragment,e),Y(Cn.$$.fragment,e),Y(jn.$$.fragment,e),wt=!1},d(e){e&&p(t),ae(Et),ae(Ot),ae(It),d(Jt,e),d(Bt,e),d(Dt,e),d(Qt,e),Zt&&Zt.d(),d(Xt,e);for(let e=0;e<1;e+=1)kt[e].d();for(let e=0;e<1;e+=1)qt[e].d();ae(nn),ae(sn),ae(un),ae(dn),ae(gn),ae(_n),ae(yn),ae(Cn),ae(jn),Ct()}}}function Fr(e){let t,n,r,a;function s(t){e[100].call(null,t)}function l(t){e[101].call(null,t)}let o={children:e[14],childrenState:e[3],defaultChildrenPos:e[14].map(Ur)};void 0!==e[13]&&(o.childrenPos=e[13]),void 0!==e[16]&&(o.pieces=e[16]);const u=new Rt({props:o});return L.push(()=>te(u,"childrenPos",s)),L.push(()=>te(u,"pieces",l)),{c(){t=f("div"),ne(u.$$.fragment),x(t,"slot","children"),x(t,"class","svelte-2d04f4")},m(e,n){c(e,t,n),re(u,t,null),a=!0},p(e,t){const a={};16384&t[0]&&(a.children=e[14]),8&t[0]&&(a.childrenState=e[3]),16384&t[0]&&(a.defaultChildrenPos=e[14].map(Ur)),!n&&8192&t[0]&&(n=!0,a.childrenPos=e[13],B(()=>n=!1)),!r&&65536&t[0]&&(r=!0,a.pieces=e[16],B(()=>r=!1)),u.$set(a)},i(e){a||(V(u.$$.fragment,e),a=!0)},o(e){Y(u.$$.fragment,e),a=!1},d(e){e&&p(t),ae(u)}}}function Or(e){let t,n;const r=new bn({props:{pieces:new mt(e[15],"Caisson "+e[1].name,"Caisson")}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","tables"),x(t,"class","svelte-2d04f4")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};32770&t[0]&&(n.pieces=new mt(e[15],"Caisson "+e[1].name,"Caisson")),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function Lr(t){let n,r,a;return{c(){n=h(),r=h(),a=h()},m(e,t){c(e,n,t),c(e,r,t),c(e,a,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r),e&&p(a)}}}function Mr(e){let t,n,r,a;function s(t){e[102].call(null,t)}function l(t){e[103].call(null,t)}function o(t){e[104].call(null,t)}let u={path:e[0],state:e[2],$$slots:{default:[Lr],tables:[Or],children:[Fr],dim:[Ar],plan:[dr]},$$scope:{ctx:e}};void 0!==e[1]&&(u.data=e[1]),void 0!==e[3]&&(u.childrenState=e[3]),void 0!==e[14]&&(u.children=e[14]);const i=new Et({props:u});return L.push(()=>te(i,"data",s)),L.push(()=>te(i,"childrenState",l)),L.push(()=>te(i,"children",o)),i.$on("datachange",e[105]),{c(){ne(i.$$.fragment)},m(e,t){re(i,e,t),a=!0},p(e,a){const s={};1&a[0]&&(s.path=e[0]),4&a[0]&&(s.state=e[2]),1048570&a[0]|4&a[4]&&(s.$$scope={dirty:a,ctx:e}),!t&&2&a[0]&&(t=!0,s.data=e[1],B(()=>t=!1)),!n&&8&a[0]&&(n=!0,s.childrenState=e[3],B(()=>n=!1)),!r&&16384&a[0]&&(r=!0,s.children=e[14],B(()=>r=!1)),i.$set(s)},i(e){a||(V(i.$$.fragment,e),a=!0)},o(e){Y(i.$$.fragment,e),a=!1},d(e){ae(i,e)}}}const Ir=e=>e&&0!=e,Tr=(e,t)=>e&&t,Jr=(e,t)=>e&&t,Rr=(e,t)=>e||t,Br=(e,t)=>e||t,Ur=e=>e.defaultPosition;function Dr(e,t,n){let{path:r}=t,{initdata:a={}}=t,s={...a},l={type:"contre-profil",largeur:400,hauteur:600,profondeur:300,epaisseur_montants:24,largeur_montants:50,largeur_traverses:50,profondeur_tenons_cotes:30,profondeur_tenons:20,profondeur_rainure:10,jeu_rainure:1,epaisseur_panneau:16,panneau_dessus:!0,panneau_dessous:!0,montants_inter_longueur_tenon:20,montants:[{},{}],colonnes:[{porte:{},casiers:[{tiroir:!1,panneau_dessous:!0,panneau_dos:!0}]}],...a.defaults},o={},u=[],i={...l,...a.opt};i.profondeur_tenons_intermediaire&&(i.profondeur_tenons_cotes=i.profondeur_tenons,i.profondeur_tenons=i.profondeur_tenons_intermediaire,delete i.profondeur_tenons_intermediaire),i.hauteur_traverses&&(i.largeur_traverses=i.hauteur_traverse,delete i.hauteur_traverses);let c={...a.ui||a.opt},p=Math.max(i.colonnes.length,1),d=i.colonnes.map(e=>e.largeur_definie?e.largeur:null),f=i.colonnes.map(e=>(e.casiers||[{}]).length),m=i.colonnes.map(e=>(e.casiers||[]).map(e=>e.hauteur_definie?e.hauteur:null)),g=i.colonnes,h=i.montants,$="0,0",_={},v=s.children;function x(e,t){let n={...t};n.colonnes=t.colonnes.slice(0,e),n.montants=de(t.montants.slice(0,t.montants.length-1),t=>Array(e).fill(1).map((e,n)=>t[n]),e=>e.concat([t.montants[t.montants.length-1]]));for(let t=0;t<=e&&(n.montants[t]={...n.montants[t]},!(t>=e));t++)n.colonnes[t]={largeur:null,num_casiers:1,casiers:[{tiroir:!1,panneau_dessous:!0,panneau_dos:!0}],porte:{},...n.colonnes[t]};return n}function b(e,t){let n=t.colonnes.length,r=t.largeur-(n+1)*t.epaisseur_montants,a=e.filter(e=>e&&0!=e),s=e.length-a.length,l=r-a.reduce((e,t)=>e+t,0),o=Math.floor(l/s),u=[...t.colonnes];for(let t=0;t<n;t++)e[t]&&0!=e[t]?(u[t].largeur_definie=!0,u[t].largeur=e[t]):1==s?(u[t].largeur_definie=!1,u[t].largeur=l,s=0,l=0):(u[t].largeur_definie=!1,u[t].largeur=o,l-=o,s-=1);return{...t,colonnes:u}}function w(e,t,n,r){let a=r.colonnes.length,s=[];for(let l=0;l<a;l++){let a=e[l],o=n[l],u=r.epaisseur_montants*(l+1)+r.colonnes.slice(0,l).reduce((e,t)=>e+t.largeur,0);s[l]=de(r.colonnes[l]||{},e=>({...e,xpos:u,porte:{...e.porte,...o.porte}}),e=>(e.casiers=(e.casiers||[]).slice(0,a),e),e=>C(l,e,t[l],a,o),e=>({...e,casiers:z(e.casiers,u)}))}return{...r,colonnes:s}}function C(e,t,n,r,a){let s=i.hauteur-(r+1)*i.epaisseur_montants,l=n.filter(e=>e&&0!=e),o=r-l.length,u=s-l.reduce((e,t)=>e+t,0),c=Math.floor(u/o);for(let e=0;e<r;e++){let r=a.casiers[e],s={hauteur:null,panneau_dessous:!0,panneau_dos:!0,tiroir:!1,num_etageres:0,...t.casiers[e],...pe(r),porte:{double:!1,facade:!1,type:"",...(t.casiers[e]||{}).porte,...pe(r.porte||{})}};n[e]&&0!=n[e]?(s.hauteur_definie=!0,s.hauteur=n[e]):1==o?(s.hauteur_definie=!1,s.hauteur=u,o=0,u=0):(s.hauteur_definie=!1,s.hauteur=c,u-=c,o-=1),t.casiers[e]=s}return t}function z(e,t){for(let n=0;n<e.length;n++){const r=e.length-n-1;e[n].xpos=t,e[n].ypos=i.epaisseur_montants*(r+1)+e.slice(n+1).reduce((e,t)=>e+t.hauteur,0)}return e}function k(e,t){let n=Array.from(Array(e.colonnes.length+1).keys()).map(n=>{(t[n]||{}).panneaux_actifs;let r={...t[n],panneaux_actifs:[...(t[n]||{}).panneaux_actifs||[]]},a=(e.colonnes[n-1]||{}).casiers||[],s=(e.colonnes[n]||{}).casiers||[],l=a.slice(0,-1).map((t,n)=>({gauche:[n,n+1],0:t.ypos-(t.tiroir?0:e.epaisseur_montants),h:t.tiroir?e.largeur_traverses:e.epaisseur_montants})),o=s.slice(0,-1).map((t,n)=>({droite:[n,n+1],0:t.ypos-(t.tiroir?0:e.epaisseur_montants),h:t.tiroir?e.largeur_traverses:e.epaisseur_montants})),u=l.concat(o).sort((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0).map(e=>({...e,1:e[0]+e.h})).reduce((t,n)=>{if(0==t.length)return[{gauche:[0,0],droite:[0,0],...n}];let r=t[t.length-1];return n[1]-r[0]<=e.largeur_traverses?(t[t.length-1]={...r,...n,1:n[1]},t):t.concat([{gauche:[r.gauche[1],r.gauche[1]],droite:[r.droite[1],r.droite[1]],...n}])},[]).map(t=>({...t,y1:t[0]+(t[1]-t[0])/2-e.largeur_traverses/2,y2:t[0]+(t[1]-t[0])/2+e.largeur_traverses/2})),i=Array.from(Array(u.length+1).keys()).map(e=>"boolean"==typeof r.panneaux_actifs[e]?r.panneaux_actifs[e]:null).reduce((e,t)=>e.concat(["boolean"==typeof t?t:0==e.length||e[e.length-1]]),[]),c=Array.from(Array(u.length+1).keys()).map(t=>{let r=0==t,a=t>=u.length,s=0==n||n==e.colonnes.length;return{first:r,last:a,cote:s,y1:r?e.largeur_traverses+(s?0:e.epaisseur_montants):u[t-1].y2,y2:a?e.hauteur-e.largeur_traverses-(s?0:e.epaisseur_montants):u[t].y1,gauche:r?0:u[t-1].gauche[1],droite:r?0:u[t-1].droite[1],actif:i[t]}});return{traverses:u,panneaux:c}});return{...e,montants:e.montants.map((e,t)=>({...e,...n[t]}))}}function j(e,t){t=[...t||[]];for(let e=0;e<t.length;e++)t[e].source||(t[e].source=["Porte","colonne",e]);for(let r=0;r<e.colonnes.length;r++){const a=e.colonnes[r];t=n(a,r,t);for(let e=0;e<a.casiers.length;e++){const n=a.casiers[e];t=o(a,r,n,e,t=l(a,r,n,e,t=p(a,r,n,e,t=i(a,r,n,e,t))))}}for(let e=0;e<t.length;e++){let n={name:"n°"+(e+1),...t[e]};n=r(n)||n,n=c(n)||n,n=d(n,t)||n,n=u(n)||n,t[e]=n}return t;function n(e,t,n){const r=n.findIndex(e=>e.source.join("-")=="Porte-colonne-"+t);return e.porte.type?-1!=r?n:n=[...n,{source:["Porte","colonne",t],name:prompt("Quel nom donner à la porte ?","colonne n°"+(t+1)),type:"Porte",id:fe(n)}]:(-1!=r&&(confirm(`Caisson ${s.name}\nSupprimer la porte ${n[r].name} ?`)?n.splice(r,1):n[r].source.push("disabled")),n)}function r(t){let n=[...t.source],[r]=n.splice(2,1);if("Porte-colonne"!=n.join("-"))return t;const a=e.colonnes[r];if(!a)return t;const s="total"==a.porte.type,l="demi"==a.porte.type,o="encastre"==a.porte.type,u=(t.opt||{}).epaisseur||(t.opt||{}).epaisseur_montants;return{...t,type:"Porte",defaults:{force_largeur:!0,force_hauteur:!0,encastree:o,largeur:s?a.largeur+2*e.epaisseur_montants:l?a.largeur+e.epaisseur_montants:o?a.largeur:0,hauteur:s?e.hauteur:l?e.hauteur-e.epaisseur_montants:o?e.hauteur-2*e.epaisseur_montants:0},defaultPosition:{x:a.ypos-(s?e.epaisseur_montants:l?e.epaisseur_montants/2:0),y:e.epaisseur_montants-(s?e.epaisseur_montants:l?e.epaisseur_montants/2:0),z:e.profondeur-(o?u:0)}}}function a(e){return e.porte.facade?"Facade":"Porte"}function l(e,t,n,r,a){const l=n.num_etageres;for(let e=a.length-1;e>=0;e--){const n=a[e];let o=[...n.source],[u]=o.splice(6,1);o.join("-")==`Etagere-col-${t}-cas-${r}-num`&&(u<l||(confirm(`Caisson ${s.name}\nSupprimer l'étagère ${n.name} ?`)?a.splice(t,1):a[t].source.push("disabled")))}return a}function o(e,t,n,r,a){const s=n.num_etageres;let l=null;for(let e=0;e<s;e++){const n=`Etagere-col-${t}-cas-${r}-num-${e}`;-1==a.findIndex(e=>e.source.join("-")==n)&&(null==l&&(l=`colonne n°${t+1}, casier n°${r+1}`,l=prompt("Quel nom donner aux étagères ?",l)||l),a=[...a,{source:["Etagere","col",t,"cas",r,"num",e],name:`${l} #${e+1}`,type:"Etagere",id:fe(a)}])}return a}function u(t){let n=[...t.source],[r]=n.splice(6,1),[a]=n.splice(4,1),[s]=n.splice(2,1);if("Etagere-col-cas-num"!=n.join("-"))return t;const l=e.colonnes[s];if(!l)return t;const o=l.casiers[a];if(!o)return t;const u=o.hauteur/(o.num_etageres+1);return{...t,type:"Etagere",defaults:{force_largeur:!0,force_profondeur:!0,largeur:l.largeur,profondeur:e.profondeur},defaultPosition:{x:l.xpos,y:o.ypos+(r+1)*u,z:0}}}function i(e,t,n,r,l){const o=a(n),u=n.porte.type?n.porte.double?[`${o}-col-${t}-cas-${r}-g`,`${o}-col-${t}-cas-${r}-d`]:[`${o}-col-${t}-cas-${r}`]:[],i=[`Porte-col-${t}-cas-${r}`,`Porte-col-${t}-cas-${r}-g`,`Porte-col-${t}-cas-${r}-d`,`Facade-col-${t}-cas-${r}`,`Facade-col-${t}-cas-${r}-g`,`Facade-col-${t}-cas-${r}-d`];for(let e=l.length-1;e>=0;e--){const t=l[e].source.join("-");if(console.log(t,l[e].name),u.includes(t)||!i.includes(t))break;confirm(`Caisson ${s.name}\nSupprimer la ${l[e].type}\n        ${l[e].name} ?`)?l.splice(e,1):l[e].source.push("disabled")}if(!n.porte.type)return l;if(n.porte.double){const e=l.findIndex(e=>e.source.join("-")==u[0]),n=l.findIndex(e=>e.source.join("-")==u[1]);let a=`colonne n°${t+1}, casier n°${r+1}`;-1==e&&-1==n&&(a=prompt(`Quel nom donner aux ${o.toLowerCase()}s ?`,a)||a),-1==e&&(l=[...l,{source:[o,"col",t,"cas",r,"g"],name:a+" gauche",type:o,id:fe(l)}]),-1==n&&(l=[...l,{source:[o,"col",t,"cas",r,"d"],name:a+" droite",type:o,id:fe(l)}])}else{-1==l.findIndex(e=>e.source.join("-")==u[0])&&(l=[...l,{source:[o,"col",t,"cas",r],name:prompt(`Quel nom donner à la ${o.toLowerCase()} ?`,`colonne n°${t+1}, casier n°${r+1}`),type:o,id:fe(l)}])}return l}function c(t){let n=[...t.source],[r]=n.splice(5,1),[a]=n.splice(4,1),[s]=n.splice(2,1),[l]=n.splice(0,1);if("col-cas"!=n.join("-"))return t;if("Porte"!=l&&"Facade"!=l)return t;if(r&&"g"!=r&&"d"!=r)return t;const o=e.colonnes[s];if(!o)return t;const u=o.casiers[a];if(!u)return t;const i=!!r,c="total"==u.porte.type,p="demi"==u.porte.type,d="encastre"==u.porte.type,f=(t.opt||{}).epaisseur||(t.opt||{}).epaisseur_montants,m={force_ferrage:!0,ferrage:u.tiroir?"aucun":"charnieres",encastree:d,force_largeur:!0,force_hauteur:!0,largeur:1/(i?2:1)*(c?o.largeur+2*e.epaisseur_montants:p?o.largeur+e.epaisseur_montants:d?o.largeur:0),hauteur:c?u.hauteur+2*e.epaisseur_montants:p?u.hauteur+e.epaisseur_montants:d?u.hauteur:0},g={x:u.xpos+("d"==r?m.largeur:0)-(c?e.epaisseur_montants:p?e.epaisseur_montants/2:0),y:u.ypos-(c?e.epaisseur_montants:p?e.epaisseur_montants/2:0),z:e.profondeur-(d?f:0)};return{...t,type:l,defaults:m,defaultPosition:g}}function p(e,t,n,r,a){const s=a.findIndex(e=>e.source.join("-")==`Tiroir-col-${t}-cas-${r}`);return n.tiroir?-1!=s?a:a=[...a,{source:["Tiroir","col",t,"cas",r],name:prompt("Quel nom donner au tiroir ?",`colonne n°${t+1}, casier n°${r+1}`),type:"Tiroir",id:fe(a)}]:(-1!=s&&confirm(`Supprimer le tiroir ${a[s].name} ?`)&&a.splice(s,1),a)}function d(t,n){let r=[...t.source],[s]=r.splice(4,1),[l]=r.splice(2,1);if("Tiroir-col-cas"!=r.join("-"))return t;const o=e.colonnes[l];if(!o)return t;const u=o.casiers[s];if(!u)return t;const i=n.find(e=>e.source.join("-")==`${a(u)}-col-${l}-cas-${s}`)||{},c=i?(i.opt||{}).epaisseur||(i.opt||{}).epaisseur_montants:0,p="encastre"==u.porte.type?c:0;return{...t,type:"Tiroir",defaults:{force_largeur:!0,force_hauteur:!0,largeur:o.largeur,hauteur:Math.min(150,u.hauteur),profondeur:e.profondeur-p},defaultPosition:{x:u.xpos,y:u.ypos,z:"encastre"==u.porte.type?c:0}}}}let q=(new Rn).add_name("Montant").add_features("montant"),P=(new Rn).add_name("Traverse").add_features("traverse"),S=(new Rn).add_name("Panneau").add_features("panneau"),N=[],E=[];let A,O,L,M,I,T,J,R,B,U,D,H,Q,Z,G,X,W,V,Y,K,ee,te,ne,re,ae,se,le,oe,ue,ie,ce,me,ge,he,$e;return e.$set=e=>{"path"in e&&n(0,r=e.path),"initdata"in e&&n(21,a=e.initdata)},e.$$.update=()=>{192&e.$$.dirty[0]&&n(7,d=Array.from(Array(p).keys()).map(e=>d[e]||null)),320&e.$$.dirty[0]&&n(8,f=Array.from(Array(p).keys()).map(e=>f[e]||1)),832&e.$$.dirty[0]&&n(9,m=Array.from(Array(p).keys()).map(e=>(m[e]||[]).slice(0,f[e]))),1344&e.$$.dirty[0]&&n(10,g=Array.from(Array(p).keys()).map(e=>g[e]||{}).map((e,t)=>({...e,porte:{...e.porte},casiers:Array.from(Array(f[t]).keys()).map(t=>({porte:{},...(e.casiers||[])[t]}))}))),2112&e.$$.dirty[0]&&n(11,h=de(h.slice(0,h.length-1),e=>Array(p).fill(1).map((t,n)=>e[n]||{panneaux_actifs:[]}),e=>e.concat([h[h.length-1]])).map(e=>({...e,panneaux_actifs:[...e.panneaux_actifs||[]]}))),4096&e.$$.dirty[0]&&n(17,[A,O]=$.split(",").map(e=>parseInt(e)),A,(n(18,O),n(12,$))),397312&e.$$.dirty[0]&&n(19,L={i:A,j:O,key:$}),4064&e.$$.dirty[0]&&n(4,i=de({...l,...pe({...c})},e=>x(p,e),e=>b(d,e),e=>w(f,m,g,e),e=>k(e,h))),16400&e.$$.dirty[0]&&n(14,v=j(i,v)),2121776&e.$$.dirty[0]&&n(1,s={...a,opt:i,ui:c,children:v,childrenPos:_}),16&e.$$.dirty[0]&&n(22,M=q.build(i.hauteur,i.largeur_montants,i.epaisseur_montants)),4194304&e.$$.dirty[0]&&n(23,I=M.add_name("arrière-gauche").put(0,0,0,"yzx")),4194320&e.$$.dirty[0]&&n(24,T=M.add_name("avant-gauche").put(i.largeur-M.epaisseur,0,i.profondeur-M.largeur,"yzx")),4194320&e.$$.dirty[0]&&n(25,J=M.add_name("arrière-droit").put(i.largeur-M.epaisseur,0,0,"yzx")),4194320&e.$$.dirty[0]&&n(26,R=M.add_name("avant-droit").put(0,0,i.profondeur-M.largeur,"yzx")),16&e.$$.dirty[0]&&n(27,B=P.build(i.profondeur-2*(i.largeur_montants-i.profondeur_tenons_cotes),i.largeur_traverses,i.epaisseur_montants).usine_tenons(i.profondeur_tenons_cotes).put(null,null,i.largeur_montants-i.profondeur_tenons_cotes,"zyx")),134217728&e.$$.dirty[0]&&n(28,U=B.add_name("haut-gauche").put(0,0)),134217744&e.$$.dirty[0]&&n(29,D=B.add_name("bas-gauche").put(0,i.hauteur-B.largeur)),134217744&e.$$.dirty[0]&&n(30,H=B.add_name("haut-droit").put(i.largeur-B.epaisseur,0)),134217744&e.$$.dirty[0]&&n(31,Q=B.add_name("bas-droit").put(i.largeur-B.epaisseur,i.hauteur-B.largeur)),16&e.$$.dirty[0]&&n(32,Z=P.add_name("principale").build(i.largeur-2*(i.epaisseur_montants-i.profondeur_tenons),i.largeur_traverses,i.epaisseur_montants).usine_tenons(i.profondeur_tenons).put(i.epaisseur_montants-i.profondeur_tenons,null,null,"xzy")),2&e.$$.dirty[1]&&n(33,G=Z.add_name("arrière-haut").put(null,0,0)),16&e.$$.dirty[0]|2&e.$$.dirty[1]&&n(34,X=Z.add_name("arrière-bas").put(null,i.hauteur-Z.epaisseur,0)),16&e.$$.dirty[0]|2&e.$$.dirty[1]&&n(35,W=Z.add_name("avant-haut").put(null,0,i.profondeur-Z.largeur)),16&e.$$.dirty[0]|2&e.$$.dirty[1]&&n(36,V=Z.add_name("avant-bas").put(null,i.hauteur-Z.epaisseur,i.profondeur-Z.largeur)),16&e.$$.dirty[0]&&n(37,Y=S.build(i.largeur-2*(i.epaisseur_montants-i.profondeur_rainure+i.jeu_rainure),i.profondeur-2*(i.largeur_traverses-i.profondeur_rainure+i.jeu_rainure),i.epaisseur_panneau).put(i.epaisseur_montants-i.profondeur_rainure+i.jeu_rainure,null,i.largeur_montants-i.profondeur_rainure+i.jeu_rainure,"xzy")),16&e.$$.dirty[0]|64&e.$$.dirty[1]&&n(38,K=i.panneau_dessus?Y.add_name("haut").put(null,0):null),16&e.$$.dirty[0]|64&e.$$.dirty[1]&&n(39,ee=i.panneau_dessous?Y.add_name("bas").put(null,i.hauteur-Y.epaisseur):null),16&e.$$.dirty[0]&&n(40,te=i.colonnes.map((e,t)=>e.casiers.map((n,r)=>0==n.panneau_dos?null:S.add_name("dos","colonne n°"+(t+1),"casier n°"+(r+1)).build(n.hauteur+2*(i.profondeur_rainure-i.jeu_rainure),e.largeur+i.epaisseur_montants-i.largeur_montants/2+2*(i.profondeur_rainure-i.jeu_rainure),i.epaisseur_panneau).put(n.xpos-i.profondeur_rainure+i.jeu_rainure,n.ypos-i.profondeur_rainure+i.jeu_rainure,0,"yxz")))),16&e.$$.dirty[0]&&n(41,ne=Array.from(Array(i.colonnes.length-1).keys()).map(e=>q.add_name("cloison n°"+(e+1)).build(i.hauteur-2*(i.epaisseur_montants-i.montants_inter_longueur_tenon),i.largeur_montants,i.epaisseur_montants).usine_tenons(i.montants_inter_longueur_tenon).put(i.epaisseur_montants+i.colonnes.slice(0,e+1).map(e=>e.largeur).reduce((e,t)=>e+t,0)+e*i.epaisseur_montants,i.epaisseur_montants-i.montants_inter_longueur_tenon,null,"yzx"))),16&e.$$.dirty[0]|1024&e.$$.dirty[1]&&n(42,re=ne.map((e,t)=>e.add_name("avant").put(null,null,i.profondeur-e.largeur))),1024&e.$$.dirty[1]&&n(43,ae=ne.map((e,t)=>e.add_name("arrière").put(null,null,0))),134217744&e.$$.dirty[0]&&n(44,se=i.montants.map((e,t)=>e.traverses.map((e,n)=>B.add_name(0==t?"coté gauche":t<i.colonnes.length?"cloison n°"+t:"coté droit").add_name("traverse n°"+(n+1)).put(i.epaisseur_montants*t+i.colonnes.slice(0,t).reduce((e,t)=>e+t.largeur,0),e.y1)))),16&e.$$.dirty[0]&&n(45,le=i.montants.map((e,t)=>e.panneaux.map((e,n)=>e.actif?S.add_name(0==t?"coté gauche":t>=i.colonnes.length?"coté droit":"cloison n°"+t,"caisson n°"+(n+1)).build(e.y2-e.y1+2*(i.profondeur_rainure-i.jeu_rainure),i.profondeur-2*(i.largeur_traverses-i.profondeur_rainure+i.jeu_rainure),i.epaisseur_panneau).put(i.epaisseur_montants*t+i.colonnes.slice(0,t).reduce((e,t)=>e+t.largeur,0),e.y1-i.profondeur_rainure+i.jeu_rainure,i.largeur_montants-i.profondeur_rainure+i.jeu_rainure,"yzx"):null))),16&e.$$.dirty[0]&&n(46,oe=Array.from(Array(i.colonnes.length-1).keys()).map(e=>P.add_name("cloison n°"+(e+1)).build(i.profondeur-2*(i.largeur_montants-i.profondeur_tenons_cotes),i.largeur_traverses,i.epaisseur_montants).usine_tenons(i.profondeur_tenons_cotes).put(i.epaisseur_montants+i.colonnes.slice(0,e+1).map(e=>e.largeur).reduce((e,t)=>e+t,0)+e*i.epaisseur_montants,null,i.largeur_montants-i.profondeur_tenons_cotes,"zyx"))),16&e.$$.dirty[0]|32768&e.$$.dirty[1]&&n(47,ue=oe.map((e,t)=>e.add_name("haut").put(null,i.epaisseur_montants))),16&e.$$.dirty[0]|32768&e.$$.dirty[1]&&n(48,ie=oe.map((e,t)=>e.add_name("bas").put(null,i.hauteur-i.epaisseur_montants-e.largeur))),16&e.$$.dirty[0]&&n(49,ce=i.colonnes.map((e,t)=>e.casiers.map((t,n)=>n==e.casiers.length-1?null:P.add_name("intermédiaire").build(e.largeur,i.largeur_traverses,i.epaisseur_montants).ajout_tenons(i.profondeur_tenons).put(t.xpos-i.profondeur_tenons,t.ypos-i.epaisseur_montants,null,"xzy")))),16&e.$$.dirty[0]|262144&e.$$.dirty[1]&&n(50,me=ce.map((e,t)=>e.map((e,n)=>null==e?null:e.add_name("avant","cloison n°"+(t+1),"caisson n°"+n).put(null,null,i.profondeur-i.largeur_montants)))),262144&e.$$.dirty[1]&&n(51,ge=ce.map((e,t)=>e.map((e,n)=>null==e?null:e.add_name("arrière","cloison n°"+(t+1),"caisson n°"+n).put(null,null,0)))),16&e.$$.dirty[0]&&n(52,he=i.colonnes.map((e,t)=>e.casiers.map((n,r)=>r==e.casiers.length-1||!1===n.panneau_dessous?null:S.add_name("dessous","colonne n°"+(t+1),"casier n°"+(r+1)).build(e.largeur+2*(i.profondeur_rainure-i.jeu_rainure),i.profondeur-2*i.largeur_traverses+2*(i.profondeur_rainure-i.jeu_rainure),i.epaisseur_panneau).put(n.xpos-i.profondeur_rainure+i.jeu_rainure,n.ypos-i.epaisseur_panneau,i.largeur_traverses-i.profondeur_rainure+i.jeu_rainure,"xzy")))),2004877312&e.$$.dirty[0]|3898301&e.$$.dirty[1]&&n(53,$e=[I,T,J,R,Q,D,H,U,W,V,G,X,K,ee].concat(te.reduce((e,t)=>e.concat(t),[])).concat(le.reduce((e,t)=>e.concat(t),[])).concat(ae).concat(re).concat(ue).concat(ie).concat(me.reduce((e,t)=>e.concat(t),[])).concat(ge.reduce((e,t)=>e.concat(t),[])).concat(se.reduce((e,t)=>e.concat(t),[])).concat(he.reduce((e,t)=>e.concat(t),[])).filter(e=>e)),65536&e.$$.dirty[0]|4194304&e.$$.dirty[1]&&n(15,N=$e.concat(E)),32768&e.$$.dirty[0]&&n(2,o.pieces=N,o)},[r,s,o,u,i,c,p,d,f,m,g,h,$,_,v,N,E,A,O,L,l,a,M,I,T,J,R,B,U,D,H,Q,Z,G,X,W,V,Y,K,ee,te,ne,re,ae,se,le,oe,ue,ie,ce,me,ge,he,$e,x,b,w,C,z,k,j,q,P,S,function(e){c.hauteur=e,n(5,c)},function(e){c.largeur=e,n(5,c)},function(e){c.profondeur=e,n(5,c)},function(){p=y(this.value),n(6,p)},function(e){d[e]=y(this.value),n(7,d),n(6,p)},function(e){f[e]=y(this.value),n(8,f),n(6,p)},function(e,t){m[e][t]=y(this.value),n(9,m),n(6,p),n(8,f)},function(){$=this.__value,n(12,$)},[[]],(e,t,n,r)=>n.droite!=e||i.montants[t].panneaux[r].actif,(e,t,n,r)=>n.gauche!=e||i.montants[t+1].panneaux[r].actif,(e,t,n,r)=>n.droite==e&&i.montants[t].panneaux[r].actif,(e,t,n,r)=>n.gauche==e&&i.montants[t+1].panneaux[r].actif,function(e){g[A].porte.type=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].porte.double=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].porte.type=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].porte.double=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].porte.facade=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].num_etageres=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].tiroir=e,n(10,g),n(6,p),n(8,f)},function(e){c.panneau_dessus=e,n(5,c)},function(e){g[A].casiers[O-1].panneau_dessous=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].panneau_dos=e,n(10,g),n(6,p),n(8,f)},function(e){g[A].casiers[O].panneau_dessous=e,n(10,g),n(6,p),n(8,f)},function(e){c.panneau_dessous=e,n(5,c)},function(e,t){h[A].panneaux_actifs[t]=e,n(11,h),n(6,p)},function(e,t){h[A+1].panneaux_actifs[t]=e,n(11,h),n(6,p)},function(e){c.epaisseur_montants=e,n(5,c)},function(e){c.largeur_montants=e,n(5,c)},function(e){c.largeur_traverses=e,n(5,c)},function(e){c.profondeur_tenons_cotes=e,n(5,c)},function(e){c.profondeur_tenons=e,n(5,c)},function(e){c.epaisseur_panneau=e,n(5,c)},function(e){c.profondeur_rainure=e,n(5,c)},function(e){c.jeu_rainure=e,n(5,c)},function(e){c.montants_inter_longueur_tenon=e,n(5,c)},function(e){_=e,n(13,_)},function(e){E=e,n(16,E)},function(e){s=e,n(1,s),n(21,a),n(4,i),n(5,c),n(14,v),n(13,_),n(20,l),n(6,p),n(7,d),n(8,f),n(9,m),n(10,g),n(11,h)},function(e){u=e,n(3,u)},function(e){v=e,n(14,v),n(4,i),n(20,l),n(5,c),n(6,p),n(7,d),n(8,f),n(9,m),n(10,g),n(11,h)},function(t){F(e,t)}]}class Hr extends oe{constructor(e){super(),le(this,e,Dr,Mr,s,{path:0,initdata:21},[-1,-1,-1,-1,-1])}}function Qr(e){let t,n;const r=new pt({props:{pieces:e[4],name:"Étagère "+e[1].name}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","plan"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};16&t&&(n.pieces=e[4]),2&t&&(n.name="Étagère "+e[1].name),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function Zr(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,y,b,w,C;function z(t){e[9].call(null,t)}let k={min:"0",def:e[5].largeur,force:e[5].force_largeur};void 0!==e[2].largeur&&(k.value=e[2].largeur);const j=new he({props:k});function q(t){e[10].call(null,t)}L.push(()=>te(j,"value",z));let P={min:"0",def:e[5].profondeur,force:e[5].force_profondeur};void 0!==e[2].profondeur&&(P.value=e[2].profondeur);const S=new he({props:P});function N(t){e[11].call(null,t)}L.push(()=>te(S,"value",q));let E={min:"0",def:e[5].epaisseur,force:e[5].force_epaisseur};void 0!==e[2].epaisseur&&(E.value=e[2].epaisseur);const A=new he({props:E});return L.push(()=>te(A,"value",N)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Largeur    : ",ne(j.$$.fragment),l=g(" mm"),o=h(),u=f("label"),d=f("span"),d.textContent="Profondeur : ",ne(S.$$.fragment),$=g(" mm"),_=h(),v=f("label"),y=f("span"),y.textContent="Épaisseur  : ",ne(A.$$.fragment),w=g(" mm"),x(a,"class","svelte-18serza"),x(r,"class","svelte-18serza"),x(d,"class","svelte-18serza"),x(u,"class","svelte-18serza"),x(y,"class","svelte-18serza"),x(v,"class","svelte-18serza"),x(n,"class","svelte-18serza"),x(t,"class","main svelte-18serza"),x(t,"slot","dim")},m(e,s){c(e,t,s),i(t,n),i(n,r),i(r,a),re(j,r,null),i(r,l),i(n,o),i(n,u),i(u,d),re(S,u,null),i(u,$),i(n,_),i(n,v),i(v,y),re(A,v,null),i(v,w),C=!0},p(e,t){const n={};!s&&4&t&&(s=!0,n.value=e[2].largeur,B(()=>s=!1)),j.$set(n);const r={};!m&&4&t&&(m=!0,r.value=e[2].profondeur,B(()=>m=!1)),S.$set(r);const a={};!b&&4&t&&(b=!0,a.value=e[2].epaisseur,B(()=>b=!1)),A.$set(a)},i(e){C||(V(j.$$.fragment,e),V(S.$$.fragment,e),V(A.$$.fragment,e),C=!0)},o(e){Y(j.$$.fragment,e),Y(S.$$.fragment,e),Y(A.$$.fragment,e),C=!1},d(e){e&&p(t),ae(j),ae(S),ae(A)}}}function Gr(e){let t,n;const r=new bn({props:{pieces:new mt(e[4],"Étagère "+e[1].name,"Etagere")}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","tables"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};18&t&&(n.pieces=new mt(e[4],"Étagère "+e[1].name,"Etagere")),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function Xr(t){let n,r;return{c(){n=h(),r=h()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Wr(e){let t,n;function r(t){e[12].call(null,t)}let a={path:e[0],state:e[3],$$slots:{default:[Xr],tables:[Gr],dim:[Zr],plan:[Qr]},$$scope:{ctx:e}};void 0!==e[1]&&(a.data=e[1]);const s=new Et({props:a});return L.push(()=>te(s,"data",r)),s.$on("datachange",e[13]),{c(){ne(s.$$.fragment)},m(e,t){re(s,e,t),n=!0},p(e,[n]){const r={};1&n&&(r.path=e[0]),8&n&&(r.state=e[3]),16406&n&&(r.$$scope={dirty:n,ctx:e}),!t&&2&n&&(t=!0,r.data=e[1],B(()=>t=!1)),s.$set(r)},i(e){n||(V(s.$$.fragment,e),n=!0)},o(e){Y(s.$$.fragment,e),n=!1},d(e){ae(s,e)}}}function Vr(e,t,n){let r,a,{path:s}=t,{initdata:l={}}=t,o={...l},u={largeur:400,profondeur:300,epaisseur:18,...l.defaults},i={...l.opt},c={...l.ui||l.opt},p={};return e.$set=e=>{"path"in e&&n(0,s=e.path),"initdata"in e&&n(6,l=e.initdata)},e.$$.update=()=>{4&e.$$.dirty&&n(7,i={...u,...pe(c)}),128&e.$$.dirty&&n(1,o.opt=i,o),4&e.$$.dirty&&n(1,o.ui=c,o),128&e.$$.dirty&&n(8,r=(new Rn).add_name("Étagère").build(i.largeur,i.profondeur,i.epaisseur).put(0,0,0,"xzy").add_features("panneau-seul")),256&e.$$.dirty&&n(4,a=[r]),16&e.$$.dirty&&n(3,p.pieces=a,p)},[s,o,c,p,a,u,l,i,r,function(e){c.largeur=e,n(2,c)},function(e){c.profondeur=e,n(2,c)},function(e){c.epaisseur=e,n(2,c)},function(e){o=e,n(1,o),n(7,i),n(2,c),n(5,u)},function(t){F(e,t)}]}class Yr extends oe{constructor(e){super(),le(this,e,Vr,Wr,s,{path:0,initdata:6})}}function Kr(e){let t,n;const r=new pt({props:{pieces:e[4],name:"Façade "+e[1].name}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","plan"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};16&t&&(n.pieces=e[4]),2&t&&(n.name="Façade "+e[1].name),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function ea(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,y,b,w,C;function z(t){e[9].call(null,t)}let k={min:"0",def:e[5].largeur,force:e[5].force_largeur};void 0!==e[3].largeur&&(k.value=e[3].largeur);const j=new he({props:k});function q(t){e[10].call(null,t)}L.push(()=>te(j,"value",z));let P={min:"0",def:e[5].hauteur,force:e[5].force_hauteur};void 0!==e[3].hauteur&&(P.value=e[3].hauteur);const S=new he({props:P});function N(t){e[11].call(null,t)}L.push(()=>te(S,"value",q));let E={min:"0",def:e[5].epaisseur,force:e[5].force_epaisseur};void 0!==e[3].epaisseur&&(E.value=e[3].epaisseur);const A=new he({props:E});return L.push(()=>te(A,"value",N)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Largeur    : ",ne(j.$$.fragment),l=g(" mm"),o=h(),u=f("label"),d=f("span"),d.textContent="Hauteur    : ",ne(S.$$.fragment),$=g(" mm"),_=h(),v=f("label"),y=f("span"),y.textContent="Épaisseur  : ",ne(A.$$.fragment),w=g(" mm"),x(a,"class","svelte-18serza"),x(r,"class","svelte-18serza"),x(d,"class","svelte-18serza"),x(u,"class","svelte-18serza"),x(y,"class","svelte-18serza"),x(v,"class","svelte-18serza"),x(n,"class","svelte-18serza"),x(t,"class","main svelte-18serza"),x(t,"slot","dim")},m(e,s){c(e,t,s),i(t,n),i(n,r),i(r,a),re(j,r,null),i(r,l),i(n,o),i(n,u),i(u,d),re(S,u,null),i(u,$),i(n,_),i(n,v),i(v,y),re(A,v,null),i(v,w),C=!0},p(e,t){const n={};!s&&8&t&&(s=!0,n.value=e[3].largeur,B(()=>s=!1)),j.$set(n);const r={};!m&&8&t&&(m=!0,r.value=e[3].hauteur,B(()=>m=!1)),S.$set(r);const a={};!b&&8&t&&(b=!0,a.value=e[3].epaisseur,B(()=>b=!1)),A.$set(a)},i(e){C||(V(j.$$.fragment,e),V(S.$$.fragment,e),V(A.$$.fragment,e),C=!0)},o(e){Y(j.$$.fragment,e),Y(S.$$.fragment,e),Y(A.$$.fragment,e),C=!1},d(e){e&&p(t),ae(j),ae(S),ae(A)}}}function ta(e){let t,n;const r=new bn({props:{pieces:new mt(e[4],"Façade "+e[1].name,"Facade")}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","tables"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};18&t&&(n.pieces=new mt(e[4],"Façade "+e[1].name,"Facade")),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function na(t){let n,r;return{c(){n=h(),r=h()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function ra(e){let t,n;function r(t){e[12].call(null,t)}let a={path:e[0],state:e[2],$$slots:{default:[na],tables:[ta],dim:[ea],plan:[Kr]},$$scope:{ctx:e}};void 0!==e[1]&&(a.data=e[1]);const s=new Et({props:a});return L.push(()=>te(s,"data",r)),s.$on("datachange",e[13]),{c(){ne(s.$$.fragment)},m(e,t){re(s,e,t),n=!0},p(e,[n]){const r={};1&n&&(r.path=e[0]),4&n&&(r.state=e[2]),16410&n&&(r.$$scope={dirty:n,ctx:e}),!t&&2&n&&(t=!0,r.data=e[1],B(()=>t=!1)),s.$set(r)},i(e){n||(V(s.$$.fragment,e),n=!0)},o(e){Y(s.$$.fragment,e),n=!1},d(e){ae(s,e)}}}function aa(e,t,n){let r,a,{path:s}=t,{initdata:l={}}=t,o={...l},u={},i={largeur:400,hauteur:150,epaisseur:18,...l.defaults},c={...l.opt},p={...l.ui||l.opt};return e.$set=e=>{"path"in e&&n(0,s=e.path),"initdata"in e&&n(6,l=e.initdata)},e.$$.update=()=>{8&e.$$.dirty&&n(7,c={...i,...pe(p)}),128&e.$$.dirty&&n(1,o.opt=c,o),8&e.$$.dirty&&n(1,o.ui=p,o),128&e.$$.dirty&&n(8,r=(new Rn).add_name("Façade").build(c.largeur,c.hauteur,c.epaisseur).put(0,0,0,"xyz").add_features("panneau-seul")),256&e.$$.dirty&&n(4,a=[r]),16&e.$$.dirty&&n(2,u.pieces=a,u)},[s,o,u,p,a,i,l,c,r,function(e){p.largeur=e,n(3,p)},function(e){p.hauteur=e,n(3,p)},function(e){p.epaisseur=e,n(3,p)},function(e){o=e,n(1,o),n(7,c),n(3,p),n(5,i)},function(t){F(e,t)}]}class sa extends oe{constructor(e){super(),le(this,e,aa,ra,s,{path:0,initdata:6})}}function la(e){let t,n;const r=new pt({props:{pieces:e[5]}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","plan"),x(t,"class","svelte-1e9ss2o")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};32&t[0]&&(n.pieces=e[5]),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function oa(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,y,b,w,C,z,k,j,q,P,S,N,E,A,F,O,M,I,T,J,R,U,D,H,Q,Z,G,X,W,K,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,ge,$e,_e,ve,xe,ye,we,Ce,ze,ke,je,qe,Pe,Se,Ne,Ee,Ae,Fe,Oe,Le,Me,Ie,Te;function Je(t){e[18].call(null,t)}let Re={min:"1",def:e[6].quantite};void 0!==e[2].quantite&&(Re.value=e[2].quantite);const Be=new he({props:Re});function Ue(t){e[19].call(null,t)}L.push(()=>te(Be,"value",Je));let De={min:"0",def:e[6].largeur,force:e[6].force_largeur};void 0!==e[2].largeur&&(De.value=e[2].largeur);const He=new he({props:De});function Qe(t){e[20].call(null,t)}L.push(()=>te(He,"value",Ue));let Ze={min:"0",def:e[6].hauteur,force:e[6].force_hauteur};void 0!==e[2].hauteur&&(Ze.value=e[2].hauteur);const Ge=new he({props:Ze});function Xe(t){e[21].call(null,t)}L.push(()=>te(Ge,"value",Qe));let We={min:"0",def:e[6].profondeur,force:e[6].force_profondeur};void 0!==e[2].profondeur&&(We.value=e[2].profondeur);const Ve=new he({props:We});function Ye(t){e[22].call(null,t)}L.push(()=>te(Ve,"value",Xe));let Ke={min:"0",def:e[3].largeur_tir};void 0!==e[2].largeur_tir&&(Ke.value=e[2].largeur_tir);const et=new he({props:Ke});function tt(t){e[23].call(null,t)}L.push(()=>te(et,"value",Ye));let nt={min:"0",def:e[3].profondeur_tir};void 0!==e[2].profondeur_tir&&(nt.value=e[2].profondeur_tir);const rt=new he({props:nt});function at(t){e[24].call(null,t)}L.push(()=>te(rt,"value",tt));let st={min:"0",def:e[3].hauteur_tir};void 0!==e[2].hauteur_tir&&(st.value=e[2].hauteur_tir);const lt=new he({props:st});function ot(t){e[25].call(null,t)}L.push(()=>te(lt,"value",at));let ut={min:"0",def:e[6].hauteur_tir_max};void 0!==e[2].hauteur_tir_max&&(ut.value=e[2].hauteur_tir_max);const it=new he({props:ut});function ct(t){e[26].call(null,t)}L.push(()=>te(it,"value",ot));let pt={min:"0",def:e[6].profondeur_queues_arrondes};void 0!==e[2].profondeur_queues_arrondes&&(pt.value=e[2].profondeur_queues_arrondes);const dt=new he({props:pt});function ft(t){e[27].call(null,t)}L.push(()=>te(dt,"value",ct));let mt={min:"0",def:e[6].epaisseur,force:e[6].force_epaisseur};void 0!==e[2].epaisseur&&(mt.value=e[2].epaisseur);const gt=new he({props:mt});function ht(t){e[28].call(null,t)}L.push(()=>te(gt,"value",ft));let $t={min:"0",def:e[6].epaisseur_fond};void 0!==e[2].epaisseur_fond&&($t.value=e[2].epaisseur_fond);const _t=new he({props:$t});function vt(t){e[29].call(null,t)}L.push(()=>te(_t,"value",ht));let xt={min:"0",def:e[6].profondeur_rainure};void 0!==e[2].profondeur_rainure&&(xt.value=e[2].profondeur_rainure);const yt=new he({props:xt});function bt(t){e[30].call(null,t)}L.push(()=>te(yt,"value",vt));let wt={min:"0",def:e[6].jeu_rainure};void 0!==e[2].jeu_rainure&&(wt.value=e[2].jeu_rainure);const Ct=new he({props:wt});function zt(t){e[31].call(null,t)}L.push(()=>te(Ct,"value",bt));let kt={def:e[6].inclure_fond};void 0!==e[2].inclure_fond&&(kt.checked=e[2].inclure_fond);const jt=new be({props:kt});return L.push(()=>te(jt,"checked",zt)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Quantité : ",ne(Be.$$.fragment),l=h(),o=f("hr"),u=h(),d=f("label"),m=f("span"),m.textContent="Largeur logement   : ",ne(He.$$.fragment),_=g(" mm"),v=h(),y=f("label"),b=f("span"),b.textContent="Hauteur logement  : ",ne(Ge.$$.fragment),C=g(" mm"),z=h(),k=f("label"),j=f("span"),j.textContent="Profondeur logement : ",ne(Ve.$$.fragment),P=g(" mm"),S=h(),N=f("hr"),E=h(),A=f("label"),F=f("span"),F.textContent="Largeur   : ",ne(et.$$.fragment),M=g(" mm"),I=h(),T=f("label"),J=f("span"),J.textContent="Profondeur : ",ne(rt.$$.fragment),U=g(" mm"),D=h(),H=f("label"),Q=f("span"),Q.textContent="Hauteur   : ",ne(lt.$$.fragment),G=g(" mm"),X=h(),W=f("label"),K=f("span"),K.textContent="Hauteur max : ",ne(it.$$.fragment),se=g(" mm"),le=h(),oe=f("hr"),ue=h(),ie=f("label"),ce=f("span"),ce.textContent="Profondeur queues d'arrondes : ",ne(dt.$$.fragment),de=g(" mm"),fe=h(),me=f("label"),ge=f("span"),ge.textContent="Épaisseur : ",ne(gt.$$.fragment),_e=g(" mm"),ve=h(),xe=f("label"),ye=f("span"),ye.textContent="Épaisseur fond : ",ne(_t.$$.fragment),Ce=g(" mm"),ze=h(),ke=f("label"),je=f("span"),je.textContent="Profondeur rainures : ",ne(yt.$$.fragment),Pe=g(" mm"),Se=h(),Ne=f("label"),Ee=f("span"),Ee.textContent="Jeu paneau / rainure : ",ne(Ct.$$.fragment),Fe=g(" mm"),Oe=h(),Le=f("label"),Me=f("span"),Me.textContent="Inclure le fond",ne(jt.$$.fragment),x(a,"class","svelte-1e9ss2o"),x(r,"class","svelte-1e9ss2o"),x(o,"class","svelte-1e9ss2o"),x(m,"class","svelte-1e9ss2o"),x(d,"class","svelte-1e9ss2o"),x(b,"class","svelte-1e9ss2o"),x(y,"class","svelte-1e9ss2o"),x(j,"class","svelte-1e9ss2o"),x(k,"class","svelte-1e9ss2o"),x(N,"class","svelte-1e9ss2o"),x(F,"class","svelte-1e9ss2o"),x(A,"class","svelte-1e9ss2o"),x(J,"class","svelte-1e9ss2o"),x(T,"class","svelte-1e9ss2o"),x(Q,"class","svelte-1e9ss2o"),x(H,"class","svelte-1e9ss2o"),x(K,"class","svelte-1e9ss2o"),x(W,"class","svelte-1e9ss2o"),x(oe,"class","svelte-1e9ss2o"),x(ce,"class","svelte-1e9ss2o"),x(ie,"class","svelte-1e9ss2o"),x(ge,"class","svelte-1e9ss2o"),x(me,"class","svelte-1e9ss2o"),x(ye,"class","svelte-1e9ss2o"),x(xe,"class","svelte-1e9ss2o"),x(je,"class","svelte-1e9ss2o"),x(ke,"class","svelte-1e9ss2o"),x(Ee,"class","svelte-1e9ss2o"),x(Ne,"class","svelte-1e9ss2o"),x(Me,"class","svelte-1e9ss2o"),x(Le,"class","svelte-1e9ss2o"),x(n,"class","svelte-1e9ss2o"),x(t,"class","main svelte-1e9ss2o"),x(t,"slot","dim")},m(e,s){c(e,t,s),i(t,n),i(n,r),i(r,a),re(Be,r,null),i(n,l),i(n,o),i(n,u),i(n,d),i(d,m),re(He,d,null),i(d,_),i(n,v),i(n,y),i(y,b),re(Ge,y,null),i(y,C),i(n,z),i(n,k),i(k,j),re(Ve,k,null),i(k,P),i(n,S),i(n,N),i(n,E),i(n,A),i(A,F),re(et,A,null),i(A,M),i(n,I),i(n,T),i(T,J),re(rt,T,null),i(T,U),i(n,D),i(n,H),i(H,Q),re(lt,H,null),i(H,G),i(n,X),i(n,W),i(W,K),re(it,W,null),i(W,se),i(n,le),i(n,oe),i(n,ue),i(n,ie),i(ie,ce),re(dt,ie,null),i(ie,de),i(n,fe),i(n,me),i(me,ge),re(gt,me,null),i(me,_e),i(n,ve),i(n,xe),i(xe,ye),re(_t,xe,null),i(xe,Ce),i(n,ze),i(n,ke),i(ke,je),re(yt,ke,null),i(ke,Pe),i(n,Se),i(n,Ne),i(Ne,Ee),re(Ct,Ne,null),i(Ne,Fe),i(n,Oe),i(n,Le),i(Le,Me),re(jt,Le,null),Te=!0},p(e,t){const n={};!s&&4&t[0]&&(s=!0,n.value=e[2].quantite,B(()=>s=!1)),Be.$set(n);const r={};!$&&4&t[0]&&($=!0,r.value=e[2].largeur,B(()=>$=!1)),He.$set(r);const a={};!w&&4&t[0]&&(w=!0,a.value=e[2].hauteur,B(()=>w=!1)),Ge.$set(a);const l={};!q&&4&t[0]&&(q=!0,l.value=e[2].profondeur,B(()=>q=!1)),Ve.$set(l);const o={};8&t[0]&&(o.def=e[3].largeur_tir),!O&&4&t[0]&&(O=!0,o.value=e[2].largeur_tir,B(()=>O=!1)),et.$set(o);const u={};8&t[0]&&(u.def=e[3].profondeur_tir),!R&&4&t[0]&&(R=!0,u.value=e[2].profondeur_tir,B(()=>R=!1)),rt.$set(u);const i={};8&t[0]&&(i.def=e[3].hauteur_tir),!Z&&4&t[0]&&(Z=!0,i.value=e[2].hauteur_tir,B(()=>Z=!1)),lt.$set(i);const c={};!ee&&4&t[0]&&(ee=!0,c.value=e[2].hauteur_tir_max,B(()=>ee=!1)),it.$set(c);const p={};!pe&&4&t[0]&&(pe=!0,p.value=e[2].profondeur_queues_arrondes,B(()=>pe=!1)),dt.$set(p);const d={};!$e&&4&t[0]&&($e=!0,d.value=e[2].epaisseur,B(()=>$e=!1)),gt.$set(d);const f={};!we&&4&t[0]&&(we=!0,f.value=e[2].epaisseur_fond,B(()=>we=!1)),_t.$set(f);const m={};!qe&&4&t[0]&&(qe=!0,m.value=e[2].profondeur_rainure,B(()=>qe=!1)),yt.$set(m);const g={};!Ae&&4&t[0]&&(Ae=!0,g.value=e[2].jeu_rainure,B(()=>Ae=!1)),Ct.$set(g);const h={};!Ie&&4&t[0]&&(Ie=!0,h.checked=e[2].inclure_fond,B(()=>Ie=!1)),jt.$set(h)},i(e){Te||(V(Be.$$.fragment,e),V(He.$$.fragment,e),V(Ge.$$.fragment,e),V(Ve.$$.fragment,e),V(et.$$.fragment,e),V(rt.$$.fragment,e),V(lt.$$.fragment,e),V(it.$$.fragment,e),V(dt.$$.fragment,e),V(gt.$$.fragment,e),V(_t.$$.fragment,e),V(yt.$$.fragment,e),V(Ct.$$.fragment,e),V(jt.$$.fragment,e),Te=!0)},o(e){Y(Be.$$.fragment,e),Y(He.$$.fragment,e),Y(Ge.$$.fragment,e),Y(Ve.$$.fragment,e),Y(et.$$.fragment,e),Y(rt.$$.fragment,e),Y(lt.$$.fragment,e),Y(it.$$.fragment,e),Y(dt.$$.fragment,e),Y(gt.$$.fragment,e),Y(_t.$$.fragment,e),Y(yt.$$.fragment,e),Y(Ct.$$.fragment,e),Y(jt.$$.fragment,e),Te=!1},d(e){e&&p(t),ae(Be),ae(He),ae(Ge),ae(Ve),ae(et),ae(rt),ae(lt),ae(it),ae(dt),ae(gt),ae(_t),ae(yt),ae(Ct),ae(jt)}}}function ua(e){let t,n;const r=new bn({props:{pieces:e[5]}});return{c(){t=f("div"),ne(r.$$.fragment),x(t,"slot","tables"),x(t,"class","svelte-1e9ss2o")},m(e,a){c(e,t,a),re(r,t,null),n=!0},p(e,t){const n={};32&t[0]&&(n.pieces=e[5]),r.$set(n)},i(e){n||(V(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){e&&p(t),ae(r)}}}function ia(t){let n,r;return{c(){n=h(),r=h()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function ca(e){let t,n;function r(t){e[32].call(null,t)}let a={state:e[4],path:e[0],$$slots:{default:[ia],tables:[ua],dim:[oa],plan:[la]},$$scope:{ctx:e}};void 0!==e[1]&&(a.data=e[1]);const s=new Et({props:a});return L.push(()=>te(s,"data",r)),s.$on("datachange",e[33]),{c(){ne(s.$$.fragment)},m(e,t){re(s,e,t),n=!0},p(e,n){const r={};16&n[0]&&(r.state=e[4]),1&n[0]&&(r.path=e[0]),44&n[0]|8&n[1]&&(r.$$scope={dirty:n,ctx:e}),!t&&2&n[0]&&(t=!0,r.data=e[1],B(()=>t=!1)),s.$set(r)},i(e){n||(V(s.$$.fragment,e),n=!0)},o(e){Y(s.$$.fragment,e),n=!1},d(e){ae(s,e)}}}function pa(e,t,n){let r,a,s,l,o,u,i,c,p,{path:d}=t,{initdata:f={}}=t,m={...f},g={quantite:1,largeur:400,hauteur:150,hauteur_tir_max:150,profondeur:500,epaisseur:15,profondeur_rainure:9,profondeur_queues_arrondes:10,jeu_rainure:1,jeu_lateral:6,jeu_dessous:28,jeu_dessus:7,epaisseur_fond:10,inclure_fond:!0,...f.defaults},h={...f.opt},$={...f.ui||f.opt},_={},v={};function x(e){return{largeur_tir:e.largeur-2*e.jeu_lateral,profondeur_tir:e.profondeur-e.profondeur%50,hauteur_tir:Math.min(e.hauteur_tir_max,e.hauteur-e.jeu_dessous-e.jeu_dessus)}}return e.$set=e=>{"path"in e&&n(0,d=e.path),"initdata"in e&&n(7,f=e.initdata)},e.$$.update=()=>{4&e.$$.dirty[0]&&n(3,_=x({...g,...pe($)})),12&e.$$.dirty[0]&&n(8,h={...g,..._,...pe($)}),256&e.$$.dirty[0]&&n(1,m.opt=h,m),4&e.$$.dirty[0]&&n(1,m.ui=$,m),256&e.$$.dirty[0]&&n(9,r=(new Rn).add_name("Coté").add_features("cote").build(h.profondeur_tir-2*(h.epaisseur-h.profondeur_queues_arrondes),h.hauteur_tir,h.epaisseur)),768&e.$$.dirty[0]&&n(10,a=r.add_name("gauche").put(h.jeu_lateral,h.jeu_dessous,h.epaisseur-h.profondeur_queues_arrondes,"zyx")),768&e.$$.dirty[0]&&n(11,s=r.add_name("droit").put(h.jeu_lateral+h.largeur_tir-h.epaisseur,h.jeu_dessous,h.epaisseur-h.profondeur_queues_arrondes,"zyx")),256&e.$$.dirty[0]&&n(12,l=(new Rn).add_name("Face").add_features("cote").build(h.largeur_tir,h.hauteur_tir,h.epaisseur)),4352&e.$$.dirty[0]&&n(13,o=l.add_name("avant").put(h.jeu_lateral,h.jeu_dessous,0,"xyz")),4352&e.$$.dirty[0]&&n(14,u=l.add_name("arrière").put(h.jeu_lateral,h.jeu_dessous,h.profondeur_tir-h.epaisseur,"xyz")),256&e.$$.dirty[0]&&n(15,i=(new Rn).add_name("Fond tiroir").add_features("panneau").build(h.largeur_tir-2*(h.epaisseur-h.profondeur_rainure+h.jeu_rainure),h.profondeur_tir-(h.epaisseur-h.profondeur_rainure+h.jeu_rainure),h.epaisseur_fond).put(h.jeu_lateral+h.epaisseur-h.profondeur_rainure+h.jeu_rainure,h.jeu_dessous,h.epaisseur-h.profondeur_rainure+h.jeu_rainure,"xzy")),60672&e.$$.dirty[0]&&n(16,c=[h.inclure_fond?i:null,o,u,a,s].filter(e=>null!=e).map(e=>e.multiply_que(h.quantite))),65538&e.$$.dirty[0]&&n(5,p=new mt(c,"Tiroir "+m.name,"Tiroir")),32&e.$$.dirty[0]&&n(4,v.pieces_group=p,v)},[d,m,$,_,v,p,g,f,h,r,a,s,l,o,u,i,c,x,function(e){$.quantite=e,n(2,$)},function(e){$.largeur=e,n(2,$)},function(e){$.hauteur=e,n(2,$)},function(e){$.profondeur=e,n(2,$)},function(e){$.largeur_tir=e,n(2,$)},function(e){$.profondeur_tir=e,n(2,$)},function(e){$.hauteur_tir=e,n(2,$)},function(e){$.hauteur_tir_max=e,n(2,$)},function(e){$.profondeur_queues_arrondes=e,n(2,$)},function(e){$.epaisseur=e,n(2,$)},function(e){$.epaisseur_fond=e,n(2,$)},function(e){$.profondeur_rainure=e,n(2,$)},function(e){$.jeu_rainure=e,n(2,$)},function(e){$.inclure_fond=e,n(2,$)},function(e){m=e,n(1,m),n(8,h),n(2,$),n(6,g),n(3,_)},function(t){F(e,t)}]}class da extends oe{constructor(e){super(),le(this,e,pa,ca,s,{path:0,initdata:7},[-1,-1])}}function fa(e){let t,n,a,s,l,o,u,d,m,$,y,w,k,j,q,P,S,N,E,A,F,O,L,M,I,T;const J=new He({props:{data:e[2]}});return{c(){t=f("div"),n=f("select"),a=f("option"),a.textContent="Paramètres",ne(J.$$.fragment),s=h(),l=f("button"),l.textContent="Effacer",o=h(),u=f("button"),u.textContent="Enregistrer",d=h(),m=f("button"),m.textContent="Enregistrer sous...",$=h(),y=f("button"),y.textContent="Ouvrir...",w=h(),k=g(e[0]),j=h(),q=f("a"),q.textContent="✎",P=h(),S=f("div"),N=f("label"),E=g("Agencement :\n        "),A=f("select"),F=f("option"),F.textContent="Horizontal",O=f("option"),O.textContent="Vertical",L=h(),M=f("button"),M.textContent="Paramètres...",a.__value="#/settings",a.value=a.__value,x(n,"class","tree-select svelte-1nrxsfu"),x(l,"class","svelte-1nrxsfu"),x(u,"class","svelte-1nrxsfu"),x(m,"class","svelte-1nrxsfu"),x(y,"class","svelte-1nrxsfu"),x(q,"href","@"),F.__value="horizontal",F.value=F.__value,O.__value="vertical",O.value=O.__value,x(A,"class","svelte-1nrxsfu"),void 0===e[3]&&R(()=>e[18].call(A)),C(N,"display","inline"),x(M,"class","svelte-1nrxsfu"),C(S,"float","right"),x(t,"class","toolbar svelte-1nrxsfu")},m(p,f,g){c(p,t,f),i(t,n),i(n,a),re(J,n,null),i(t,s),i(t,l),i(t,o),i(t,u),i(t,d),i(t,m),i(t,$),i(t,y),i(t,w),i(t,k),i(t,j),i(t,q),i(t,P),i(t,S),i(S,N),i(N,E),i(N,A),i(A,F),i(A,O),z(A,e[3]),i(S,L),i(S,M),I=!0,g&&r(T),T=[_(n,"change",$a),_(l,"click",e[6]),_(u,"click",e[9]),_(m,"click",e[8]),_(y,"click",e[10]),_(q,"click",v(e[7])),_(A,"change",e[18]),_(M,"click",_a)]},p(e,t){const n={};4&t&&(n.data=e[2]),J.$set(n),(!I||1&t)&&b(k,e[0]),8&t&&z(A,e[3])},i(e){I||(V(J.$$.fragment,e),I=!0)},o(e){Y(J.$$.fragment,e),I=!1},d(e){e&&p(t),ae(J),r(T)}}}function ma(e){let t,n,a,s,l,o,u,d,m,$,y,w,C,k,j,q,P,S,N,E;return{c(){t=f("div"),n=f("select"),a=f("option"),a.textContent="Agencement horizontal",s=f("option"),s.textContent="Agencement vertical",l=h(),o=f("button"),o.textContent="Paramètres...",u=h(),d=f("button"),d.textContent="Enregistrer",m=h(),$=f("button"),$.textContent="Enregistrer sous...",y=h(),w=f("button"),w.textContent="Nouveau",C=h(),k=f("button"),k.textContent="Ouvrir...",j=h(),q=f("p"),P=g(e[0]),S=h(),N=f("a"),N.textContent="✎",a.__value="horizontal",a.value=a.__value,s.__value="vertical",s.value=s.__value,x(n,"class","svelte-1nrxsfu"),void 0===e[3]&&R(()=>e[19].call(n)),x(o,"class","svelte-1nrxsfu"),x(d,"class","svelte-1nrxsfu"),x($,"class","svelte-1nrxsfu"),x(w,"class","svelte-1nrxsfu"),x(k,"class","svelte-1nrxsfu"),x(t,"class","open-save-buttons svelte-1nrxsfu"),x(N,"href","@")},m(p,f,g){c(p,t,f),i(t,n),i(n,a),i(n,s),z(n,e[3]),i(t,l),i(t,o),i(t,u),i(t,d),i(t,m),i(t,$),i(t,y),i(t,w),i(t,C),i(t,k),c(p,j,f),c(p,q,f),i(q,P),i(q,S),i(q,N),g&&r(E),E=[_(n,"change",e[19]),_(o,"click",_a),_(d,"click",e[9]),_($,"click",e[8]),_(w,"click",e[6]),_(k,"click",e[10]),_(N,"click",v(e[7]))]},p(e,t){8&t&&z(n,e[3]),1&t&&b(P,e[0])},d(e){e&&p(t),e&&p(j),e&&p(q),r(E)}}}function ga(t){let n,r,a;return{c(){n=f("li"),r=f("a"),r.textContent="Paramètres...",x(r,"href","@")},m(e,t,s){c(e,n,t),i(n,r),s&&a(),a=_(r,"click",v(_a))},p:e,d(e){e&&p(n),a()}}}function ha(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,y,w,C,z,k,j,q,P=JSON.stringify(e[2],null,2)+"",S="horizontal"==e[3]&&fa(e),N="vertical"==e[3]&&ma(e);const E=new Ie({props:{data:e[2]}});let A="vertical"==e[3]&&ga();const F=new Nn({props:{name:"Meuble",initdata:e[1]}});function O(t){e[21].call(null,t)}F.$on("datachange",e[11]);let M={};void 0!==e[4]&&(M.settings=e[4]);const I=new Ne({props:M});return L.push(()=>te(I,"settings",O)),{c(){t=f("div"),S&&S.c(),n=h(),r=f("div"),N&&N.c(),a=h(),s=f("ul"),l=f("li"),ne(E.$$.fragment),o=h(),A&&A.c(),u=h(),d=f("div"),ne(F.$$.fragment),m=h(),$=f("div"),_=f("details"),v=f("summary"),v.textContent="Contenu du fichier",y=h(),w=f("pre"),C=g(P),z=h(),ne(I.$$.fragment),x(r,"class","tree svelte-1nrxsfu"),x(w,"id","json"),x($,"class","routable"),x(d,"class","main svelte-1nrxsfu"),x(t,"class",j="root agencement-"+e[3]+" svelte-1nrxsfu")},m(p,f){c(p,t,f),S&&S.m(t,null),i(t,n),i(t,r),N&&N.m(r,null),i(r,a),i(r,s),i(s,l),re(E,l,null),i(s,o),A&&A.m(s,null),i(t,u),i(t,d),re(F,d,null),i(d,m),i(d,$),i($,_),i(_,v),i(_,y),i(_,w),i(w,C),e[20]($),i(d,z),re(I,d,null),q=!0},p(e,[l]){"horizontal"==e[3]?S?(S.p(e,l),8&l&&V(S,1)):(S=fa(e),S.c(),V(S,1),S.m(t,n)):S&&(X(),Y(S,1,1,()=>{S=null}),W()),"vertical"==e[3]?N?N.p(e,l):(N=ma(e),N.c(),N.m(r,a)):N&&(N.d(1),N=null);const o={};4&l&&(o.data=e[2]),E.$set(o),"vertical"==e[3]?A?A.p(e,l):(A=ga(),A.c(),A.m(s,null)):A&&(A.d(1),A=null);const u={};2&l&&(u.initdata=e[1]),F.$set(u),(!q||4&l)&&P!==(P=JSON.stringify(e[2],null,2)+"")&&b(C,P);const i={};!k&&16&l&&(k=!0,i.settings=e[4],B(()=>k=!1)),I.$set(i),(!q||8&l&&j!==(j="root agencement-"+e[3]+" svelte-1nrxsfu"))&&x(t,"class",j)},i(e){q||(V(S),V(E.$$.fragment,e),V(F.$$.fragment,e),V(I.$$.fragment,e),q=!0)},o(e){Y(S),Y(E.$$.fragment,e),Y(F.$$.fragment,e),Y(I.$$.fragment,e),q=!1},d(n){n&&p(t),S&&S.d(),N&&N.d(),ae(E),A&&A.d(),ae(F),e[20](null),ae(I)}}}function $a(e){window.location.hash=e.target.value}function _a(){window.location.hash="#/settings"}function va(t,n,r){let a={Porte:er,Caisson:Hr,Ensemble:Nn,Etagere:Yr,Facade:sa,Tiroir:da};E("App-components",a);let l=`meuble_${(new Date).toISOString().slice(0,16).replace(/T/,"_").replace(/:/,"")}.json`,o={},u={},i="horizontal",c=function(t,n=e){let r;const a=[];function l(e){if(s(t,e)&&(t=e,r)){const e=!ue.length;for(let e=0;e<a.length;e+=1){const n=a[e];n[1](),ue.push(n,t)}if(e){for(let e=0;e<ue.length;e+=2)ue[e][0](ue[e+1]);ue.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(s,o=e){const u=[s,o];return a.push(u),1===a.length&&(r=n(l)||e),s(t),()=>{const e=a.indexOf(u);-1!==e&&a.splice(e,1),0===a.length&&(r(),r=null)}}}}(JSON.parse(localStorage.getItem("calcul-meubles-settings")||"{}"));E("settings",c),c.subscribe(e=>{e.agencement&&i!=e.agencement&&r(3,i=e.agencement),r(2,u.settings=e,u),localStorage.setItem("calcul-meubles-settings",JSON.stringify(e))});let p,d=JSON.parse(localStorage.getItem("calcul-meubles-data")||"null"),f=localStorage.getItem("calcul-meubles-file-data");function m(){let e=prompt("Nom du fichier",l);return null!=e&&(r(0,l=e),!0)}function g(){if(0==u.children.length)return!0;let e=JSON.stringify(u,null,2);return e==f||(console.log("isSaved() = false",e,f),!1)}function h(e){if(!e&&g())return"already-saved";let t=JSON.stringify(u,null,2);if(e&&!m())return"cancelled";let n=new window.File([t],l,{type:"application/json"}),a=URL.createObjectURL(n);try{let e=document.createElement("a");e.href=a,e.style.display="none",e.setAttribute("download",l),document.body.appendChild(e),e.click(),document.body.removeChild(e),localStorage.removeItem("calcul-meubles-data"),r(12,f=t)}finally{URL.revokeObjectURL(a)}}return d&&(o=d.data,l=d.filename),ce(e=>e.root?[p]:[]),t.$$.update=()=>{2&t.$$.dirty&&r(2,u={...o}),2&t.$$.dirty&&console.log("App initdata =",o),24&t.$$.dirty&&c.update(e=>({...e,agencement:i})),5&t.$$.dirty&&localStorage.setItem("calcul-meubles-data",JSON.stringify({data:u,filename:l})),4096&t.$$.dirty&&localStorage.setItem("calcul-meubles-file-data",f)},[l,o,u,i,c,p,function(){if(!g()){if(!confirm("Fichier non enregistré, voulez-vous continuer et perdre les modifications en cours?"))return;localStorage.setItem("calcul-meubles-data-backup",localStorage.getItem("calcul-meubles-data")),localStorage.setItem("calcul-meubles-file-data-backup",localStorage.getItem("calcul-meubles-file-data"))}localStorage.removeItem("calcul-meubles-data"),localStorage.removeItem("calcul-meubles-file-data"),window.location.reload()},m,function(){h(!0)},function(){"already-saved"==h(!1)&&alert("Déjà enregistré")},function(){if(!g())return void alert("Fichier non enregistré, veuillez enregistrer le fichier avant d'en ouvrir un nouveau.");let e=document.createElement("input");e.style.display="none",e.setAttribute("type","file"),e.addEventListener("change",e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{r(1,o=JSON.parse(e.target.result)),c.set(o.settings||{}),r(0,l=t.name),r(12,f=e.target.result)},n.readAsText(t)},!1),document.body.appendChild(e),e.click(),document.body.removeChild(e)},function(e){r(2,u=e.detail.data)},f,a,d,function(){return!localStorage.getItem("calcul-meubles-data")||"cancelled"!=h(!1)},g,h,function(){i=k(this),r(3,i)},function(){i=k(this),r(3,i)},function(e){L[e?"unshift":"push"](()=>{r(5,p=e)})},function(e){c=e,r(4,c)}]}return new class extends oe{constructor(e){super(),le(this,e,va,ha,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
